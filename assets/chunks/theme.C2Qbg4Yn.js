const __vite__fileDeps=["assets/chunks/VPAlgoliaSearchBox.4F1Jlr1R.js","assets/chunks/framework.BpGwFK5V.js","assets/chunks/index.1cbDv2Hd.js","assets/chunks/shoelace.DhQcvgn-.js","assets/chunks/base-path.r-Ppr3Mh.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as W,o as R,c as N,r as M,n as be,a as Ci,t as ye,b as q,w as B,T as uf,e as $,_ as J,u as E_,i as tv,f as iv,g as df,h as we,j as Ta,k as te,l as Jr,m as I,p as A,q as nt,s as st,v as gs,x as Od,y as en,z as Ku,A as Zu,B as v_,C as rv,D as nv,E as bs,F as xe,G as Bt,H as m_,I as qu,J as V,K as ca,L as g_,M as ih,N as Bh,O as Qu,P as sv,Q as T_,R as ov,S as av,U as lv,V as y_,W as cv,X as hv,Y as Cu,Z as R_,$ as w_,a0 as uv,a1 as dv,a2 as fv,a3 as pv,a4 as _v,a5 as Ev}from"./framework.BpGwFK5V.js";function vv(t,e,i,r,n){A_(t,e,i||0,r||t.length-1,n||mv)}function A_(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),h=Math.max(i,Math.floor(e-o*l/s+c)),u=Math.min(r,Math.floor(e+(s-o)*l/s+c));A_(t,e,h,u,n)}var d=t[e],f=i,E=r;for(wa(t,i,e),n(t[r],d)>0&&wa(t,i,r);f<E;){for(wa(t,f,E),f++,E--;n(t[f],d)<0;)f++;for(;n(t[E],d)>0;)E--}n(t[i],d)===0?wa(t,i,E):(E++,wa(t,E,r)),E<=e&&(i=E+1),e<=E&&(r=E-1)}}function wa(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function mv(t,e){return t<e?-1:t>e?1:0}class gv{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let i=this.data;const r=[];if(!fh(e,i))return r;const n=this.toBBox,s=[];for(;i;){for(let o=0;o<i.children.length;o++){const a=i.children[o],l=i.leaf?n(a):a;fh(e,l)&&(i.leaf?r.push(a):hd(e,l)?this._all(a,r):s.push(a))}i=s.pop()}return r}collides(e){let i=this.data;if(!fh(e,i))return!1;const r=[];for(;i;){for(let n=0;n<i.children.length;n++){const s=i.children[n],o=i.leaf?this.toBBox(s):s;if(fh(e,o)){if(i.leaf||hd(e,o))return!0;r.push(s)}}i=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let i=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Ls([]),this}remove(e,i){if(!e)return this;let r=this.data;const n=this.toBBox(e),s=[],o=[];let a,l,c;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),r.leaf){const h=Tv(e,r.children,i);if(h!==-1)return r.children.splice(h,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&hd(r,n)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,i){return e.minX-i.minX}compareMinY(e,i){return e.minY-i.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,i){const r=[];for(;e;)e.leaf?i.push(...e.children):r.push(...e.children),e=r.pop();return i}_build(e,i,r,n){const s=r-i+1;let o=this._maxEntries,a;if(s<=o)return a=Ls(e.slice(i,r+1)),Ss(a,this.toBBox),a;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),a=Ls([]),a.leaf=!1,a.height=n;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));$f(e,i,r,c,this.compareMinX);for(let h=i;h<=r;h+=c){const u=Math.min(h+c-1,r);$f(e,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(e,d,f,n-1))}}return Ss(a,this.toBBox),a}_chooseSubtree(e,i,r,n){for(;n.push(i),!(i.leaf||n.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<i.children.length;l++){const c=i.children[l],h=cd(c),u=wv(e,c)-h;u<o?(o=u,s=h<s?h:s,a=c):u===o&&h<s&&(s=h,a=c)}i=a||i.children[0]}return i}_insert(e,i,r){const n=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(n,this.data,i,s);for(o.children.push(e),Xa(o,n);i>=0&&s[i].children.length>this._maxEntries;)this._split(s,i),i--;this._adjustParentBBoxes(n,s,i)}_split(e,i){const r=e[i],n=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,n);const o=this._chooseSplitIndex(r,s,n),a=Ls(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,Ss(r,this.toBBox),Ss(a,this.toBBox),i?e[i-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,i){this.data=Ls([e,i]),this.data.height=e.height+1,this.data.leaf=!1,Ss(this.data,this.toBBox)}_chooseSplitIndex(e,i,r){let n,s=1/0,o=1/0;for(let a=i;a<=r-i;a++){const l=La(e,0,a,this.toBBox),c=La(e,a,r,this.toBBox),h=Av(l,c),u=cd(l)+cd(c);h<s?(s=h,n=a,o=u<o?u:o):h===s&&u<o&&(o=u,n=a)}return n||r-i}_chooseSplitAxis(e,i,r){const n=e.leaf?this.compareMinX:yv,s=e.leaf?this.compareMinY:Rv,o=this._allDistMargin(e,i,r,n),a=this._allDistMargin(e,i,r,s);o<a&&e.children.sort(n)}_allDistMargin(e,i,r,n){e.children.sort(n);const s=this.toBBox,o=La(e,0,i,s),a=La(e,r-i,r,s);let l=dh(o)+dh(a);for(let c=i;c<r-i;c++){const h=e.children[c];Xa(o,e.leaf?s(h):h),l+=dh(o)}for(let c=r-i-1;c>=i;c--){const h=e.children[c];Xa(a,e.leaf?s(h):h),l+=dh(a)}return l}_adjustParentBBoxes(e,i,r){for(let n=r;n>=0;n--)Xa(i[n],e)}_condense(e){for(let i=e.length-1,r;i>=0;i--)e[i].children.length===0?i>0?(r=e[i-1].children,r.splice(r.indexOf(e[i]),1)):this.clear():Ss(e[i],this.toBBox)}}function Tv(t,e,i){if(!i)return e.indexOf(t);for(let r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function Ss(t,e){La(t,0,t.children.length,e,t)}function La(t,e,i,r,n){n||(n=Ls(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<i;s++){const o=t.children[s];Xa(n,t.leaf?r(o):o)}return n}function Xa(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function yv(t,e){return t.minX-e.minX}function Rv(t,e){return t.minY-e.minY}function cd(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function dh(t){return t.maxX-t.minX+(t.maxY-t.minY)}function wv(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Av(t,e){const i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function hd(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function fh(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ls(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $f(t,e,i,r,n){const s=[e,i];for(;s.length;){if(i=s.pop(),e=s.pop(),i-e<=r)continue;const o=e+Math.ceil((i-e)/r/2)*r;vv(t,o,e,i,n),s.push(e,o,o,i)}}var bv=function(t){return t==null};const Zr=bv;var Sv={}.toString,Pv=function(t,e){return Sv.call(t)==="[object "+e+"]"},Cv=function(t,e,i){return t<e?e:t>i?i:t};const Mv=Cv;var aa=function(t){return Pv(t,"Number")},Hc=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function me(){var t=new Hc(9);return Hc!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function rh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function nh(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Qi(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*o-a*c,d=-h*s+a*l,f=c*s-o*l,E=i*u+r*d+n*f;return E?(E=1/E,t[0]=u*E,t[1]=(-h*r+n*c)*E,t[2]=(a*r-n*o)*E,t[3]=d*E,t[4]=(h*i-n*l)*E,t[5]=(-a*i+n*s)*E,t[6]=f*E,t[7]=(-c*i+r*l)*E,t[8]=(o*i-r*s)*E,t):null}function tr(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=i[0],f=i[1],E=i[2],g=i[3],p=i[4],y=i[5],T=i[6],w=i[7],_=i[8];return t[0]=d*r+f*o+E*c,t[1]=d*n+f*a+E*h,t[2]=d*s+f*l+E*u,t[3]=g*r+p*o+y*c,t[4]=g*n+p*a+y*h,t[5]=g*s+p*l+y*u,t[6]=T*r+w*o+_*c,t[7]=T*n+w*a+_*h,t[8]=T*s+w*l+_*u,t}function Nt(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=i[0],f=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=d*r+f*o+c,t[7]=d*n+f*a+h,t[8]=d*s+f*l+u,t}function ir(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=Math.sin(i),f=Math.cos(i);return t[0]=f*r+d*o,t[1]=f*n+d*a,t[2]=f*s+d*l,t[3]=f*o-d*r,t[4]=f*a-d*n,t[5]=f*l-d*s,t[6]=c,t[7]=h,t[8]=u,t}function sh(t,e,i){var r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function oh(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Re(){var t=new Hc(2);return Hc!=Float32Array&&(t[0]=0,t[1]=0),t}function ah(t,e){var i=new Hc(2);return i[0]=t,i[1]=e,i}function Nv(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.hypot(i,r)}function Bv(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function Ji(t,e,i,r){var n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function je(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}var Wf=Bv,Ts=Nv;(function(){var t=Re();return function(e,i,r,n,s,o){var a,l;for(i||(i=2),r||(r=0),n?l=Math.min(n*i+r,e.length):l=e.length,a=r;a<l;a+=i)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();var xd=function(t,e){return xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])},xd(t,e)};function De(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xd(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Ie=function(){return Ie=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Ie.apply(this,arguments)};function Iv(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i}function ha(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function ua(t,e){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){i.label=c[1];break}if(c[0]===6&&i.label<s[1]){i.label=s[1],s=c;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(c);break}s[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(h){c=[6,h],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ys(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bi(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}function Aa(t,e,i){if(i||arguments.length===2)for(var r=0,n=e.length,s;r<n;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ff(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b_={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function n(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function s(l,c,h,u,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new n(h,u||l,d),E=i?i+c:c;return l._events[E]?l._events[E].fn?l._events[E]=[l._events[E],f]:l._events[E].push(f):(l._events[E]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],h,u;if(this._eventsCount===0)return c;for(u in h=this._events)e.call(h,u)&&c.push(i?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},a.prototype.listeners=function(c){var h=i?i+c:c,u=this._events[h];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,E=new Array(f);d<f;d++)E[d]=u[d].fn;return E},a.prototype.listenerCount=function(c){var h=i?i+c:c,u=this._events[h];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,h,u,d,f,E){var g=i?i+c:c;if(!this._events[g])return!1;var p=this._events[g],y=arguments.length,T,w;if(p.fn){switch(p.once&&this.removeListener(c,p.fn,void 0,!0),y){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,h),!0;case 3:return p.fn.call(p.context,h,u),!0;case 4:return p.fn.call(p.context,h,u,d),!0;case 5:return p.fn.call(p.context,h,u,d,f),!0;case 6:return p.fn.call(p.context,h,u,d,f,E),!0}for(w=1,T=new Array(y-1);w<y;w++)T[w-1]=arguments[w];p.fn.apply(p.context,T)}else{var _=p.length,b;for(w=0;w<_;w++)switch(p[w].once&&this.removeListener(c,p[w].fn,void 0,!0),y){case 1:p[w].fn.call(p[w].context);break;case 2:p[w].fn.call(p[w].context,h);break;case 3:p[w].fn.call(p[w].context,h,u);break;case 4:p[w].fn.call(p[w].context,h,u,d);break;default:if(!T)for(b=1,T=new Array(y-1);b<y;b++)T[b-1]=arguments[b];p[w].fn.apply(p[w].context,T)}}return!0},a.prototype.on=function(c,h,u){return s(this,c,h,u,!1)},a.prototype.once=function(c,h,u){return s(this,c,h,u,!0)},a.prototype.removeListener=function(c,h,u,d){var f=i?i+c:c;if(!this._events[f])return this;if(!h)return o(this,f),this;var E=this._events[f];if(E.fn)E.fn===h&&(!d||E.once)&&(!u||E.context===u)&&o(this,f);else{for(var g=0,p=[],y=E.length;g<y;g++)(E[g].fn!==h||d&&!E[g].once||u&&E[g].context!==u)&&p.push(E[g]);p.length?this._events[f]=p.length===1?p[0]:p:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var h;return c?(h=i?i+c:c,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a})(b_);var Ov=b_.exports;const tn=ff(Ov);var m;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.ALWAYS=519]="ALWAYS",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.GEQUAL=518]="GEQUAL",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",t[t.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",t[t.RGBA32F_EXT=34836]="RGBA32F_EXT",t[t.RGB32F_EXT=34837]="RGB32F_EXT",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",t[t.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.SRGB_EXT=35904]="SRGB_EXT",t[t.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",t[t.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",t[t.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",t[t.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",t[t.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",t[t.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",t[t.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",t[t.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",t[t.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",t[t.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",t[t.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",t[t.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",t[t.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",t[t.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",t[t.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",t[t.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",t[t.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",t[t.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",t[t.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",t[t.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",t[t.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",t[t.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",t[t.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",t[t.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",t[t.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",t[t.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",t[t.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",t[t.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",t[t.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",t[t.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",t[t.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",t[t.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",t[t.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",t[t.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",t[t.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",t[t.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",t[t.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(m||(m={}));var pe;(function(t){t[t.Buffer=0]="Buffer",t[t.Texture=1]="Texture",t[t.RenderTarget=2]="RenderTarget",t[t.Sampler=3]="Sampler",t[t.Program=4]="Program",t[t.Bindings=5]="Bindings",t[t.InputLayout=6]="InputLayout",t[t.RenderPipeline=7]="RenderPipeline",t[t.ComputePipeline=8]="ComputePipeline",t[t.Readback=9]="Readback",t[t.QueryPool=10]="QueryPool",t[t.RenderBundle=11]="RenderBundle"})(pe||(pe={}));var pt;(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(pt||(pt={}));var Yc;(function(t){t[t.CCW=2305]="CCW",t[t.CW=2304]="CW"})(Yc||(Yc={}));var Si;(function(t){t[t.NONE=0]="NONE",t[t.FRONT=1]="FRONT",t[t.BACK=2]="BACK",t[t.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(Si||(Si={}));var Z;(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC=768]="SRC",t[t.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",t[t.DST=774]="DST",t[t.ONE_MINUS_DST=775]="ONE_MINUS_DST",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.CONST=32769]="CONST",t[t.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Z||(Z={}));var $e;(function(t){t[t.ADD=32774]="ADD",t[t.SUBSTRACT=32778]="SUBSTRACT",t[t.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX"})($e||($e={}));var ri;(function(t){t[t.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",t[t.REPEAT=1]="REPEAT",t[t.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(ri||(ri={}));var Ze;(function(t){t[t.POINT=0]="POINT",t[t.BILINEAR=1]="BILINEAR"})(Ze||(Ze={}));var it;(function(t){t[t.NO_MIP=0]="NO_MIP",t[t.NEAREST=1]="NEAREST",t[t.LINEAR=2]="LINEAR"})(it||(it={}));var qe;(function(t){t[t.POINTS=0]="POINTS",t[t.TRIANGLES=1]="TRIANGLES",t[t.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",t[t.LINES=3]="LINES",t[t.LINE_STRIP=4]="LINE_STRIP"})(qe||(qe={}));var U;(function(t){t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(U||(U={}));var Q;(function(t){t[t.STATIC=1]="STATIC",t[t.DYNAMIC=2]="DYNAMIC"})(Q||(Q={}));var Se;(function(t){t[t.VERTEX=1]="VERTEX",t[t.INSTANCE=2]="INSTANCE"})(Se||(Se={}));var Lf;(function(t){t.LOADED="loaded"})(Lf||(Lf={}));var re;(function(t){t[t.TEXTURE_2D=0]="TEXTURE_2D",t[t.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",t[t.TEXTURE_3D=2]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(re||(re={}));var Ae;(function(t){t[t.SAMPLED=1]="SAMPLED",t[t.RENDER_TARGET=2]="RENDER_TARGET",t[t.STORAGE=4]="STORAGE"})(Ae||(Ae={}));var Le;(function(t){t[t.NONE=0]="NONE",t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t[t.RGB=7]="RGB",t[t.ALL=15]="ALL"})(Le||(Le={}));var wt;(function(t){t[t.KEEP=7680]="KEEP",t[t.ZERO=0]="ZERO",t[t.REPLACE=7681]="REPLACE",t[t.INVERT=5386]="INVERT",t[t.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",t[t.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",t[t.INCREMENT_WRAP=34055]="INCREMENT_WRAP",t[t.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(wt||(wt={}));var Fe;(function(t){t[t.Float=0]="Float",t[t.UnfilterableFloat=1]="UnfilterableFloat",t[t.Uint=2]="Uint",t[t.Sint=3]="Sint",t[t.Depth=4]="Depth"})(Fe||(Fe={}));var zc;(function(t){t[t.LOWER_LEFT=0]="LOWER_LEFT",t[t.UPPER_LEFT=1]="UPPER_LEFT"})(zc||(zc={}));var er;(function(t){t[t.NEGATIVE_ONE=0]="NEGATIVE_ONE",t[t.ZERO=1]="ZERO"})(er||(er={}));var Mu;(function(t){t[t.OcclusionConservative=0]="OcclusionConservative"})(Mu||(Mu={}));var C;(function(t){t[t.U8=1]="U8",t[t.U16=2]="U16",t[t.U32=3]="U32",t[t.S8=4]="S8",t[t.S16=5]="S16",t[t.S32=6]="S32",t[t.F16=7]="F16",t[t.F32=8]="F32",t[t.BC1=65]="BC1",t[t.BC2=66]="BC2",t[t.BC3=67]="BC3",t[t.BC4_UNORM=68]="BC4_UNORM",t[t.BC4_SNORM=69]="BC4_SNORM",t[t.BC5_UNORM=70]="BC5_UNORM",t[t.BC5_SNORM=71]="BC5_SNORM",t[t.U16_PACKED_5551=97]="U16_PACKED_5551",t[t.U16_PACKED_565=98]="U16_PACKED_565",t[t.D24=129]="D24",t[t.D32F=130]="D32F",t[t.D24S8=131]="D24S8",t[t.D32FS8=132]="D32FS8"})(C||(C={}));var x;(function(t){t[t.R=1]="R",t[t.RG=2]="RG",t[t.RGB=3]="RGB",t[t.RGBA=4]="RGBA",t[t.A=5]="A"})(x||(x={}));var F;(function(t){t[t.None=0]="None",t[t.Normalized=1]="Normalized",t[t.sRGB=2]="sRGB",t[t.Depth=4]="Depth",t[t.Stencil=8]="Stencil",t[t.RenderTarget=16]="RenderTarget",t[t.Luminance=32]="Luminance"})(F||(F={}));function k(t,e,i){return t<<16|e<<8|i}var v;(function(t){t[t.ALPHA=k(C.U8,x.A,F.None)]="ALPHA",t[t.U8_LUMINANCE=k(C.U8,x.A,F.Luminance)]="U8_LUMINANCE",t[t.F16_LUMINANCE=k(C.F16,x.A,F.Luminance)]="F16_LUMINANCE",t[t.F32_LUMINANCE=k(C.F32,x.A,F.Luminance)]="F32_LUMINANCE",t[t.F16_R=k(C.F16,x.R,F.None)]="F16_R",t[t.F16_RG=k(C.F16,x.RG,F.None)]="F16_RG",t[t.F16_RGB=k(C.F16,x.RGB,F.None)]="F16_RGB",t[t.F16_RGBA=k(C.F16,x.RGBA,F.None)]="F16_RGBA",t[t.F32_R=k(C.F32,x.R,F.None)]="F32_R",t[t.F32_RG=k(C.F32,x.RG,F.None)]="F32_RG",t[t.F32_RGB=k(C.F32,x.RGB,F.None)]="F32_RGB",t[t.F32_RGBA=k(C.F32,x.RGBA,F.None)]="F32_RGBA",t[t.U8_R=k(C.U8,x.R,F.None)]="U8_R",t[t.U8_R_NORM=k(C.U8,x.R,F.Normalized)]="U8_R_NORM",t[t.U8_RG=k(C.U8,x.RG,F.None)]="U8_RG",t[t.U8_RG_NORM=k(C.U8,x.RG,F.Normalized)]="U8_RG_NORM",t[t.U8_RGB=k(C.U8,x.RGB,F.None)]="U8_RGB",t[t.U8_RGB_NORM=k(C.U8,x.RGB,F.Normalized)]="U8_RGB_NORM",t[t.U8_RGB_SRGB=k(C.U8,x.RGB,F.sRGB|F.Normalized)]="U8_RGB_SRGB",t[t.U8_RGBA=k(C.U8,x.RGBA,F.None)]="U8_RGBA",t[t.U8_RGBA_NORM=k(C.U8,x.RGBA,F.Normalized)]="U8_RGBA_NORM",t[t.U8_RGBA_SRGB=k(C.U8,x.RGBA,F.sRGB|F.Normalized)]="U8_RGBA_SRGB",t[t.U16_R=k(C.U16,x.R,F.None)]="U16_R",t[t.U16_R_NORM=k(C.U16,x.R,F.Normalized)]="U16_R_NORM",t[t.U16_RG_NORM=k(C.U16,x.RG,F.Normalized)]="U16_RG_NORM",t[t.U16_RGBA_NORM=k(C.U16,x.RGBA,F.Normalized)]="U16_RGBA_NORM",t[t.U16_RGBA=k(C.U16,x.RGBA,F.None)]="U16_RGBA",t[t.U16_RGB=k(C.U16,x.RGB,F.None)]="U16_RGB",t[t.U16_RG=k(C.U16,x.RG,F.None)]="U16_RG",t[t.U32_R=k(C.U32,x.R,F.None)]="U32_R",t[t.U32_RG=k(C.U32,x.RG,F.None)]="U32_RG",t[t.U32_RGB=k(C.U32,x.RGB,F.None)]="U32_RGB",t[t.U32_RGBA=k(C.U32,x.RGBA,F.None)]="U32_RGBA",t[t.S8_R=k(C.S8,x.R,F.None)]="S8_R",t[t.S8_R_NORM=k(C.S8,x.R,F.Normalized)]="S8_R_NORM",t[t.S8_RG_NORM=k(C.S8,x.RG,F.Normalized)]="S8_RG_NORM",t[t.S8_RGB_NORM=k(C.S8,x.RGB,F.Normalized)]="S8_RGB_NORM",t[t.S8_RGBA_NORM=k(C.S8,x.RGBA,F.Normalized)]="S8_RGBA_NORM",t[t.S16_R=k(C.S16,x.R,F.None)]="S16_R",t[t.S16_RG=k(C.S16,x.RG,F.None)]="S16_RG",t[t.S16_RG_NORM=k(C.S16,x.RG,F.Normalized)]="S16_RG_NORM",t[t.S16_RGB_NORM=k(C.S16,x.RGB,F.Normalized)]="S16_RGB_NORM",t[t.S16_RGBA=k(C.S16,x.RGBA,F.None)]="S16_RGBA",t[t.S16_RGBA_NORM=k(C.S16,x.RGBA,F.Normalized)]="S16_RGBA_NORM",t[t.S32_R=k(C.S32,x.R,F.None)]="S32_R",t[t.S32_RG=k(C.S32,x.RG,F.None)]="S32_RG",t[t.S32_RGB=k(C.S32,x.RGB,F.None)]="S32_RGB",t[t.S32_RGBA=k(C.S32,x.RGBA,F.None)]="S32_RGBA",t[t.U16_RGBA_5551=k(C.U16_PACKED_5551,x.RGBA,F.Normalized)]="U16_RGBA_5551",t[t.U16_RGB_565=k(C.U16_PACKED_565,x.RGB,F.Normalized)]="U16_RGB_565",t[t.BC1=k(C.BC1,x.RGBA,F.Normalized)]="BC1",t[t.BC1_SRGB=k(C.BC1,x.RGBA,F.Normalized|F.sRGB)]="BC1_SRGB",t[t.BC2=k(C.BC2,x.RGBA,F.Normalized)]="BC2",t[t.BC2_SRGB=k(C.BC2,x.RGBA,F.Normalized|F.sRGB)]="BC2_SRGB",t[t.BC3=k(C.BC3,x.RGBA,F.Normalized)]="BC3",t[t.BC3_SRGB=k(C.BC3,x.RGBA,F.Normalized|F.sRGB)]="BC3_SRGB",t[t.BC4_UNORM=k(C.BC4_UNORM,x.R,F.Normalized)]="BC4_UNORM",t[t.BC4_SNORM=k(C.BC4_SNORM,x.R,F.Normalized)]="BC4_SNORM",t[t.BC5_UNORM=k(C.BC5_UNORM,x.RG,F.Normalized)]="BC5_UNORM",t[t.BC5_SNORM=k(C.BC5_SNORM,x.RG,F.Normalized)]="BC5_SNORM",t[t.D24=k(C.D24,x.R,F.Depth)]="D24",t[t.D24_S8=k(C.D24S8,x.RG,F.Depth|F.Stencil)]="D24_S8",t[t.D32F=k(C.D32F,x.R,F.Depth)]="D32F",t[t.D32F_S8=k(C.D32FS8,x.RG,F.Depth|F.Stencil)]="D32F_S8",t[t.U8_RGB_RT=k(C.U8,x.RGB,F.RenderTarget|F.Normalized)]="U8_RGB_RT",t[t.U8_RGBA_RT=k(C.U8,x.RGBA,F.RenderTarget|F.Normalized)]="U8_RGBA_RT",t[t.U8_RGBA_RT_SRGB=k(C.U8,x.RGBA,F.RenderTarget|F.Normalized|F.sRGB)]="U8_RGBA_RT_SRGB"})(v||(v={}));function pf(t){return t>>>8&255}function rr(t){return t>>>16&255}function pa(t){return t&255}function S_(t){switch(t){case C.F32:case C.U32:case C.S32:return 4;case C.U16:case C.S16:case C.F16:return 2;case C.U8:case C.S8:return 1;default:throw new Error("whoops")}}function P_(t){return S_(rr(t))}function xv(t){var e=S_(rr(t)),i=pf(t);return e*i}function C_(t){var e=pa(t);if(e&F.Depth)return Fe.Depth;if(e&F.Normalized)return Fe.Float;var i=rr(t);if(i===C.F16||i===C.F32)return Fe.Float;if(i===C.U8||i===C.U16||i===C.U32)return Fe.Uint;if(i===C.S8||i===C.S16||i===C.S32)return Fe.Sint;throw new Error("whoops")}function j(t,e){if(e===void 0&&(e=""),!t)throw new Error("Assert fail: ".concat(e))}function ps(t){if(t!=null)return t;throw new Error("Missing object")}function Dv(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a}function M_(t,e){t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a}function N_(t){var e=t.r,i=t.g,r=t.b,n=t.a;return{r:e,g:i,b:r,a:n}}function Ju(t,e,i,r){return r===void 0&&(r=1),{r:t,g:e,b:i,a:r}}var Uv=Ju(0,0,0,0);Ju(0,0,0,1);var rn=Ju(1,1,1,0);Ju(1,1,1,1);function Nu(t){return!!(t&&!(t&t-1))}function Ps(t,e){return t??e}function kv(t){return t===void 0?null:t}function Bu(t,e){var i=e-1;return t+i&~i}function $v(t,e){for(var i=new Array(t),r=0;r<t;r++)i[r]=e();return i}function Wv(t,e){e===void 0&&(e=1);var i=t.split(`
`);return i.map(function(r,n){return"".concat(Lv(""+(e+n),4," "),"  ").concat(r)}).join(`
`)}function Lv(t,e,i){for(i===void 0&&(i="0");t.length<e;)t="".concat(i).concat(t);return t}function Xf(t,e){t.blendDstFactor=e.blendDstFactor,t.blendSrcFactor=e.blendSrcFactor,t.blendMode=e.blendMode}function Iu(t,e){return t===void 0&&(t={}),t.compare=e.compare,t.depthFailOp=e.depthFailOp,t.passOp=e.passOp,t.failOp=e.failOp,t.mask=e.mask,t}function B_(t,e){return t===void 0&&(t={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),Xf(t.rgbBlendState,e.rgbBlendState),Xf(t.alphaBlendState,e.alphaBlendState),t.channelWriteMask=e.channelWriteMask,t}function I_(t,e){t.length!==e.length&&(t.length=e.length);for(var i=0;i<e.length;i++)t[i]=B_(t[i],e[i])}function Xv(t,e){e.attachmentsState!==void 0&&I_(t.attachmentsState,e.attachmentsState),t.blendConstant&&e.blendConstant&&M_(t.blendConstant,e.blendConstant),t.depthCompare=Ps(e.depthCompare,t.depthCompare),t.depthWrite=Ps(e.depthWrite,t.depthWrite),t.stencilWrite=Ps(e.stencilWrite,t.stencilWrite),t.stencilFront&&e.stencilFront&&Iu(t.stencilFront,e.stencilFront),t.stencilBack&&e.stencilBack&&Iu(t.stencilBack,e.stencilBack),t.cullMode=Ps(e.cullMode,t.cullMode),t.frontFace=Ps(e.frontFace,t.frontFace),t.polygonOffset=Ps(e.polygonOffset,t.polygonOffset)}function jc(t){var e=Object.assign({},t);return e.attachmentsState=[],I_(e.attachmentsState,t.attachmentsState),e.blendConstant=e.blendConstant&&N_(e.blendConstant),e.stencilFront=Iu(void 0,t.stencilFront),e.stencilBack=Iu(void 0,t.stencilBack),e}var Vf={blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ZERO},_a={attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:Vf,alphaBlendState:Vf}],blendConstant:N_(Uv),depthWrite:!0,depthCompare:pt.LEQUAL,stencilWrite:!1,stencilFront:{compare:pt.ALWAYS,passOp:wt.KEEP,depthFailOp:wt.KEEP,failOp:wt.KEEP},stencilBack:{compare:pt.ALWAYS,passOp:wt.KEEP,depthFailOp:wt.KEEP,failOp:wt.KEEP},cullMode:Si.NONE,frontFace:Yc.CCW,polygonOffset:!1};function Vv(t,e){t===void 0&&(t=null),e===void 0&&(e=_a);var i=jc(e);return t!==null&&Xv(i,t),i}Vv({depthCompare:pt.ALWAYS,depthWrite:!1},_a);var F_={texture:null,sampler:null,formatKind:Fe.Float,dimension:re.TEXTURE_2D};function Hf(t,e){return t.compare==e.compare&&t.depthFailOp===e.depthFailOp&&t.failOp===e.failOp&&t.passOp===e.passOp&&t.mask===e.mask}var ae,Hv=/([^[]*)(\[[0-9]+\])?/;function Yv(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};var e=t.match(Hv);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:Number(e[2])||1,isArray:!!e[2]}}function At(){var t=null;return function(e,i,r){var n=t!==r;return n&&(e.uniform1i(i,r),t=r),n}}function Ce(t,e,i,r){var n=null,s=null;return function(o,a,l){var c=e(l,i),h=c.length,u=!1;if(n===null)n=new Float32Array(h),s=h,u=!0;else{j(s===h,"Uniform length cannot change.");for(var d=0;d<h;++d)if(c[d]!==n[d]){u=!0;break}}return u&&(r(o,t,a,c),n.set(c)),u}}function Et(t,e,i,r){t[e](i,r)}function sr(t,e,i,r){t[e](i,!1,r)}var zv={},jv={},Gv={},Yf=[0];function _f(t,e,i,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Yf[0]=t,t=Yf);var n=t.length;if(t instanceof i)return t;var s=r[n];s||(s=new i(n),r[n]=s);for(var o=0;o<n;o++)s[o]=t[o];return s}function Vt(t,e){return _f(t,e,Float32Array,zv)}function Tr(t,e){return _f(t,e,Int32Array,jv)}function ph(t,e){return _f(t,e,Uint32Array,Gv)}var Kv=(ae={},ae[m.FLOAT]=Ce.bind(null,"uniform1fv",Vt,1,Et),ae[m.FLOAT_VEC2]=Ce.bind(null,"uniform2fv",Vt,2,Et),ae[m.FLOAT_VEC3]=Ce.bind(null,"uniform3fv",Vt,3,Et),ae[m.FLOAT_VEC4]=Ce.bind(null,"uniform4fv",Vt,4,Et),ae[m.INT]=Ce.bind(null,"uniform1iv",Tr,1,Et),ae[m.INT_VEC2]=Ce.bind(null,"uniform2iv",Tr,2,Et),ae[m.INT_VEC3]=Ce.bind(null,"uniform3iv",Tr,3,Et),ae[m.INT_VEC4]=Ce.bind(null,"uniform4iv",Tr,4,Et),ae[m.BOOL]=Ce.bind(null,"uniform1iv",Tr,1,Et),ae[m.BOOL_VEC2]=Ce.bind(null,"uniform2iv",Tr,2,Et),ae[m.BOOL_VEC3]=Ce.bind(null,"uniform3iv",Tr,3,Et),ae[m.BOOL_VEC4]=Ce.bind(null,"uniform4iv",Tr,4,Et),ae[m.FLOAT_MAT2]=Ce.bind(null,"uniformMatrix2fv",Vt,4,sr),ae[m.FLOAT_MAT3]=Ce.bind(null,"uniformMatrix3fv",Vt,9,sr),ae[m.FLOAT_MAT4]=Ce.bind(null,"uniformMatrix4fv",Vt,16,sr),ae[m.UNSIGNED_INT]=Ce.bind(null,"uniform1uiv",ph,1,Et),ae[m.UNSIGNED_INT_VEC2]=Ce.bind(null,"uniform2uiv",ph,2,Et),ae[m.UNSIGNED_INT_VEC3]=Ce.bind(null,"uniform3uiv",ph,3,Et),ae[m.UNSIGNED_INT_VEC4]=Ce.bind(null,"uniform4uiv",ph,4,Et),ae[m.FLOAT_MAT2x3]=Ce.bind(null,"uniformMatrix2x3fv",Vt,6,sr),ae[m.FLOAT_MAT2x4]=Ce.bind(null,"uniformMatrix2x4fv",Vt,8,sr),ae[m.FLOAT_MAT3x2]=Ce.bind(null,"uniformMatrix3x2fv",Vt,6,sr),ae[m.FLOAT_MAT3x4]=Ce.bind(null,"uniformMatrix3x4fv",Vt,12,sr),ae[m.FLOAT_MAT4x2]=Ce.bind(null,"uniformMatrix4x2fv",Vt,8,sr),ae[m.FLOAT_MAT4x3]=Ce.bind(null,"uniformMatrix4x3fv",Vt,12,sr),ae[m.SAMPLER_2D]=At,ae[m.SAMPLER_CUBE]=At,ae[m.SAMPLER_3D]=At,ae[m.SAMPLER_2D_SHADOW]=At,ae[m.SAMPLER_2D_ARRAY]=At,ae[m.SAMPLER_2D_ARRAY_SHADOW]=At,ae[m.SAMPLER_CUBE_SHADOW]=At,ae[m.INT_SAMPLER_2D]=At,ae[m.INT_SAMPLER_3D]=At,ae[m.INT_SAMPLER_CUBE]=At,ae[m.INT_SAMPLER_2D_ARRAY]=At,ae[m.UNSIGNED_INT_SAMPLER_2D]=At,ae[m.UNSIGNED_INT_SAMPLER_3D]=At,ae[m.UNSIGNED_INT_SAMPLER_CUBE]=At,ae[m.UNSIGNED_INT_SAMPLER_2D_ARRAY]=At,ae);function zf(t,e,i){var r=Kv[i.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(i.type));return r().bind(null,t,e)}var Zv={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function qv(t){return Object.prototype.toString.call(t)in Zv}function ba(t,e){return"#define ".concat(t," ").concat(e)}function Qv(t){var e={};return t.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(i,r,n){var s=Number(n);return e[r]=isNaN(s)?n:s,""}),e}function Jv(t,e){var i=[];return t.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(r,n,s){var o=Number(n);return i.push({location:isNaN(o)?e[n]:o,name:s}),""}),i}function jf(t){if(t===void 0)return null;var e=/binding\s*=\s*(\d+)/.exec(t);if(e!==null){var i=parseInt(e[1],10);if(!Number.isNaN(i))return i}return null}function Gf(t){var e="",i=t;return[i,e]}function Fu(t,e,i,r,n){var s;r===void 0&&(r=null),n===void 0&&(n=!0);var o=t.glslVersion==="#version 100",a=e==="frag"&&((s=i.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||s===void 0?void 0:s.length)>1,l=i.replace(`\r
`,`
`).split(`
`).map(function(S){return S.replace(/[/][/].*$/,"")}).filter(function(S){var P=!S||/^\s+$/.test(S);return!P}),c="";r!==null&&(c=Object.keys(r).map(function(S){return ba(S,r[S])}).join(`
`));var h=l.find(function(S){return S.startsWith("precision")})||"precision mediump float;",u=n?l.filter(function(S){return!S.startsWith("precision")}).join(`
`):l.join(`
`),d="";if(t.viewportOrigin===zc.UPPER_LEFT&&(d+="".concat(ba("VIEWPORT_ORIGIN_TL","1"),`
`)),t.clipSpaceNearZ===er.ZERO&&(d+="".concat(ba("CLIPSPACE_NEAR_ZERO","1"),`
`)),t.explicitBindingLocations){var f=0,E=0,g=0;u=u.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(S,P,O,Y){var ce=O?"".concat(O,", "):"";return"layout(".concat(ce,"set = ").concat(f,", binding = ").concat(E++,") uniform ").concat(Y)}),f++,E=0,j(t.separateSamplerTextures),u=u.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(S,P,O,Y,ce){var H=jf(O);H===null&&(H=E++);var ee=bi(Gf(Y),2),Pe=ee[0],Xt=ee[1];return e==="frag"?`
layout(set = `.concat(f,", binding = ").concat(H*2+0,") uniform texture").concat(Pe," T_").concat(ce,`;
layout(set = `).concat(f,", binding = ").concat(H*2+1,") uniform sampler").concat(Xt," S_").concat(ce,";").trim():""}),u=u.replace(e==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(S,P){return"layout(location = ".concat(g++,") ").concat(P)}),d+="".concat(ba("gl_VertexID","gl_VertexIndex"),`
`),d+="".concat(ba("gl_InstanceID","gl_InstanceIndex"),`
`),h=h.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var p=0;u=u.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(S,P,O,Y,ce){var H=jf(O);return H===null&&(H=p++),"uniform sampler".concat(Y," ").concat(ce,"; // BINDING=").concat(H)})}if(u=u.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return"SAMPLER_".concat(P,"(P_").concat(O,")")}),u=u.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return"PP_SAMPLER_".concat(P,"(P_").concat(O,")")}),u=u.replace(/\bPU_TEXTURE\((.*?)\)/g,function(S,P){return"TEXTURE(P_".concat(P,")")}),t.separateSamplerTextures)u=u.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){var Y=bi(Gf(P),2),ce=Y[0],H=Y[1];return"texture".concat(ce," T_P_").concat(O,", sampler").concat(H," S_P_").concat(O)}),u=u.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return"T_".concat(O,", S_").concat(O)}),u=u.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return"sampler".concat(P,"(T_").concat(O,", S_").concat(O,")")}),u=u.replace(/\bTEXTURE\((.*?)\)/g,function(S,P){return"T_".concat(P)});else{var y=[];u=u.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return"sampler".concat(P," P_").concat(O)}),u=u.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return O}),u=u.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(S,P,O){return y.push([O,P]),O}),o&&y.forEach(function(S){var P=bi(S,2),O=P[0],Y=P[1];u=u.replace(new RegExp("texture\\(".concat(O),"g"),function(){return"texture".concat(Y,"(").concat(O)})}),u=u.replace(/\bTEXTURE\((.*?)\)/g,function(S,P){return P})}var T="".concat(o?"":t.glslVersion,`
`).concat(o&&a?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(o&&e==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(n?h:"",`
`).concat(d||"").concat(c?c+`
`:"",`
`).concat(u,`
`).trim();if(t.explicitBindingLocations&&e==="frag"&&(T=T.replace(/^\b(out)\b/g,function(S,P){return"layout(location = 0) ".concat(P)})),o){if(e==="frag"&&(T=T.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(S,P,O){return"varying ".concat(P," ").concat(O,`;
`)})),e==="vert"&&(T=T.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(S,P,O){return"varying ".concat(P," ").concat(O,`;
`)}),T=T.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(S,P,O){return"attribute ".concat(P," ").concat(O,`;
`)})),T=T.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(S,P){return P.trim().replace(/^.*$/gm,function(O){var Y=O.trim();return Y.startsWith("#")?Y:O?"uniform ".concat(Y):""})}),e==="frag")if(a){var w=[];T=T.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(S,P){return w.push(P),"vec4 ".concat(P,`;
`)});var _=T.lastIndexOf("}");T=T.substring(0,_)+`
    `.concat(w.map(function(S,P){return"gl_FragData[".concat(P,"] = ").concat(S,`;
    `)}).join(`
`))+T.substring(_)}else{var b;if(T=T.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(S,P,O){return b=O,"".concat(P," ").concat(O,`;
`)}),b){var _=T.lastIndexOf("}");T=T.substring(0,_)+`
  gl_FragColor = vec4(`.concat(b,`);
`)+T.substring(_)}}T=T.replace(/^\s*layout\((.*)\)/gm,"")}return T}var si=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=t.call(this)||this;return s.id=r,s.device=n,s.device.resourceCreationTracker!==null&&s.device.resourceCreationTracker.trackResourceCreated(s),s}return e.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},e}(tn),em=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.Bindings;var a=s.uniformBufferBindings,l=s.samplerBindings;return o.uniformBufferBindings=a||[],o.samplerBindings=l||[],o.bindingLayouts=o.createBindingLayouts(),o}return e.prototype.createBindingLayouts=function(){var i=0,r=0,n=[],s=this.uniformBufferBindings.length,o=this.samplerBindings.length;return n.push({firstUniformBuffer:i,numUniformBuffers:s,firstSampler:r,numSamplers:o}),i+=s,r+=o,{numUniformBuffers:i,numSamplers:r,bindingLayoutTables:n}},e}(si);function D(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function O_(t){var e=rr(t);switch(e){case C.BC1:case C.BC2:case C.BC3:case C.BC4_UNORM:case C.BC4_SNORM:case C.BC5_UNORM:case C.BC5_SNORM:return!0;default:return!1}}function x_(t){var e=pa(t);if(e&F.Normalized)return!1;var i=rr(t);return i===C.S8||i===C.S16||i===C.S32||i===C.U8||i===C.U16||i===C.U32}function tm(t){switch(t){case Q.STATIC:return m.STATIC_DRAW;case Q.DYNAMIC:return m.DYNAMIC_DRAW}}function Kf(t){if(t&U.INDEX)return m.ELEMENT_ARRAY_BUFFER;if(t&U.VERTEX)return m.ARRAY_BUFFER;if(t&U.UNIFORM)return m.UNIFORM_BUFFER}function im(t){switch(t){case qe.TRIANGLES:return m.TRIANGLES;case qe.POINTS:return m.POINTS;case qe.TRIANGLE_STRIP:return m.TRIANGLE_STRIP;case qe.LINES:return m.LINES;case qe.LINE_STRIP:return m.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function rm(t){switch(t){case C.U8:return m.UNSIGNED_BYTE;case C.U16:return m.UNSIGNED_SHORT;case C.U32:return m.UNSIGNED_INT;case C.S8:return m.BYTE;case C.S16:return m.SHORT;case C.S32:return m.INT;case C.F16:return m.HALF_FLOAT;case C.F32:return m.FLOAT;default:throw new Error("whoops")}}function nm(t){switch(t){case x.R:return 1;case x.RG:return 2;case x.RGB:return 3;case x.RGBA:return 4;default:return 1}}function sm(t){var e=rr(t),i=pf(t),r=pa(t),n=rm(e),s=nm(i),o=!!(r&F.Normalized);return{size:s,type:n,normalized:o}}function om(t){switch(t){case v.U8_R:return m.UNSIGNED_BYTE;case v.U16_R:return m.UNSIGNED_SHORT;case v.U32_R:return m.UNSIGNED_INT;default:throw new Error("whoops")}}function Sa(t){switch(t){case ri.CLAMP_TO_EDGE:return m.CLAMP_TO_EDGE;case ri.REPEAT:return m.REPEAT;case ri.MIRRORED_REPEAT:return m.MIRRORED_REPEAT;default:throw new Error("whoops")}}function _h(t,e){if(e===it.LINEAR&&t===Ze.BILINEAR)return m.LINEAR_MIPMAP_LINEAR;if(e===it.LINEAR&&t===Ze.POINT)return m.NEAREST_MIPMAP_LINEAR;if(e===it.NEAREST&&t===Ze.BILINEAR)return m.LINEAR_MIPMAP_NEAREST;if(e===it.NEAREST&&t===Ze.POINT)return m.NEAREST_MIPMAP_NEAREST;if(e===it.NO_MIP&&t===Ze.BILINEAR)return m.LINEAR;if(e===it.NO_MIP&&t===Ze.POINT)return m.NEAREST;throw new Error("Unknown texture filter mode")}function da(t,e){e===void 0&&(e=0);var i=t;return i.gl_buffer_pages[e/i.pageByteSize|0]}function Xs(t){var e=t;return e.gl_texture}function Dd(t){var e=t;return e.gl_sampler}function Pa(t,e){t.name=e,t.__SPECTOR_Metadata={name:e}}function Zf(t,e){for(var i=[];;){var r=e.exec(t);if(!r)break;i.push(r)}return i}function yr(t){return t.blendMode==$e.ADD&&t.blendSrcFactor==Z.ONE&&t.blendDstFactor===Z.ZERO}function am(t){switch(t){case Mu.OcclusionConservative:return m.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function lm(t){if(t===re.TEXTURE_2D)return m.TEXTURE_2D;if(t===re.TEXTURE_2D_ARRAY)return m.TEXTURE_2D_ARRAY;if(t===re.TEXTURE_CUBE_MAP)return m.TEXTURE_CUBE_MAP;if(t===re.TEXTURE_3D)return m.TEXTURE_3D;throw new Error("whoops")}function ud(t,e,i,r){return!(t%i!==0||e%r!==0)}var cm=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.Buffer;var a=s.viewOrSize,l=s.usage,c=s.hint,h=c===void 0?Q.STATIC:c,u=n.uniformBufferMaxPageByteSize,d=n.gl,f=l&U.UNIFORM;f||(D(d)?d.bindVertexArray(null):n.OES_vertex_array_object.bindVertexArrayOES(null));var E=aa(a)?Bu(a,4):Bu(a.byteLength,4);o.gl_buffer_pages=[];var g;if(f){for(var p=E;p>0;)o.gl_buffer_pages.push(o.createBufferPage(Math.min(p,u),l,h)),p-=u;g=u}else o.gl_buffer_pages.push(o.createBufferPage(E,l,h)),g=E;return o.pageByteSize=g,o.byteSize=E,o.usage=l,o.gl_target=Kf(l),aa(a)||o.setSubData(0,new Uint8Array(a.buffer)),f||(D(d)?d.bindVertexArray(o.device.currentBoundVAO):n.OES_vertex_array_object.bindVertexArrayOES(o.device.currentBoundVAO)),o}return e.prototype.setSubData=function(i,r,n,s){n===void 0&&(n=0),s===void 0&&(s=r.byteLength-n);for(var o=this.device.gl,a=this.pageByteSize,l=i+s,c=i,h=i%a;c<l;){var u=D(o)?o.COPY_WRITE_BUFFER:this.gl_target,d=da(this,c);if(d.ubo)return;o.bindBuffer(u,d),D(o)?o.bufferSubData(u,h,r,n,Math.min(l-c,a)):o.bufferSubData(u,h,r),c+=a,h=0,n+=a,this.device.debugGroupStatisticsBufferUpload()}},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var i=0;i<this.gl_buffer_pages.length;i++)this.gl_buffer_pages[i].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[i]);this.gl_buffer_pages=[]},e.prototype.createBufferPage=function(i,r,n){var s=this.device.gl,o=r&U.UNIFORM;if(!D(s)&&o)return{ubo:!0};var a=this.device.ensureResourceExists(s.createBuffer()),l=Kf(r),c=tm(n);return s.bindBuffer(l,a),s.bufferData(l,i,c),a},e}(si),hm=function(t){De(e,t);function e(i){var r,n,s,o,a=i.id,l=i.device,c=i.descriptor,h,u=t.call(this,{id:a,device:l})||this;u.type=pe.InputLayout;var d=c.vertexBufferDescriptors,f=c.indexBufferFormat,E=c.program;j(f===v.U16_R||f===v.U32_R||f===null);var g=f!==null?om(f):null,p=f!==null?P_(f):null,y=u.device.gl,T=u.device.ensureResourceExists(D(y)?y.createVertexArray():l.OES_vertex_array_object.createVertexArrayOES());D(y)?y.bindVertexArray(T):l.OES_vertex_array_object.bindVertexArrayOES(T),y.bindBuffer(y.ARRAY_BUFFER,da(u.device.fallbackVertexBuffer));try{for(var w=ys(c.vertexBufferDescriptors),_=w.next();!_.done;_=w.next()){var b=_.value,S=b.stepMode,P=b.attributes;try{for(var O=(s=void 0,ys(P)),Y=O.next();!Y.done;Y=O.next()){var ce=Y.value,H=ce.shaderLocation,ee=ce.format,Pe=ce.divisor,Xt=Pe===void 0?1:Pe,_t=D(y)?H:(h=E.attributes[H])===null||h===void 0?void 0:h.location,nr=sm(ee);if(ce.vertexFormat=nr,!Zr(_t)){x_(ee);var QE=nr.size,JE=nr.type,ev=nr.normalized;y.vertexAttribPointer(_t,QE,JE,ev,0,0),S===Se.INSTANCE&&(D(y)?y.vertexAttribDivisor(_t,Xt):l.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(_t,Xt)),y.enableVertexAttribArray(_t)}}}catch(ld){s={error:ld}}finally{try{Y&&!Y.done&&(o=O.return)&&o.call(O)}finally{if(s)throw s.error}}}}catch(ld){r={error:ld}}finally{try{_&&!_.done&&(n=w.return)&&n.call(w)}finally{if(r)throw r.error}}return D(y)?y.bindVertexArray(null):l.OES_vertex_array_object.bindVertexArrayOES(null),u.vertexBufferDescriptors=d,u.vao=T,u.indexBufferFormat=f,u.indexBufferType=g,u.indexBufferCompByteSize=p,u.program=E,u}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(D(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},e}(si),Ud=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=i.fake,a=t.call(this,{id:r,device:n})||this;a.type=pe.Texture,s=Ie({dimension:re.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},s);var l=a.device.gl,c,h,u=a.clampmipLevelCount(s);if(a.immutable=s.usage===Ae.RENDER_TARGET,a.pixelStore=s.pixelStore,a.format=s.format,a.dimension=s.dimension,a.formatKind=C_(s.format),a.width=s.width,a.height=s.height,a.depthOrArrayLayers=s.depthOrArrayLayers,a.mipmaps=u>=1,!o){h=a.device.ensureResourceExists(l.createTexture());var d=a.device.translateTextureType(s.format),f=a.device.translateTextureInternalFormat(s.format);if(a.device.setActiveTexture(l.TEXTURE0),a.device.currentTextures[0]=null,a.preprocessImage(),s.dimension===re.TEXTURE_2D){if(c=m.TEXTURE_2D,l.bindTexture(c,h),a.immutable)if(D(l))l.texStorage2D(c,u,f,s.width,s.height);else{var E=(f===m.DEPTH_COMPONENT||a.isNPOT(),0);(a.format===v.D32F||a.format===v.D24_S8)&&!D(l)&&!n.WEBGL_depth_texture||(l.texImage2D(c,E,f,s.width,s.height,0,f,d,null),a.mipmaps&&(a.mipmaps=!1,l.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),l.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),l.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE)))}j(s.depthOrArrayLayers===1)}else if(s.dimension===re.TEXTURE_2D_ARRAY)c=m.TEXTURE_2D_ARRAY,l.bindTexture(c,h),a.immutable&&D(l)&&l.texStorage3D(c,u,f,s.width,s.height,s.depthOrArrayLayers);else if(s.dimension===re.TEXTURE_3D)c=m.TEXTURE_3D,l.bindTexture(c,h),a.immutable&&D(l)&&l.texStorage3D(c,u,f,s.width,s.height,s.depthOrArrayLayers);else if(s.dimension===re.TEXTURE_CUBE_MAP)c=m.TEXTURE_CUBE_MAP,l.bindTexture(c,h),a.immutable&&D(l)&&l.texStorage2D(c,u,f,s.width,s.height),j(s.depthOrArrayLayers===6);else throw new Error("whoops")}return a.gl_texture=h,a.gl_target=c,a.mipLevelCount=u,a}return e.prototype.setImageData=function(i,r){r===void 0&&(r=0);var n=this.device.gl;O_(this.format);var s=this.gl_target===m.TEXTURE_3D||this.gl_target===m.TEXTURE_2D_ARRAY,o=this.gl_target===m.TEXTURE_CUBE_MAP,a=qv(i[0]);this.device.setActiveTexture(n.TEXTURE0),this.device.currentTextures[0]=null;var l=i[0],c,h;a?(c=this.width,h=this.height):(c=l.width,h=l.height,this.width=c,this.height=h),n.bindTexture(this.gl_target,this.gl_texture);var u=this.device.translateTextureFormat(this.format),d=D(n)?this.device.translateInternalTextureFormat(this.format):u,f=this.device.translateTextureType(this.format);this.preprocessImage();for(var E=0;E<this.depthOrArrayLayers;E++){var g=i[E],p=this.gl_target;o&&(p=m.TEXTURE_CUBE_MAP_POSITIVE_X+E%6),this.immutable?n.texSubImage2D(p,r,0,0,c,h,u,f,g):D(n)?s?n.texImage3D(p,r,d,c,h,this.depthOrArrayLayers,0,u,f,g):n.texImage2D(p,r,d,c,h,0,u,f,g):a?n.texImage2D(p,r,u,c,h,0,u,f,g):n.texImage2D(p,r,u,u,f,g)}this.mipmaps&&this.generateMipmap(s)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.gl.deleteTexture(Xs(this))},e.prototype.clampmipLevelCount=function(i){if(i.dimension===re.TEXTURE_2D_ARRAY&&i.depthOrArrayLayers>1){var r=rr(i.format);if(r===C.BC1)for(var n=i.width,s=i.height,o=0;o<i.mipLevelCount;o++){if(n<=2||s<=2)return o-1;n=Math.max(n/2|0,1),s=Math.max(s/2|0,1)}}return i.mipLevelCount},e.prototype.preprocessImage=function(){var i=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&i.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&i.pixelStorei(m.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&i.pixelStorei(m.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},e.prototype.generateMipmap=function(i){i===void 0&&(i=!1);var r=this.device.gl;return!D(r)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(r.bindTexture(this.gl_target,this.gl_texture),i?(r.texParameteri(this.gl_target,m.TEXTURE_BASE_LEVEL,0),r.texParameteri(this.gl_target,m.TEXTURE_MAX_LEVEL,Math.log2(this.width)),r.texParameteri(this.gl_target,m.TEXTURE_MIN_FILTER,m.LINEAR_MIPMAP_LINEAR),r.texParameteri(this.gl_target,m.TEXTURE_MAG_FILTER,m.LINEAR)):r.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST_MIPMAP_LINEAR),r.generateMipmap(this.gl_target),r.bindTexture(this.gl_target,null)),this)},e.prototype.isNPOT=function(){var i=this.device.gl;return D(i)?!1:!Nu(this.width)||!Nu(this.height)},e}(si),um=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.RenderTarget,o.gl_renderbuffer=null,o.texture=null;var a=o.device.gl,l=s.format,c=s.width,h=s.height,u=s.sampleCount,d=u===void 0?1:u,f=s.texture,E=!1;if((l===v.D32F||l===v.D24_S8)&&f&&!D(a)&&!n.WEBGL_depth_texture&&(f.destroy(),o.texture=null,E=!0),!E&&f)o.texture=f;else{o.gl_renderbuffer=o.device.ensureResourceExists(a.createRenderbuffer()),a.bindRenderbuffer(a.RENDERBUFFER,o.gl_renderbuffer);var g=o.device.translateTextureInternalFormat(l,!0);D(a)&&d>1?a.renderbufferStorageMultisample(m.RENDERBUFFER,d,g,c,h):a.renderbufferStorage(m.RENDERBUFFER,g,c,h)}return o.format=l,o.width=c,o.height=h,o.sampleCount=d,o}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},e}(si),Wt;(function(t){t[t.NeedsCompile=0]="NeedsCompile",t[t.Compiling=1]="Compiling",t[t.NeedsBind=2]="NeedsBind",t[t.ReadyToUse=3]="ReadyToUse"})(Wt||(Wt={}));var dm=function(t){De(e,t);function e(i,r){var n=i.id,s=i.device,o=i.descriptor,a=t.call(this,{id:n,device:s})||this;a.rawVertexGLSL=r,a.type=pe.Program,a.uniformSetters={},a.attributes=[];var l=a.device.gl;return a.descriptor=o,a.gl_program=a.device.ensureResourceExists(l.createProgram()),a.gl_shader_vert=null,a.gl_shader_frag=null,a.compileState=Wt.NeedsCompile,a.tryCompileProgram(),a}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},e.prototype.tryCompileProgram=function(){j(this.compileState===Wt.NeedsCompile);var i=this.descriptor,r=i.vertex,n=i.fragment,s=this.device.gl;r!=null&&r.glsl&&(n!=null&&n.glsl)&&(this.gl_shader_vert=this.compileShader(r.postprocess?r.postprocess(r.glsl):r.glsl,s.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(n.postprocess?n.postprocess(n.glsl):n.glsl,s.FRAGMENT_SHADER),s.attachShader(this.gl_program,this.gl_shader_vert),s.attachShader(this.gl_program,this.gl_shader_frag),s.linkProgram(this.gl_program),this.compileState=Wt.Compiling,D(s)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},e.prototype.readAttributesFromLinkedProgram=function(){for(var i,r=this.device.gl,n=r.getProgramParameter(this.gl_program,r.ACTIVE_ATTRIBUTES),s=Qv(this.descriptor.vertex.glsl),o=Jv(this.rawVertexGLSL,s),a=function(h){var u=r.getActiveAttrib(l.gl_program,h),d=u.name,f=u.type,E=u.size,g=r.getAttribLocation(l.gl_program,d),p=(i=o.find(function(y){return y.name===d}))===null||i===void 0?void 0:i.location;g>=0&&!Zr(p)&&(l.attributes[p]={name:d,location:g,type:f,size:E})},l=this,c=0;c<n;c++)a(c)},e.prototype.readUniformLocationsFromLinkedProgram=function(){for(var i=this.device.gl,r=i.getProgramParameter(this.gl_program,i.ACTIVE_UNIFORMS),n=0;n<r;n++){var s=i.getActiveUniform(this.gl_program,n),o=Yv(s.name).name,a=i.getUniformLocation(this.gl_program,o);if(this.uniformSetters[o]=zf(i,a,s),s&&s.size>1)for(var l=0;l<s.size;l++)a=i.getUniformLocation(this.gl_program,"".concat(o,"[").concat(l,"]")),this.uniformSetters["".concat(o,"[").concat(l,"]")]=zf(i,a,s)}},e.prototype.compileShader=function(i,r){var n=this.device.gl,s=this.device.ensureResourceExists(n.createShader(r));return n.shaderSource(s,i),n.compileShader(s),s},e.prototype.setUniformsLegacy=function(i){i===void 0&&(i={});var r=this.device.gl;if(!D(r)){var n=!1;for(var s in i){n||(r.useProgram(this.gl_program),n=!0);var o=i[s],a=this.uniformSetters[s];if(a){var l=o;l instanceof Ud&&(l=l.textureIndex),a(l)}}}return this},e}(si),fm=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.QueryPool;var a=o.device.gl;if(D(a)){var l=s.elemCount,c=s.type;o.gl_query=$v(l,function(){return o.device.ensureResourceExists(a.createQuery())}),o.gl_query_type=am(c)}return o}return e.prototype.queryResultOcclusion=function(i){var r=this.device.gl;if(D(r)){var n=this.gl_query[i];return r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE)?!!r.getQueryParameter(n,r.QUERY_RESULT):null}return null},e.prototype.destroy=function(){t.prototype.destroy.call(this);var i=this.device.gl;if(D(i))for(var r=0;r<this.gl_query.length;r++)i.deleteQuery(this.gl_query[r])},e}(si),pm=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=t.call(this,{id:r,device:n})||this;return s.type=pe.Readback,s.gl_pbo=null,s.gl_sync=null,s}return e.prototype.clientWaitAsync=function(i,r,n){r===void 0&&(r=0),n===void 0&&(n=10);var s=this.device.gl;return new Promise(function(o,a){function l(){var c=s.clientWaitSync(i,r,0);if(c==s.WAIT_FAILED){a();return}if(c==s.TIMEOUT_EXPIRED){setTimeout(l,Mv(n,0,s.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}o()}l()})},e.prototype.getBufferSubDataAsync=function(i,r,n,s,o,a){return ha(this,void 0,void 0,function(){var l;return ua(this,function(c){switch(c.label){case 0:return l=this.device.gl,D(l)?(this.gl_sync=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0),l.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return c.sent(),l.bindBuffer(i,r),l.getBufferSubData(i,n,s,o,a),l.bindBuffer(i,null),[2,s];case 2:return[2]}})})},e.prototype.readTexture=function(i,r,n,s,o,a,l,c){return l===void 0&&(l=0),c===void 0&&(c=a.byteLength||0),ha(this,void 0,void 0,function(){var h,u,d,f,E;return ua(this,function(g){return h=this.device.gl,u=i,d=this.device.translateTextureFormat(u.format),f=this.device.translateTextureType(u.format),E=xv(u.format),D(h)?(this.gl_pbo=this.device.ensureResourceExists(h.createBuffer()),h.bindBuffer(h.PIXEL_PACK_BUFFER,this.gl_pbo),h.bufferData(h.PIXEL_PACK_BUFFER,c,h.STREAM_READ),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.bindFramebuffer(m.READ_FRAMEBUFFER,this.device.readbackFramebuffer),h.framebufferTexture2D(m.READ_FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u.gl_texture,0),h.bindBuffer(h.PIXEL_PACK_BUFFER,this.gl_pbo),h.readPixels(r,n,s,o,d,f,l*E),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(h.PIXEL_PACK_BUFFER,this.gl_pbo,0,a,l,0)]):[2,this.readTextureSync(i,r,n,s,o,a,l,c)]})})},e.prototype.readTextureSync=function(i,r,n,s,o,a,l,c){c===void 0&&(c=a.byteLength||0);var h=this.device.gl,u=i,d=this.device.translateTextureType(u.format);return h.bindFramebuffer(m.FRAMEBUFFER,this.device.readbackFramebuffer),h.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u.gl_texture,0),h.pixelStorei(h.PACK_ALIGNMENT,4),h.readPixels(r,n,s,o,h.RGBA,d,a),a},e.prototype.readBuffer=function(i,r,n,s,o){return ha(this,void 0,void 0,function(){var a;return ua(this,function(l){return a=this.device.gl,D(a)?[2,this.getBufferSubDataAsync(a.ARRAY_BUFFER,da(i,r),r,n,s,o)]:[2,Promise.reject()]})})},e.prototype.destroy=function(){t.prototype.destroy.call(this),D(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},e}(si),_m=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o,a,l=t.call(this,{id:r,device:n})||this;return l.type=pe.RenderPipeline,l.drawMode=im((o=s.topology)!==null&&o!==void 0?o:qe.TRIANGLES),l.program=s.program,l.inputLayout=s.inputLayout,l.megaState=Ie(Ie({},jc(_a)),s.megaStateDescriptor),l.colorAttachmentFormats=s.colorAttachmentFormats.slice(),l.depthStencilAttachmentFormat=s.depthStencilAttachmentFormat,l.sampleCount=(a=s.sampleCount)!==null&&a!==void 0?a:1,l}return e}(si),Em=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;return o.type=pe.ComputePipeline,o.descriptor=s,o}return e}(si),vm=function(){function t(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return t.prototype.trackResourceCreated=function(e){this.creationStacks.set(e,new Error().stack),this.liveObjects.add(e)},t.prototype.trackResourceDestroyed=function(e){this.deletionStacks.has(e)&&console.warn("Object double freed:",e,`

Creation stack: `,this.creationStacks.get(e),`

Deletion stack: `,this.deletionStacks.get(e),`

This stack: `,new Error().stack),this.deletionStacks.set(e,new Error().stack),this.liveObjects.delete(e)},t.prototype.checkForLeaks=function(){var e,i;try{for(var r=ys(this.liveObjects.values()),n=r.next();!n.done;n=r.next()){var s=n.value;console.warn("Object leaked:",s,"Creation stack:",this.creationStacks.get(s))}}catch(o){e={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}},t.prototype.setResourceLeakCheck=function(e,i){i?this.liveObjects.add(e):this.liveObjects.delete(e)},t}(),mm=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o,a,l=t.call(this,{id:r,device:n})||this;l.type=pe.Sampler;var c=l.device.gl;if(D(c)){var h=l.device.ensureResourceExists(c.createSampler());c.samplerParameteri(h,m.TEXTURE_WRAP_S,Sa(s.addressModeU)),c.samplerParameteri(h,m.TEXTURE_WRAP_T,Sa(s.addressModeV)),c.samplerParameteri(h,m.TEXTURE_WRAP_R,Sa((o=s.addressModeW)!==null&&o!==void 0?o:s.addressModeU)),c.samplerParameteri(h,m.TEXTURE_MIN_FILTER,_h(s.minFilter,s.mipmapFilter)),c.samplerParameteri(h,m.TEXTURE_MAG_FILTER,_h(s.magFilter,it.NO_MIP)),s.lodMinClamp!==void 0&&c.samplerParameterf(h,m.TEXTURE_MIN_LOD,s.lodMinClamp),s.lodMaxClamp!==void 0&&c.samplerParameterf(h,m.TEXTURE_MAX_LOD,s.lodMaxClamp),s.compareFunction!==void 0&&(c.samplerParameteri(h,c.TEXTURE_COMPARE_MODE,c.COMPARE_REF_TO_TEXTURE),c.samplerParameteri(h,c.TEXTURE_COMPARE_FUNC,s.compareFunction));var u=(a=s.maxAnisotropy)!==null&&a!==void 0?a:1;u>1&&l.device.EXT_texture_filter_anisotropic!==null&&(j(s.minFilter===Ze.BILINEAR&&s.magFilter===Ze.BILINEAR&&s.mipmapFilter===it.LINEAR),c.samplerParameterf(h,l.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u)),l.gl_sampler=h}else l.descriptor=s;return l}return e.prototype.setTextureParameters=function(i,r,n){var s,o=this.device.gl,a=this.descriptor;this.isNPOT(r,n)?o.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR):o.texParameteri(i,m.TEXTURE_MIN_FILTER,_h(a.minFilter,a.mipmapFilter)),o.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,Sa(a.addressModeU)),o.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,Sa(a.addressModeV)),o.texParameteri(i,m.TEXTURE_MAG_FILTER,_h(a.magFilter,it.NO_MIP));var l=(s=a.maxAnisotropy)!==null&&s!==void 0?s:1;l>1&&this.device.EXT_texture_filter_anisotropic!==null&&(j(a.minFilter===Ze.BILINEAR&&a.magFilter===Ze.BILINEAR&&a.mipmapFilter===it.LINEAR),o.texParameteri(i,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l))},e.prototype.destroy=function(){t.prototype.destroy.call(this),D(this.device.gl)&&this.device.gl.deleteSampler(Dd(this))},e.prototype.isNPOT=function(i,r){return!Nu(i)||!Nu(r)},e}(si),gm=function(){function t(){}return t.prototype.dispatchWorkgroups=function(e,i,r){},t.prototype.dispatchWorkgroupsIndirect=function(e,i){},t.prototype.setPipeline=function(e){},t.prototype.setBindings=function(e){},t.prototype.pushDebugGroup=function(e){},t.prototype.popDebugGroup=function(){},t.prototype.insertDebugMarker=function(e){},t}(),Tm=function(t){De(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.type=pe.RenderBundle,i.commands=[],i}return e.prototype.push=function(i){this.commands.push(i)},e.prototype.replay=function(){this.commands.forEach(function(i){return i()})},e}(si),qf=65536,ym=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,Rm=function(){function t(e,i){i===void 0&&(i={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=jc(_a),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=zc.LOWER_LEFT,this.clipSpaceNearZ=er.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=e,this.contextAttributes=ps(e.getContextAttributes()),D(e)?(this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=e.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=e.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=e.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=e.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=e.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=e.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=e.getExtension("EXT_color_buffer_half_float"),e.getExtension("EXT_frag_depth"),e.getExtension("OES_element_index_uint"),e.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=e.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=e.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=e.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=e.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=e.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=e.getExtension("KHR_parallel_shader_compile"),D(e)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new Ud({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:re.TEXTURE_2D,mipLevelCount:1,usage:Ae.RENDER_TARGET,format:this.contextAttributes.alpha===!1?v.U8_RGB_RT:v.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Fe.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(re.TEXTURE_2D,Fe.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(re.TEXTURE_2D,Fe.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:U.VERTEX,hint:Q.STATIC}),D(e)&&(this.fallbackTexture2DArray=this.createFallbackTexture(re.TEXTURE_2D_ARRAY,Fe.Float),this.fallbackTexture3D=this.createFallbackTexture(re.TEXTURE_3D,Fe.Float),this.fallbackTextureCube=this.createFallbackTexture(re.TEXTURE_CUBE_MAP,Fe.Float)),this.currentMegaState.depthCompare=pt.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Le.ALL,e.enable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),this.checkLimits(),i.shaderDebug&&(this.shaderDebug=!0),i.trackResources&&(this.resourceCreationTracker=new vm)}return t.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},t.prototype.createFallbackTexture=function(e,i){var r=e===re.TEXTURE_CUBE_MAP?6:1,n=i===Fe.Depth?v.D32F:v.U8_RGBA_NORM,s=this.createTexture({dimension:e,format:n,usage:Ae.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1});return i===Fe.Float&&s.setImageData([new Uint8Array(4*r)]),Xs(s)},t.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},t.prototype.checkLimits=function(){var e=this.gl;if(this.maxVertexAttribs=e.getParameter(m.MAX_VERTEX_ATTRIBS),D(e)){this.uniformBufferMaxPageByteSize=Math.min(e.getParameter(m.MAX_UNIFORM_BLOCK_SIZE),qf),this.uniformBufferWordAlignment=e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var i=e.getInternalformatParameter(e.RENDERBUFFER,e.DEPTH32F_STENCIL8,e.SAMPLES);this.supportedSampleCounts=i?Aa([],bi(i),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=qf;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(r,n){return r-n})},t.prototype.configureSwapChain=function(e,i,r){var n=this.scTexture;n.width=e,n.height=i,this.scPlatformFramebuffer=kv(r)},t.prototype.getDevice=function(){return this},t.prototype.getCanvas=function(){return this.gl.canvas},t.prototype.getOnscreenTexture=function(){return this.scTexture},t.prototype.beginFrame=function(){},t.prototype.endFrame=function(){},t.prototype.translateTextureInternalFormat=function(e,i){switch(i===void 0&&(i=!1),e){case v.ALPHA:return m.ALPHA;case v.U8_LUMINANCE:case v.F16_LUMINANCE:case v.F32_LUMINANCE:return m.LUMINANCE;case v.F16_R:return m.R16F;case v.F16_RG:return m.RG16F;case v.F16_RGB:return m.RGB16F;case v.F16_RGBA:return m.RGBA16F;case v.F32_R:return m.R32F;case v.F32_RG:return m.RG32F;case v.F32_RGB:return m.RGB32F;case v.F32_RGBA:return D(this.gl)?m.RGBA32F:i?this.WEBGL_color_buffer_float.RGBA32F_EXT:m.RGBA;case v.U8_R_NORM:return m.R8;case v.U8_RG_NORM:return m.RG8;case v.U8_RGB_NORM:case v.U8_RGB_RT:return m.RGB8;case v.U8_RGB_SRGB:return m.SRGB8;case v.U8_RGBA_NORM:case v.U8_RGBA_RT:return D(this.gl)?m.RGBA8:i?m.RGBA4:m.RGBA;case v.U8_RGBA:return m.RGBA;case v.U8_RGBA_SRGB:case v.U8_RGBA_RT_SRGB:return m.SRGB8_ALPHA8;case v.U16_R:return m.R16UI;case v.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case v.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case v.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case v.U16_RGBA_5551:return m.RGB5_A1;case v.U16_RGB_565:return m.RGB565;case v.U32_R:return m.R32UI;case v.S8_RGBA_NORM:return m.RGBA8_SNORM;case v.S8_RG_NORM:return m.RG8_SNORM;case v.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case v.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case v.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case v.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case v.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case v.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case v.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case v.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case v.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case v.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case v.D32F_S8:return D(this.gl)?m.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?m.DEPTH_STENCIL:m.DEPTH_COMPONENT16;case v.D24_S8:return D(this.gl)?m.DEPTH24_STENCIL8:this.WEBGL_depth_texture?m.DEPTH_STENCIL:m.DEPTH_COMPONENT16;case v.D32F:return D(this.gl)?m.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?m.DEPTH_COMPONENT:m.DEPTH_COMPONENT16;case v.D24:return D(this.gl)?m.DEPTH_COMPONENT24:this.WEBGL_depth_texture?m.DEPTH_COMPONENT:m.DEPTH_COMPONENT16;default:throw new Error("whoops")}},t.prototype.translateTextureType=function(e){var i=rr(e);switch(i){case C.U8:return m.UNSIGNED_BYTE;case C.U16:return m.UNSIGNED_SHORT;case C.U32:return m.UNSIGNED_INT;case C.S8:return m.BYTE;case C.F16:return m.HALF_FLOAT;case C.F32:return m.FLOAT;case C.U16_PACKED_5551:return m.UNSIGNED_SHORT_5_5_5_1;case C.D32F:return D(this.gl)?m.FLOAT:this.WEBGL_depth_texture?m.UNSIGNED_INT:m.UNSIGNED_BYTE;case C.D24:return D(this.gl)?m.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?m.UNSIGNED_SHORT:m.UNSIGNED_BYTE;case C.D24S8:return D(this.gl)?m.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?m.UNSIGNED_INT_24_8_WEBGL:m.UNSIGNED_BYTE;case C.D32FS8:return m.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},t.prototype.translateInternalTextureFormat=function(e){switch(e){case v.F32_R:return m.R32F;case v.F32_RG:return m.RG32F;case v.F32_RGB:return m.RGB32F;case v.F32_RGBA:return m.RGBA32F;case v.F16_R:return m.R16F;case v.F16_RG:return m.RG16F;case v.F16_RGB:return m.RGB16F;case v.F16_RGBA:return m.RGBA16F}return this.translateTextureFormat(e)},t.prototype.translateTextureFormat=function(e){if(O_(e)||e===v.F32_LUMINANCE||e===v.U8_LUMINANCE)return this.translateTextureInternalFormat(e);var i=D(this.gl)||!D(this.gl)&&!!this.WEBGL_depth_texture;switch(e){case v.D24_S8:case v.D32F_S8:return i?m.DEPTH_STENCIL:m.RGBA;case v.D24:case v.D32F:return i?m.DEPTH_COMPONENT:m.RGBA}var r=x_(e),n=pf(e);switch(n){case x.A:return m.ALPHA;case x.R:return r?m.RED_INTEGER:m.RED;case x.RG:return r?m.RG_INTEGER:m.RG;case x.RGB:return r?m.RGB_INTEGER:m.RGB;case x.RGBA:return m.RGBA}},t.prototype.setActiveTexture=function(e){this.currentActiveTexture!==e&&(this.gl.activeTexture(e),this.currentActiveTexture=e)},t.prototype.bindVAO=function(e){this.currentBoundVAO!==e&&(D(this.gl)?this.gl.bindVertexArray(e):this.OES_vertex_array_object.bindVertexArrayOES(e),this.currentBoundVAO=e)},t.prototype.programCompiled=function(e){j(e.compileState!==Wt.NeedsCompile),e.compileState===Wt.Compiling&&(e.compileState=Wt.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(e))},t.prototype.useProgram=function(e){this.currentProgram!==e&&(this.programCompiled(e),this.gl.useProgram(e.gl_program),this.currentProgram=e)},t.prototype.ensureResourceExists=function(e){if(e===null){var i=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(i))}else return e},t.prototype.createBuffer=function(e){return new cm({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createTexture=function(e){return new Ud({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createSampler=function(e){return new mm({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderTarget=function(e){return new um({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderTargetFromTexture=function(e){var i=e,r=i.format,n=i.width,s=i.height,o=i.mipLevelCount;return j(o===1),this.createRenderTarget({format:r,width:n,height:s,sampleCount:1,texture:e})},t.prototype.createProgram=function(e){var i,r,n,s=(i=e.vertex)===null||i===void 0?void 0:i.glsl;return!((r=e.vertex)===null||r===void 0)&&r.glsl&&(e.vertex.glsl=Fu(this.queryVendorInfo(),"vert",e.vertex.glsl)),!((n=e.fragment)===null||n===void 0)&&n.glsl&&(e.fragment.glsl=Fu(this.queryVendorInfo(),"frag",e.fragment.glsl)),this.createProgramSimple(e,s)},t.prototype.createProgramSimple=function(e,i){var r=new dm({id:this.getNextUniqueId(),device:this,descriptor:e},i);return r},t.prototype.createBindings=function(e){return new em({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createInputLayout=function(e){return new hm({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderPipeline=function(e){return new _m({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createComputePass=function(){return new gm},t.prototype.createComputePipeline=function(e){return new Em({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createReadback=function(){return new pm({id:this.getNextUniqueId(),device:this})},t.prototype.createQueryPool=function(e,i){return new fm({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:i}})},t.prototype.formatRenderPassDescriptor=function(e){var i,r,n,s,o,a,l=e.colorAttachment;e.depthClearValue=(i=e.depthClearValue)!==null&&i!==void 0?i:"load",e.stencilClearValue=(r=e.stencilClearValue)!==null&&r!==void 0?r:"load";for(var c=0;c<l.length;c++)e.colorAttachmentLevel||(e.colorAttachmentLevel=[]),e.colorAttachmentLevel[c]=(n=e.colorAttachmentLevel[c])!==null&&n!==void 0?n:0,e.colorResolveToLevel||(e.colorResolveToLevel=[]),e.colorResolveToLevel[c]=(s=e.colorResolveToLevel[c])!==null&&s!==void 0?s:0,e.colorClearColor||(e.colorClearColor=[]),e.colorClearColor[c]=(o=e.colorClearColor[c])!==null&&o!==void 0?o:"load",e.colorStore||(e.colorStore=[]),e.colorStore[c]=(a=e.colorStore[c])!==null&&a!==void 0?a:!1},t.prototype.createRenderBundle=function(){return new Tm({id:this.getNextUniqueId(),device:this})},t.prototype.beginBundle=function(e){this.renderBundle=e},t.prototype.endBundle=function(){this.renderBundle=void 0},t.prototype.executeBundles=function(e){e.forEach(function(i){i.replay()})},t.prototype.createRenderPass=function(e){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=e,this.formatRenderPassDescriptor(e);var i=e.colorAttachment,r=e.colorAttachmentLevel,n=e.colorClearColor,s=e.colorResolveTo,o=e.colorResolveToLevel,a=e.depthStencilAttachment,l=e.depthClearValue,c=e.stencilClearValue,h=e.depthStencilResolveTo;this.setRenderPassParametersBegin(i.length);for(var u=0;u<i.length;u++)this.setRenderPassParametersColor(u,i[u],r[u],s[u],o[u]);this.setRenderPassParametersDepthStencil(a,h),this.validateCurrentAttachments();for(var u=0;u<i.length;u++){var d=n[u];d!=="load"&&this.setRenderPassParametersClearColor(u,d.r,d.g,d.b,d.a)}return this.setRenderPassParametersClearDepthStencil(l,c),this},t.prototype.submitPass=function(e){j(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},t.prototype.copySubTexture2D=function(e,i,r,n,s,o){var a=this.gl,l=e,c=n;if(j(c.mipLevelCount===1),j(l.mipLevelCount===1),D(a))l===this.scTexture?a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,l,0)),a.bindFramebuffer(a.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,c,0),a.blitFramebuffer(s,o,s+c.width,o+c.height,i,r,i+c.width,r+c.height,a.COLOR_BUFFER_BIT,a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null);else if(l===this.scTexture){var h=this.createRenderTargetFromTexture(n);this.submitBlitRenderPass(h,l)}},t.prototype.queryLimits=function(){return this},t.prototype.queryTextureFormatSupported=function(e,i,r){switch(e){case v.BC1_SRGB:case v.BC2_SRGB:case v.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?ud(i,r,4,4):!1;case v.BC1:case v.BC2:case v.BC3:return this.WEBGL_compressed_texture_s3tc!==null?ud(i,r,4,4):!1;case v.BC4_UNORM:case v.BC4_SNORM:case v.BC5_UNORM:case v.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?ud(i,r,4,4):!1;case v.U16_R_NORM:case v.U16_RG_NORM:case v.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case v.F32_R:case v.F32_RG:case v.F32_RGB:case v.F32_RGBA:return this.OES_texture_float_linear!==null;case v.F16_R:case v.F16_RG:case v.F16_RGB:case v.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},t.prototype.queryProgramReady=function(e){var i=this.gl;if(e.compileState===Wt.NeedsCompile)throw new Error("whoops");if(e.compileState===Wt.Compiling){var r=void 0;return this.KHR_parallel_shader_compile!==null?r=i.getProgramParameter(e.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):r=!0,r&&this.programCompiled(e),r}return e.compileState===Wt.NeedsBind||e.compileState===Wt.ReadyToUse},t.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},t.prototype.queryVendorInfo=function(){return this},t.prototype.queryRenderPass=function(e){return this.currentRenderPassDescriptor},t.prototype.queryRenderTarget=function(e){var i=e;return i},t.prototype.setResourceName=function(e,i){if(e.name=i,e.type===pe.Buffer)for(var r=e.gl_buffer_pages,n=0;n<r.length;n++)Pa(r[n],"".concat(i," Page ").concat(n));else if(e.type===pe.Texture)Pa(Xs(e),i);else if(e.type===pe.Sampler)Pa(Dd(e),i);else if(e.type===pe.RenderTarget){var s=e.gl_renderbuffer;s!==null&&Pa(s,i)}else e.type===pe.InputLayout&&Pa(e.vao,i)},t.prototype.setResourceLeakCheck=function(e,i){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(e,i)},t.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},t.prototype.pushDebugGroup=function(e){},t.prototype.popDebugGroup=function(){},t.prototype.insertDebugMarker=function(e){},t.prototype.programPatched=function(e,i){j(this.shaderDebug)},t.prototype.getBufferData=function(e,i,r){r===void 0&&(r=0);var n=this.gl;D(n)&&(n.bindBuffer(n.COPY_READ_BUFFER,da(e,r*4)),n.getBufferSubData(n.COPY_READ_BUFFER,r*4,i))},t.prototype.debugGroupStatisticsDrawCall=function(e){e===void 0&&(e=1);for(var i=this.debugGroupStack.length-1;i>=0;i--)this.debugGroupStack[i].drawCallCount+=e},t.prototype.debugGroupStatisticsBufferUpload=function(e){e===void 0&&(e=1);for(var i=this.debugGroupStack.length-1;i>=0;i--)this.debugGroupStack[i].bufferUploadCount+=e},t.prototype.debugGroupStatisticsTextureBind=function(e){e===void 0&&(e=1);for(var i=this.debugGroupStack.length-1;i>=0;i--)this.debugGroupStack[i].textureBindCount+=e},t.prototype.debugGroupStatisticsTriangles=function(e){for(var i=this.debugGroupStack.length-1;i>=0;i--)this.debugGroupStack[i].triangleCount+=e},t.prototype.reportShaderError=function(e,i){var r=this.gl,n=r.getShaderParameter(e,r.COMPILE_STATUS);if(!n){console.error(Wv(i));var s=r.getExtension("WEBGL_debug_shaders");s&&console.error(s.getTranslatedShaderSource(e)),console.error(r.getShaderInfoLog(e))}return n},t.prototype.checkProgramCompilationForErrors=function(e){var i=this.gl,r=e.gl_program;if(!i.getProgramParameter(r,i.LINK_STATUS)){var n=e.descriptor;if(!this.reportShaderError(e.gl_shader_vert,n.vertex.glsl)||!this.reportShaderError(e.gl_shader_frag,n.fragment.glsl))return;console.error(i.getProgramInfoLog(e.gl_program))}},t.prototype.bindFramebufferAttachment=function(e,i,r,n){var s=this.gl;if(Zr(r))s.framebufferRenderbuffer(e,i,s.RENDERBUFFER,null);else if(r.type===pe.RenderTarget)r.gl_renderbuffer!==null?s.framebufferRenderbuffer(e,i,s.RENDERBUFFER,r.gl_renderbuffer):r.texture!==null&&s.framebufferTexture2D(e,i,m.TEXTURE_2D,Xs(r.texture),n);else if(r.type===pe.Texture){var o=Xs(r);r.dimension===re.TEXTURE_2D?s.framebufferTexture2D(e,i,m.TEXTURE_2D,o,n):D(s)&&(r.dimension,re.TEXTURE_2D_ARRAY)}},t.prototype.bindFramebufferDepthStencilAttachment=function(e,i){var r=this.gl,n=Zr(i)?F.Depth|F.Stencil:pa(i.format),s=!!(n&F.Depth),o=!!(n&F.Stencil);if(s&&o){var a=D(this.gl)||!D(this.gl)&&!!this.WEBGL_depth_texture;a?this.bindFramebufferAttachment(e,r.DEPTH_STENCIL_ATTACHMENT,i,0):this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,i,0)}else s?(this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,i,0),this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,null,0)):o&&(this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,i,0),this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,null,0))},t.prototype.validateCurrentAttachments=function(){for(var e=-1,i=-1,r=-1,n=0;n<this.currentColorAttachments.length;n++){var s=this.currentColorAttachments[n];s!==null&&(e===-1?(e=s.sampleCount,i=s.width,r=s.height):(j(e===s.sampleCount),j(i===s.width),j(r===s.height)))}this.currentDepthStencilAttachment&&(e===-1?e=this.currentDepthStencilAttachment.sampleCount:(j(e===this.currentDepthStencilAttachment.sampleCount),j(i===this.currentDepthStencilAttachment.width),j(r===this.currentDepthStencilAttachment.height))),this.currentSampleCount=e},t.prototype.setRenderPassParametersBegin=function(e){var i=this.gl;if(D(i)?i.bindFramebuffer(m.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||i.bindFramebuffer(m.FRAMEBUFFER,this.renderPassDrawFramebuffer),D(i)?i.drawBuffers([m.COLOR_ATTACHMENT0,m.COLOR_ATTACHMENT1,m.COLOR_ATTACHMENT2,m.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([m.COLOR_ATTACHMENT0_WEBGL,m.COLOR_ATTACHMENT1_WEBGL,m.COLOR_ATTACHMENT2_WEBGL,m.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var r=e;r<this.currentColorAttachments.length;r++){var n=D(i)?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,s=D(i)?m.COLOR_ATTACHMENT0:m.COLOR_ATTACHMENT0_WEBGL;i.framebufferRenderbuffer(n,s+r,m.RENDERBUFFER,null),i.framebufferTexture2D(n,s+r,m.TEXTURE_2D,null,0)}this.currentColorAttachments.length=e},t.prototype.setRenderPassParametersColor=function(e,i,r,n,s){var o=this.gl,a=D(o);(this.currentColorAttachments[e]!==i||this.currentColorAttachmentLevels[e]!==r)&&(this.currentColorAttachments[e]=i,this.currentColorAttachmentLevels[e]=r,(a||!a&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(a?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,(a?m.COLOR_ATTACHMENT0:m.COLOR_ATTACHMENT0_WEBGL)+e,i,r),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[e]!==n||this.currentColorResolveToLevels[e]!==s)&&(this.currentColorResolveTos[e]=n,this.currentColorResolveToLevels[e]=s,n!==null&&(this.resolveColorAttachmentsChanged=!0))},t.prototype.setRenderPassParametersDepthStencil=function(e,i){var r=this.gl;this.currentDepthStencilAttachment!==e&&(this.currentDepthStencilAttachment=e,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(D(r)?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==i&&(this.currentDepthStencilResolveTo=i,i&&(this.resolveDepthStencilAttachmentsChanged=!0))},t.prototype.setRenderPassParametersClearColor=function(e,i,r,n,s){var o=this.gl;if(this.OES_draw_buffers_indexed!==null){var a=this.currentMegaState.attachmentsState[e];a&&a.channelWriteMask!==Le.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(e,!0,!0,!0,!0),a.channelWriteMask=Le.ALL)}else{var a=this.currentMegaState.attachmentsState[0];a&&a.channelWriteMask!==Le.ALL&&(o.colorMask(!0,!0,!0,!0),a.channelWriteMask=Le.ALL)}this.setScissorRectEnabled(!1),D(o)?o.clearBufferfv(o.COLOR,e,[i,r,n,s]):(o.clearColor(i,r,n,s),o.clear(o.COLOR_BUFFER_BIT))},t.prototype.setRenderPassParametersClearDepthStencil=function(e,i){e===void 0&&(e="load"),i===void 0&&(i="load");var r=this.gl;e!=="load"&&(j(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(r.depthMask(!0),this.currentMegaState.depthWrite=!0),D(r)?r.clearBufferfv(r.DEPTH,0,[e]):(r.clearDepth(e),r.clear(r.DEPTH_BUFFER_BIT))),i!=="load"&&(j(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(r.enable(r.STENCIL_TEST),r.stencilMask(255),this.currentMegaState.stencilWrite=!0),D(r)?r.clearBufferiv(r.STENCIL,0,[i]):(r.clearStencil(i),r.clear(r.STENCIL_BUFFER_BIT)))},t.prototype.setBindings=function(e){var i=this,r;if(this.renderBundle){this.renderBundle.push(function(){return i.setBindings(e)});return}var n=this.gl,s=e,o=s.uniformBufferBindings,a=s.samplerBindings,l=s.bindingLayouts;j(0<l.bindingLayoutTables.length);var c=l.bindingLayoutTables[0];j(o.length>=c.numUniformBuffers),j(a.length>=c.numSamplers);for(var h=0;h<o.length;h++){var u=o[h];if(u.size!==0){var d=c.firstUniformBuffer+h,f=u.buffer,E=u.offset||0,g=u.size||f.byteSize;if(f!==this.currentUniformBuffers[d]||E!==this.currentUniformBufferByteOffsets[d]||g!==this.currentUniformBufferByteSizes[d]){var p=E%f.pageByteSize,y=f.gl_buffer_pages[E/f.pageByteSize|0];j(p+g<=f.pageByteSize),D(n)&&n.bindBufferRange(n.UNIFORM_BUFFER,d,y,p,g),this.currentUniformBuffers[d]=f,this.currentUniformBufferByteOffsets[d]=E,this.currentUniformBufferByteSizes[d]=g}}}for(var h=0;h<c.numSamplers;h++){var u=a[h],T=c.firstSampler+h,w=u!==null&&u.sampler!==null?Dd(u.sampler):null,_=u!==null&&u.texture!==null?Xs(u.texture):null;if(this.currentSamplers[T]!==w&&(D(n)&&n.bindSampler(T,w),this.currentSamplers[T]=w),this.currentTextures[T]!==_){if(this.setActiveTexture(n.TEXTURE0+T),_!==null){var b=ps(u).texture,S=b.gl_target,P=b.width,O=b.height;u.texture.textureIndex=T,n.bindTexture(S,_),D(n)||(r=u.sampler)===null||r===void 0||r.setTextureParameters(S,P,O),this.debugGroupStatisticsTextureBind()}else{var Y=Ie(Ie({},u),F_),ce=Y.dimension,H=Y.formatKind,S=lm(ce);n.bindTexture(S,this.getFallbackTexture(Ie({gl_target:S,formatKind:H},Y)))}this.currentTextures[T]=_}}},t.prototype.setViewport=function(e,i,r,n){var s=this.gl;s.viewport(e,i,r,n)},t.prototype.setScissorRect=function(e,i,r,n){var s=this.gl;this.setScissorRectEnabled(!0),s.scissor(e,i,r,n)},t.prototype.applyAttachmentStateIndexed=function(e,i,r){var n=this.gl,s=this.OES_draw_buffers_indexed;i.channelWriteMask!==r.channelWriteMask&&(s.colorMaskiOES(e,!!(r.channelWriteMask&Le.RED),!!(r.channelWriteMask&Le.GREEN),!!(r.channelWriteMask&Le.BLUE),!!(r.channelWriteMask&Le.ALPHA)),i.channelWriteMask=r.channelWriteMask);var o=i.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||i.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,a=i.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||i.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||i.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||i.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(a||o)&&(yr(i.rgbBlendState)&&yr(i.alphaBlendState)?s.enableiOES(e,n.BLEND):yr(r.rgbBlendState)&&yr(r.alphaBlendState)&&s.disableiOES(e,n.BLEND)),o&&(s.blendEquationSeparateiOES(e,r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),i.rgbBlendState.blendMode=r.rgbBlendState.blendMode,i.alphaBlendState.blendMode=r.alphaBlendState.blendMode),a&&(s.blendFuncSeparateiOES(e,r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),i.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,i.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,i.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,i.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},t.prototype.applyAttachmentState=function(e,i){var r=this.gl;e.channelWriteMask!==i.channelWriteMask&&(r.colorMask(!!(i.channelWriteMask&Le.RED),!!(i.channelWriteMask&Le.GREEN),!!(i.channelWriteMask&Le.BLUE),!!(i.channelWriteMask&Le.ALPHA)),e.channelWriteMask=i.channelWriteMask);var n=e.rgbBlendState.blendMode!==i.rgbBlendState.blendMode||e.alphaBlendState.blendMode!==i.alphaBlendState.blendMode,s=e.rgbBlendState.blendSrcFactor!==i.rgbBlendState.blendSrcFactor||e.alphaBlendState.blendSrcFactor!==i.alphaBlendState.blendSrcFactor||e.rgbBlendState.blendDstFactor!==i.rgbBlendState.blendDstFactor||e.alphaBlendState.blendDstFactor!==i.alphaBlendState.blendDstFactor;(s||n)&&(yr(e.rgbBlendState)&&yr(e.alphaBlendState)?r.enable(r.BLEND):yr(i.rgbBlendState)&&yr(i.alphaBlendState)&&r.disable(r.BLEND)),n&&(r.blendEquationSeparate(i.rgbBlendState.blendMode,i.alphaBlendState.blendMode),e.rgbBlendState.blendMode=i.rgbBlendState.blendMode,e.alphaBlendState.blendMode=i.alphaBlendState.blendMode),s&&(r.blendFuncSeparate(i.rgbBlendState.blendSrcFactor,i.rgbBlendState.blendDstFactor,i.alphaBlendState.blendSrcFactor,i.alphaBlendState.blendDstFactor),e.rgbBlendState.blendSrcFactor=i.rgbBlendState.blendSrcFactor,e.alphaBlendState.blendSrcFactor=i.alphaBlendState.blendSrcFactor,e.rgbBlendState.blendDstFactor=i.rgbBlendState.blendDstFactor,e.alphaBlendState.blendDstFactor=i.alphaBlendState.blendDstFactor)},t.prototype.setMegaState=function(e){var i=this.gl,r=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var n=0;n<e.attachmentsState.length;n++)this.applyAttachmentStateIndexed(n,r.attachmentsState[0],e.attachmentsState[0]);else j(e.attachmentsState.length===1),this.applyAttachmentState(r.attachmentsState[0],e.attachmentsState[0]);if(Dv(r.blendConstant,e.blendConstant)||(i.blendColor(e.blendConstant.r,e.blendConstant.g,e.blendConstant.b,e.blendConstant.a),M_(r.blendConstant,e.blendConstant)),r.depthCompare!==e.depthCompare&&(i.depthFunc(e.depthCompare),r.depthCompare=e.depthCompare),!!r.depthWrite!=!!e.depthWrite&&(i.depthMask(e.depthWrite),r.depthWrite=e.depthWrite),!!r.stencilWrite!=!!e.stencilWrite&&(i.stencilMask(e.stencilWrite?255:0),r.stencilWrite=e.stencilWrite),!Hf(r.stencilFront,e.stencilFront)){var s=e.stencilFront,o=s.passOp,a=s.failOp,l=s.depthFailOp,c=s.compare;(r.stencilFront.passOp!==o||r.stencilFront.failOp!==a||r.stencilFront.depthFailOp!==l)&&(i.stencilOpSeparate(i.FRONT,a,l,o),r.stencilFront.passOp=o,r.stencilFront.failOp=a,r.stencilFront.depthFailOp=l),r.stencilFront.compare!==c&&(this.setStencilReference(0),r.stencilFront.compare=c)}if(!Hf(r.stencilBack,e.stencilBack)){var h=e.stencilBack,o=h.passOp,a=h.failOp,l=h.depthFailOp,c=h.compare;(r.stencilBack.passOp!==o||r.stencilBack.failOp!==a||r.stencilBack.depthFailOp!==l)&&(i.stencilOpSeparate(i.BACK,a,l,o),r.stencilBack.passOp=o,r.stencilBack.failOp=a,r.stencilBack.depthFailOp=l),r.stencilBack.compare!==c&&(this.setStencilReference(0),r.stencilBack.compare=c)}(r.stencilFront.mask!==e.stencilFront.mask||r.stencilBack.mask!==e.stencilBack.mask)&&(r.stencilFront.mask=e.stencilFront.mask,r.stencilBack.mask=e.stencilBack.mask,this.applyStencil()),r.cullMode!==e.cullMode&&(r.cullMode===Si.NONE?i.enable(i.CULL_FACE):e.cullMode===Si.NONE&&i.disable(i.CULL_FACE),e.cullMode===Si.BACK?i.cullFace(i.BACK):e.cullMode===Si.FRONT?i.cullFace(i.FRONT):e.cullMode===Si.FRONT_AND_BACK&&i.cullFace(i.FRONT_AND_BACK),r.cullMode=e.cullMode),r.frontFace!==e.frontFace&&(i.frontFace(e.frontFace),r.frontFace=e.frontFace),r.polygonOffset!==e.polygonOffset&&(e.polygonOffset?(i.polygonOffset(1,1),i.enable(i.POLYGON_OFFSET_FILL)):i.disable(i.POLYGON_OFFSET_FILL),r.polygonOffset=e.polygonOffset)},t.prototype.validatePipelineFormats=function(e){for(var i=0;i<this.currentColorAttachments.length;i++)var r=this.currentColorAttachments[i];this.currentDepthStencilAttachment&&j(this.currentDepthStencilAttachment.format===e.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&j(this.currentSampleCount===e.sampleCount)},t.prototype.setPipeline=function(e){var i=this;if(this.renderBundle){this.renderBundle.push(function(){return i.setPipeline(e)});return}this.currentPipeline=e,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===Wt.NeedsBind){var n=this.gl,s=r.gl_program,o=r.descriptor,a=Zf(o.vertex.glsl,ym);if(D(n))for(var l=0;l<a.length;l++){var c=bi(a[l],2),h=c[1],u=n.getUniformBlockIndex(s,h);u!==-1&&u!==4294967295&&n.uniformBlockBinding(s,u,l)}for(var d=Zf(o.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),l=0;l<d.length;l++){var f=bi(d[l],3),E=f[1],g=f[2],p=n.getUniformLocation(s,E);n.uniform1i(p,parseInt(g))}r.compileState=Wt.ReadyToUse}},t.prototype.setVertexInput=function(e,i,r){var n,s,o=this,a;if(this.renderBundle){this.renderBundle.push(function(){return o.setVertexInput(e,i,r)});return}if(e!==null){j(this.currentPipeline.inputLayout===e);var l=e;this.bindVAO(l.vao);for(var c=this.gl,h=0;h<l.vertexBufferDescriptors.length;h++){var u=l.vertexBufferDescriptors[h],d=u.arrayStride,f=u.attributes;try{for(var E=(n=void 0,ys(f)),g=E.next();!g.done;g=E.next()){var p=g.value,y=p.shaderLocation,T=p.offset,w=D(c)?y:(a=l.program.attributes[y])===null||a===void 0?void 0:a.location;if(!Zr(w)){var _=i[h];if(_===null)continue;var b=p.vertexFormat;c.bindBuffer(c.ARRAY_BUFFER,da(_.buffer));var S=(_.offset||0)+T;c.vertexAttribPointer(w,b.size,b.type,b.normalized,d,S)}}}catch(O){n={error:O}}finally{try{g&&!g.done&&(s=E.return)&&s.call(E)}finally{if(n)throw n.error}}}if(j(r!==null==(l.indexBufferFormat!==null)),r!==null){var P=r.buffer;j(P.usage===U.INDEX),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,da(P)),this.currentIndexBufferByteOffset=r.offset||0}else this.currentIndexBufferByteOffset=null}else j(this.currentPipeline.inputLayout===null),j(r===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},t.prototype.setStencilReference=function(e){this.currentStencilRef!==e&&(this.currentStencilRef=e,this.applyStencil())},t.prototype.draw=function(e,i,r,n){var s,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.draw(e,i,r,n)});return}var a=this.gl,l=this.currentPipeline;if(i){var c=[l.drawMode,r||0,e,i];D(a)?a.drawArraysInstanced.apply(a,Aa([],bi(c),!1)):(s=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(s,Aa([],bi(c),!1))}else a.drawArrays(l.drawMode,r,e);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(i,1))},t.prototype.drawIndexed=function(e,i,r,n,s){var o,a=this;if(this.renderBundle){this.renderBundle.push(function(){return a.drawIndexed(e,i,r,n,s)});return}var l=this.gl,c=this.currentPipeline,h=ps(c.inputLayout),u=ps(this.currentIndexBufferByteOffset)+r*h.indexBufferCompByteSize;if(i){var d=[c.drawMode,e,h.indexBufferType,u,i];D(l)?l.drawElementsInstanced.apply(l,Aa([],bi(d),!1)):(o=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(o,Aa([],bi(d),!1))}else l.drawElements(c.drawMode,e,h.indexBufferType,u);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(i,1))},t.prototype.drawIndirect=function(e,i){},t.prototype.drawIndexedIndirect=function(e,i){},t.prototype.beginOcclusionQuery=function(e){var i=this.gl;if(D(i)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;i.beginQuery(r.gl_query_type,r.gl_query[e])}},t.prototype.endOcclusionQuery=function(){var e=this.gl;if(D(e)){var i=this.currentRenderPassDescriptor.occlusionQueryPool;e.endQuery(i.gl_query_type)}},t.prototype.pipelineQueryReady=function(e){var i=e;return this.queryProgramReady(i.program)},t.prototype.pipelineForceReady=function(e){},t.prototype.endPass=function(){for(var e=this.gl,i=D(e),r=!1,n=0;n<this.currentColorAttachments.length;n++){var s=this.currentColorAttachments[n];if(s!==null){var o=this.currentColorResolveTos[n],a=!1;o!==null&&(j(s.width===o.width&&s.height===o.height),this.setScissorRectEnabled(!1),i&&e.bindFramebuffer(e.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&i&&this.bindFramebufferAttachment(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,s,this.currentColorAttachmentLevels[n]),a=!0,o===this.scTexture?e.bindFramebuffer(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,this.scPlatformFramebuffer):(e.bindFramebuffer(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&e.framebufferTexture2D(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o.gl_texture,this.currentColorResolveToLevels[n])),i?(e.blitFramebuffer(0,0,s.width,s.height,0,0,o.width,o.height,e.COLOR_BUFFER_BIT,e.LINEAR),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(s,o),r=!0),this.currentRenderPassDescriptor.colorStore[n]||a||(e.bindFramebuffer(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,e.COLOR_ATTACHMENT0,s,this.currentColorAttachmentLevels[n])),e.bindFramebuffer(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var l=this.currentDepthStencilAttachment;if(l){var c=this.currentDepthStencilResolveTo,a=!1;c&&(j(l.width===c.width&&l.height===c.height),this.setScissorRectEnabled(!1),e.bindFramebuffer(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),e.bindFramebuffer(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,l),this.bindFramebufferDepthStencilAttachment(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,c)),a=!0,i&&e.blitFramebuffer(0,0,l.width,l.height,0,0,c.width,c.height,e.DEPTH_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,null),r=!0),this.currentRenderPassDescriptor.depthStencilStore||(a||(e.bindFramebuffer(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,l),a=!0),i&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[e.DEPTH_STENCIL_ATTACHMENT])),a&&e.bindFramebuffer(i?m.READ_FRAMEBUFFER:m.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}r||e.bindFramebuffer(i?m.DRAW_FRAMEBUFFER:m.FRAMEBUFFER,null)},t.prototype.setScissorRectEnabled=function(e){if(this.currentScissorEnabled!==e){var i=this.gl;e?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.currentScissorEnabled=e}},t.prototype.applyStencil=function(){Zr(this.currentStencilRef)||(this.gl.stencilFuncSeparate(m.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(m.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},t.prototype.getFallbackTexture=function(e){var i=e.gl_target,r=e.formatKind;if(i===m.TEXTURE_2D)return r===Fe.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(i===m.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(i===m.TEXTURE_3D)return this.fallbackTexture3D;if(i===m.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},t.prototype.submitBlitRenderPass=function(e,i){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:U.VERTEX|U.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{format:v.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:qe.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[v.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:jc(_a)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:e.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:e}));var r=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var n=this.createRenderPass({colorAttachment:[e],colorResolveTo:[i],colorClearColor:[rn]}),s=this.getCanvas(),o=s.width,a=s.height;n.setPipeline(this.blitRenderPipeline),n.setBindings(this.blitBindings),n.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),n.setViewport(0,0,o,a),this.gl.disable(this.gl.BLEND),n.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=r,this.inBlitRenderPass=!1},t}(),nn=function(){function t(e){this.pluginOptions=e}return t.prototype.createSwapChain=function(e){return ha(this,void 0,void 0,function(){var i,r,n,s,o,a,l,c,h,u,d,f,E;return ua(this,function(g){return i=this.pluginOptions,r=i.targets,n=i.xrCompatible,s=i.antialias,o=s===void 0?!1:s,a=i.preserveDrawingBuffer,l=a===void 0?!1:a,c=i.premultipliedAlpha,h=c===void 0?!0:c,u=i.shaderDebug,d=i.trackResources,f={antialias:o,preserveDrawingBuffer:l,stencil:!0,premultipliedAlpha:h,xrCompatible:n},this.handleContextEvents(e),r.includes("webgl2")&&(E=e.getContext("webgl2",f)||e.getContext("experimental-webgl2",f)),!E&&r.includes("webgl1")&&(E=e.getContext("webgl",f)||e.getContext("experimental-webgl",f)),[2,new Rm(E,{shaderDebug:u,trackResources:d})]})})},t.prototype.handleContextEvents=function(e){var i=this.pluginOptions,r=i.onContextLost,n=i.onContextRestored,s=i.onContextCreationError;s&&e.addEventListener("webglcontextcreationerror",s,!1),r&&e.addEventListener("webglcontextlost",r,!1),n&&e.addEventListener("webglcontextrestored",n,!1)},t}();let ze;const D_=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&D_.decode();let Va=null;function Ih(){return(Va===null||Va.byteLength===0)&&(Va=new Uint8Array(ze.memory.buffer)),Va}function Ou(t,e){return t=t>>>0,D_.decode(Ih().subarray(t,t+e))}const vr=new Array(128).fill(void 0);vr.push(void 0,null,!0,!1);let kc=vr.length;function wm(t){kc===vr.length&&vr.push(vr.length+1);const e=kc;return kc=vr[e],vr[e]=t,e}function Fh(t){return vr[t]}function Am(t){t<132||(vr[t]=kc,kc=t)}function bm(t){const e=Fh(t);return Am(t),e}let Gc=0;const Oh=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Sm=typeof Oh.encodeInto=="function"?function(t,e){return Oh.encodeInto(t,e)}:function(t,e){const i=Oh.encode(t);return e.set(i),{read:t.length,written:i.length}};function kd(t,e,i){if(i===void 0){const a=Oh.encode(t),l=e(a.length,1)>>>0;return Ih().subarray(l,l+a.length).set(a),Gc=a.length,l}let r=t.length,n=e(r,1)>>>0;const s=Ih();let o=0;for(;o<r;o++){const a=t.charCodeAt(o);if(a>127)break;s[n+o]=a}if(o!==r){o!==0&&(t=t.slice(o)),n=i(n,r,r=o+t.length*3,1)>>>0;const a=Ih().subarray(n+o,n+r),l=Sm(t,a);o+=l.written}return Gc=o,n}let Ha=null;function xu(){return(Ha===null||Ha.byteLength===0)&&(Ha=new Int32Array(ze.memory.buffer)),Ha}function Pm(t,e,i){let r,n;try{const a=ze.__wbindgen_add_to_stack_pointer(-16),l=kd(t,ze.__wbindgen_malloc,ze.__wbindgen_realloc),c=Gc,h=kd(e,ze.__wbindgen_malloc,ze.__wbindgen_realloc),u=Gc;ze.glsl_compile(a,l,c,h,u,i);var s=xu()[a/4+0],o=xu()[a/4+1];return r=s,n=o,Ou(s,o)}finally{ze.__wbindgen_add_to_stack_pointer(16),ze.__wbindgen_free(r,n,1)}}class Kc{static __wrap(e){e=e>>>0;const i=Object.create(Kc.prototype);return i.__wbg_ptr=e,i}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();ze.__wbg_wgslcomposer_free(e)}constructor(){const e=ze.wgslcomposer_new();return Kc.__wrap(e)}wgsl_compile(e){let i,r;try{const o=ze.__wbindgen_add_to_stack_pointer(-16),a=kd(e,ze.__wbindgen_malloc,ze.__wbindgen_realloc),l=Gc;ze.wgslcomposer_wgsl_compile(o,this.__wbg_ptr,a,l);var n=xu()[o/4+0],s=xu()[o/4+1];return i=n,r=s,Ou(n,s)}finally{ze.__wbindgen_add_to_stack_pointer(16),ze.__wbindgen_free(i,r,1)}}}async function Cm(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const i=await t.arrayBuffer();return await WebAssembly.instantiate(i,e)}else{const i=await WebAssembly.instantiate(t,e);return i instanceof WebAssembly.Instance?{instance:i,module:t}:i}}function Mm(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,i){const r=Ou(e,i);return wm(r)},t.wbg.__wbindgen_object_drop_ref=function(e){bm(e)},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(Fh(e))},t.wbg.__wbg_log_576ca876af0d4a77=function(e,i){console.log(Fh(e),Fh(i))},t.wbg.__wbindgen_throw=function(e,i){throw new Error(Ou(e,i))},t}function Nm(t,e){return ze=t.exports,U_.__wbindgen_wasm_module=e,Ha=null,Va=null,ze}async function U_(t){if(ze!==void 0)return ze;const e=Mm();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:i,module:r}=await Cm(await t,e);return Nm(i,r)}var Ke;(function(t){t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.TEXTURE_BINDING=4]="TEXTURE_BINDING",t[t.STORAGE_BINDING=8]="STORAGE_BINDING",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Ke||(Ke={}));var $d;(function(t){t[t.READ=1]="READ",t[t.WRITE=2]="WRITE"})($d||($d={}));function Bm(t){var e=0;return t&Ae.SAMPLED&&(e|=Ke.TEXTURE_BINDING|Ke.COPY_DST|Ke.COPY_SRC),t&Ae.STORAGE&&(e|=Ke.TEXTURE_BINDING|Ke.STORAGE_BINDING|Ke.COPY_SRC|Ke.COPY_DST),t&Ae.RENDER_TARGET&&(e|=Ke.RENDER_ATTACHMENT|Ke.TEXTURE_BINDING|Ke.COPY_SRC|Ke.COPY_DST),e}function Ef(t){if(t===v.U8_R_NORM)return"r8unorm";if(t===v.S8_R_NORM)return"r8snorm";if(t===v.U8_RG_NORM)return"rg8unorm";if(t===v.S8_RG_NORM)return"rg8snorm";if(t===v.U32_R)return"r32uint";if(t===v.S32_R)return"r32sint";if(t===v.F32_R)return"r32float";if(t===v.U16_RG)return"rg16uint";if(t===v.S16_RG)return"rg16sint";if(t===v.F16_RG)return"rg16float";if(t===v.U8_RGBA_RT)return"bgra8unorm";if(t===v.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(t===v.U8_RGBA_NORM)return"rgba8unorm";if(t===v.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(t===v.S8_RGBA_NORM)return"rgba8snorm";if(t===v.U32_RG)return"rg32uint";if(t===v.S32_RG)return"rg32sint";if(t===v.F32_RG)return"rg32float";if(t===v.U16_RGBA)return"rgba16uint";if(t===v.S16_RGBA)return"rgba16sint";if(t===v.F16_RGBA)return"rgba16float";if(t===v.F32_RGBA)return"rgba32float";if(t===v.U32_RGBA)return"rgba32uint";if(t===v.S32_RGBA)return"rgba32sint";if(t===v.D24)return"depth24plus";if(t===v.D24_S8)return"depth24plus-stencil8";if(t===v.D32F)return"depth32float";if(t===v.D32F_S8)return"depth32float-stencil8";if(t===v.BC1)return"bc1-rgba-unorm";if(t===v.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(t===v.BC2)return"bc2-rgba-unorm";if(t===v.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(t===v.BC3)return"bc3-rgba-unorm";if(t===v.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(t===v.BC4_SNORM)return"bc4-r-snorm";if(t===v.BC4_UNORM)return"bc4-r-unorm";if(t===v.BC5_SNORM)return"bc5-rg-snorm";if(t===v.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function Im(t){if(t===re.TEXTURE_2D)return"2d";if(t===re.TEXTURE_CUBE_MAP)return"2d";if(t===re.TEXTURE_2D_ARRAY)return"2d";if(t===re.TEXTURE_3D)return"3d";throw new Error("whoops")}function Fm(t){if(t===re.TEXTURE_2D)return"2d";if(t===re.TEXTURE_CUBE_MAP)return"cube";if(t===re.TEXTURE_2D_ARRAY)return"2d-array";if(t===re.TEXTURE_3D)return"3d";throw new Error("whoops")}function Om(t){var e=0;return t&U.INDEX&&(e|=GPUBufferUsage.INDEX),t&U.VERTEX&&(e|=GPUBufferUsage.VERTEX),t&U.UNIFORM&&(e|=GPUBufferUsage.UNIFORM),t&U.STORAGE&&(e|=GPUBufferUsage.STORAGE),t&U.COPY_SRC&&(e|=GPUBufferUsage.COPY_SRC),t&U.INDIRECT&&(e|=GPUBufferUsage.INDIRECT),e|=GPUBufferUsage.COPY_DST,e}function dd(t){if(t===ri.CLAMP_TO_EDGE)return"clamp-to-edge";if(t===ri.REPEAT)return"repeat";if(t===ri.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function Qf(t){if(t===Ze.BILINEAR)return"linear";if(t===Ze.POINT)return"nearest";throw new Error("whoops")}function xm(t){if(t===it.LINEAR)return"linear";if(t===it.NEAREST)return"nearest";if(t===it.NO_MIP)return"nearest";throw new Error("whoops")}function la(t){var e=t;return e.gpuBuffer}function Dm(t){var e=t;return e.gpuSampler}function Um(t){var e=t;return e.querySet}function km(t){if(t===Mu.OcclusionConservative)return"occlusion";throw new Error("whoops")}function $m(t){switch(t){case qe.TRIANGLES:return"triangle-list";case qe.POINTS:return"point-list";case qe.TRIANGLE_STRIP:return"triangle-strip";case qe.LINES:return"line-list";case qe.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function Wm(t){if(t===Si.NONE)return"none";if(t===Si.FRONT)return"front";if(t===Si.BACK)return"back";throw new Error("whoops")}function Lm(t){if(t===Yc.CCW)return"ccw";if(t===Yc.CW)return"cw";throw new Error("whoops")}function Xm(t,e){return{topology:$m(t),cullMode:Wm(e.cullMode),frontFace:Lm(e.frontFace)}}function Jf(t){if(t===Z.ZERO)return"zero";if(t===Z.ONE)return"one";if(t===Z.SRC)return"src";if(t===Z.ONE_MINUS_SRC)return"one-minus-src";if(t===Z.DST)return"dst";if(t===Z.ONE_MINUS_DST)return"one-minus-dst";if(t===Z.SRC_ALPHA)return"src-alpha";if(t===Z.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(t===Z.DST_ALPHA)return"dst-alpha";if(t===Z.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(t===Z.CONST)return"constant";if(t===Z.ONE_MINUS_CONSTANT)return"one-minus-constant";if(t===Z.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function Vm(t){if(t===$e.ADD)return"add";if(t===$e.SUBSTRACT)return"subtract";if(t===$e.REVERSE_SUBSTRACT)return"reverse-subtract";if(t===$e.MIN)return"min";if(t===$e.MAX)return"max";throw new Error("whoops")}function ep(t){return{operation:Vm(t.blendMode),srcFactor:Jf(t.blendSrcFactor),dstFactor:Jf(t.blendDstFactor)}}function tp(t){return t.blendMode===$e.ADD&&t.blendSrcFactor===Z.ONE&&t.blendDstFactor===Z.ZERO}function Hm(t){if(!(tp(t.rgbBlendState)&&tp(t.alphaBlendState)))return{color:ep(t.rgbBlendState),alpha:ep(t.alphaBlendState)}}function Ym(t,e){return{format:Ef(e),blend:Hm(t),writeMask:t.channelWriteMask}}function zm(t,e){return e.attachmentsState.map(function(i,r){return Ym(i,t[r])})}function xh(t){if(t===pt.NEVER)return"never";if(t===pt.LESS)return"less";if(t===pt.EQUAL)return"equal";if(t===pt.LEQUAL)return"less-equal";if(t===pt.GREATER)return"greater";if(t===pt.NOTEQUAL)return"not-equal";if(t===pt.GEQUAL)return"greater-equal";if(t===pt.ALWAYS)return"always";throw new Error("whoops")}function Cs(t){if(t===wt.KEEP)return"keep";if(t===wt.REPLACE)return"replace";if(t===wt.ZERO)return"zero";if(t===wt.DECREMENT_CLAMP)return"decrement-clamp";if(t===wt.DECREMENT_WRAP)return"decrement-wrap";if(t===wt.INCREMENT_CLAMP)return"increment-clamp";if(t===wt.INCREMENT_WRAP)return"increment-wrap";if(t===wt.INVERT)return"invert";throw new Error("whoops")}function jm(t,e){if(!Zr(t))return{format:Ef(t),depthWriteEnabled:!!e.depthWrite,depthCompare:xh(e.depthCompare),depthBias:e.polygonOffset?1:0,depthBiasSlopeScale:e.polygonOffset?1:0,stencilFront:{compare:xh(e.stencilFront.compare),passOp:Cs(e.stencilFront.passOp),failOp:Cs(e.stencilFront.failOp),depthFailOp:Cs(e.stencilFront.depthFailOp)},stencilBack:{compare:xh(e.stencilBack.compare),passOp:Cs(e.stencilBack.passOp),failOp:Cs(e.stencilBack.failOp),depthFailOp:Cs(e.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Gm(t){if(t!==null){if(t===v.U16_R)return"uint16";if(t===v.U32_R)return"uint32";throw new Error("whoops")}}function Km(t){if(t===Se.VERTEX)return"vertex";if(t===Se.INSTANCE)return"instance";throw new Error("whoops")}function Zm(t){if(t===v.U8_R)return"uint8x2";if(t===v.U8_RG)return"uint8x2";if(t===v.U8_RGB)return"uint8x4";if(t===v.U8_RGBA)return"uint8x4";if(t===v.U8_RG_NORM)return"unorm8x2";if(t===v.U8_RGBA_NORM)return"unorm8x4";if(t===v.S8_RGB_NORM)return"snorm8x4";if(t===v.S8_RGBA_NORM)return"snorm8x4";if(t===v.U16_RG_NORM)return"unorm16x2";if(t===v.U16_RGBA_NORM)return"unorm16x4";if(t===v.S16_RG_NORM)return"snorm16x2";if(t===v.S16_RGBA_NORM)return"snorm16x4";if(t===v.S16_RG)return"uint16x2";if(t===v.F16_RG)return"float16x2";if(t===v.F16_RGBA)return"float16x4";if(t===v.F32_R)return"float32";if(t===v.F32_RG)return"float32x2";if(t===v.F32_RGB)return"float32x3";if(t===v.F32_RGBA)return"float32x4";throw"whoops"}function qm(t){var e=rr(t);switch(e){case C.BC1:case C.BC2:case C.BC3:case C.BC4_SNORM:case C.BC4_UNORM:case C.BC5_SNORM:case C.BC5_UNORM:return!0;default:return!1}}function Qm(t){var e=rr(t);switch(e){case C.BC1:case C.BC2:case C.BC3:case C.BC4_SNORM:case C.BC4_UNORM:case C.BC5_SNORM:case C.BC5_UNORM:return 4;default:return 1}}function ip(t,e,i,r){switch(i===void 0&&(i=!1),t){case v.S8_R:case v.S8_R_NORM:case v.S8_RG_NORM:case v.S8_RGB_NORM:case v.S8_RGBA_NORM:{var n=e instanceof ArrayBuffer?new Int8Array(e):new Int8Array(e);return r&&n.set(new Int8Array(r)),n}case v.U8_R:case v.U8_R_NORM:case v.U8_RG:case v.U8_RG_NORM:case v.U8_RGB:case v.U8_RGB_NORM:case v.U8_RGB_SRGB:case v.U8_RGBA:case v.U8_RGBA_NORM:case v.U8_RGBA_SRGB:{var s=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e);return r&&s.set(new Uint8Array(r)),s}case v.S16_R:case v.S16_RG:case v.S16_RG_NORM:case v.S16_RGB_NORM:case v.S16_RGBA:case v.S16_RGBA_NORM:{var o=e instanceof ArrayBuffer?new Int16Array(e):new Int16Array(i?e/2:e);return r&&o.set(new Int16Array(r)),o}case v.U16_R:case v.U16_RGB:case v.U16_RGBA_5551:case v.U16_RGBA_NORM:case v.U16_RG_NORM:case v.U16_R_NORM:{var a=e instanceof ArrayBuffer?new Uint16Array(e):new Uint16Array(i?e/2:e);return r&&a.set(new Uint16Array(r)),a}case v.S32_R:{var l=e instanceof ArrayBuffer?new Int32Array(e):new Int32Array(i?e/4:e);return r&&l.set(new Int32Array(r)),l}case v.U32_R:case v.U32_RG:{var c=e instanceof ArrayBuffer?new Uint32Array(e):new Uint32Array(i?e/4:e);return r&&c.set(new Uint32Array(r)),c}case v.F32_R:case v.F32_RG:case v.F32_RGB:case v.F32_RGBA:{var h=e instanceof ArrayBuffer?new Float32Array(e):new Float32Array(i?e/4:e);return r&&h.set(new Float32Array(r)),h}}var u=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e);return r&&u.set(new Uint8Array(r)),u}function Jm(t){var e=(t&32768)>>15,i=(t&31744)>>10,r=t&1023;return i===0?(e?-1:1)*Math.pow(2,-14)*(r/Math.pow(2,10)):i==31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*Math.pow(2,i-15)*(1+r/Math.pow(2,10))}function k_(t){switch(t){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var Ni=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=t.call(this)||this;return s.id=r,s.device=n,s}return e.prototype.destroy=function(){},e}(tn),eg=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o,a,l=t.call(this,{id:r,device:n})||this;l.type=pe.Bindings;var c=s.pipeline;j(!!c);var h=s.uniformBufferBindings,u=s.storageBufferBindings,d=s.samplerBindings,f=s.storageTextureBindings;l.numUniformBuffers=(h==null?void 0:h.length)||0;var E=[[],[],[],[]],g=0;if(h&&h.length)for(var p=0;p<h.length;p++){var y=s.uniformBufferBindings[p],T=y.binding,w=y.size,_=y.offset,b=y.buffer,S={buffer:la(b),offset:_??0,size:w};E[0].push({binding:T??g++,resource:S})}if(d&&d.length){g=0;for(var p=0;p<d.length;p++){var P=Ie(Ie({},d[p]),F_),T=s.samplerBindings[p],O=T.texture!==null?T.texture:l.device.getFallbackTexture(P);P.dimension=O.dimension,P.formatKind=C_(O.format);var Y=O.gpuTextureView;if(E[1].push({binding:(o=T.textureBinding)!==null&&o!==void 0?o:g++,resource:Y}),T.samplerBinding!==-1){var ce=T.sampler!==null?T.sampler:l.device.getFallbackSampler(P),H=Dm(ce);E[1].push({binding:(a=T.samplerBinding)!==null&&a!==void 0?a:g++,resource:H})}}}if(u&&u.length){g=0;for(var p=0;p<u.length;p++){var ee=s.storageBufferBindings[p],T=ee.binding,w=ee.size,_=ee.offset,b=ee.buffer,S={buffer:la(b),offset:_??0,size:w};E[2].push({binding:T??g++,resource:S})}}if(f&&f.length){g=0;for(var p=0;p<f.length;p++){var Pe=s.storageTextureBindings[p],T=Pe.binding,O=Pe.texture,Y=O.gpuTextureView;E[3].push({binding:T??g++,resource:Y})}}var Xt=E.findLastIndex(function(_t){return!!_t.length});return l.gpuBindGroup=E.map(function(_t,nr){return nr<=Xt&&l.device.device.createBindGroup({layout:c.getBindGroupLayout(nr),entries:_t})}),l}return e}(Ni),tg=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.Buffer;var a=s.usage,l=s.viewOrSize,c=!!(a&U.MAP_READ);o.usage=Om(a),c&&(o.usage=U.MAP_READ|U.COPY_DST);var h=!aa(l);if(o.view=aa(l)?null:l,o.size=aa(l)?Bu(l,4):Bu(l.byteLength,4),aa(l))o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:c?h:!1});else{o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:!0});var u=l&&l.constructor||Float32Array;new u(o.gpuBuffer.getMappedRange()).set(l),o.gpuBuffer.unmap()}return o}return e.prototype.setSubData=function(i,r,n,s){n===void 0&&(n=0),s===void 0&&(s=0);var o=this.gpuBuffer;s=s||r.byteLength,s=Math.min(s,this.size-i);var a=r.byteOffset+n,l=a+s,c=s+3&-4;if(c!==s){var h=new Uint8Array(r.buffer.slice(a,l));r=new Uint8Array(c),r.set(h),n=0,a=0,l=c,s=c}for(var u=1024*1024*15,d=0;l-(a+d)>u;)this.device.device.queue.writeBuffer(o,i+d,r.buffer,a+d,u),d+=u;this.device.device.queue.writeBuffer(o,i+d,r.buffer,a+d,s-d)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gpuBuffer.destroy()},e}(Ni),rp=function(){function t(){this.gpuComputePassEncoder=null}return t.prototype.dispatchWorkgroups=function(e,i,r){this.gpuComputePassEncoder.dispatchWorkgroups(e,i,r)},t.prototype.dispatchWorkgroupsIndirect=function(e,i){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(e.gpuBuffer,i)},t.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},t.prototype.beginComputePass=function(e){j(this.gpuComputePassEncoder===null),this.frameCommandEncoder=e,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},t.prototype.setPipeline=function(e){var i=e,r=ps(i.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(r)},t.prototype.setBindings=function(e){var i=this,r=e;r.gpuBindGroup.forEach(function(n,s){n&&i.gpuComputePassEncoder.setBindGroup(s,r.gpuBindGroup[s])})},t.prototype.pushDebugGroup=function(e){this.gpuComputePassEncoder.pushDebugGroup(e)},t.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},t.prototype.insertDebugMarker=function(e){this.gpuComputePassEncoder.insertDebugMarker(e)},t}(),ig=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.ComputePipeline,o.gpuComputePipeline=null,o.descriptor=s;var a=s.program,l=a.computeStage;if(l===null)return o;var c={layout:"auto",compute:Ie({},l)};return o.gpuComputePipeline=o.device.device.createComputePipeline(c),o.name!==void 0&&(o.gpuComputePipeline.label=o.name),o}return e.prototype.getBindGroupLayout=function(i){return this.gpuComputePipeline.getBindGroupLayout(i)},e}(Ni),rg=function(t){De(e,t);function e(i){var r,n,s,o,a=i.id,l=i.device,c=i.descriptor,h=t.call(this,{id:a,device:l})||this;h.type=pe.InputLayout;var u=[];try{for(var d=ys(c.vertexBufferDescriptors),f=d.next();!f.done;f=d.next()){var E=f.value,g=E.arrayStride,p=E.stepMode,y=E.attributes;u.push({arrayStride:g,stepMode:Km(p),attributes:[]});try{for(var T=(s=void 0,ys(y)),w=T.next();!w.done;w=T.next()){var _=w.value,b=_.shaderLocation,S=_.format,P=_.offset;u[u.length-1].attributes.push({shaderLocation:b,format:Zm(S),offset:P})}}catch(O){s={error:O}}finally{try{w&&!w.done&&(o=T.return)&&o.call(T)}finally{if(s)throw s.error}}}}catch(O){r={error:O}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return h.indexFormat=Gm(c.indexBufferFormat),h.buffers=u,h}return e}(Ni),np=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;return o.type=pe.Program,o.vertexStage=null,o.fragmentStage=null,o.computeStage=null,o.descriptor=s,s.vertex&&(o.vertexStage=o.createShaderStage(s.vertex,"vertex")),s.fragment&&(o.fragmentStage=o.createShaderStage(s.fragment,"fragment")),s.compute&&(o.computeStage=o.createShaderStage(s.compute,"compute")),o}return e.prototype.setUniformsLegacy=function(i){},e.prototype.createShaderStage=function(i,r){var n,s,o=i.glsl,a=i.wgsl,l=i.entryPoint,c=i.postprocess,h=!1,u=a;if(!u)try{u=this.device.glsl_compile(o,r,h)}catch(y){throw console.error(y,o),new Error("whoops")}var d=function(y){if(!u.includes(y))return"continue";u=u.replace("var T_".concat(y,": texture_2d<f32>;"),"var T_".concat(y,": texture_depth_2d;")),u=u.replace(new RegExp("textureSample\\(T_".concat(y,"(.*)\\);$"),"gm"),function(T,w){return"vec4<f32>(textureSample(T_".concat(y).concat(w,"), 0.0, 0.0, 0.0);")})};try{for(var f=ys(["u_TextureFramebufferDepth"]),E=f.next();!E.done;E=f.next()){var g=E.value;d(g)}}catch(y){n={error:y}}finally{try{E&&!E.done&&(s=f.return)&&s.call(f)}finally{if(n)throw n.error}}c&&(u=c(u));var p=this.device.device.createShaderModule({code:u});return{module:p,entryPoint:l||"main"}},e}(Ni),ng=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;o.type=pe.QueryPool;var a=s.elemCount,l=s.type;return o.querySet=o.device.device.createQuerySet({type:km(l),count:a}),o.resolveBuffer=o.device.device.createBuffer({size:a*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),o.cpuBuffer=o.device.device.createBuffer({size:a*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),o.results=null,o}return e.prototype.queryResultOcclusion=function(i){return this.results===null?null:this.results[i]!==BigInt(0)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},e}(Ni),sg=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=t.call(this,{id:r,device:n})||this;return s.type=pe.Readback,s}return e.prototype.readTexture=function(i,r,n,s,o,a,l,c){return l===void 0&&(l=0),ha(this,void 0,void 0,function(){var h,u,d,f,E,g,p,y;return ua(this,function(T){return h=i,u=0,d=k_(h.gpuTextureformat),f=Math.ceil(s/d.width)*d.length,E=Math.ceil(f/256)*256,g=E*o,p=this.device.createBuffer({usage:U.STORAGE|U.MAP_READ|U.COPY_DST,hint:Q.STATIC,viewOrSize:g}),y=this.device.device.createCommandEncoder(),y.copyTextureToBuffer({texture:h.gpuTexture,mipLevel:0,origin:{x:r,y:n,z:Math.max(u,0)}},{buffer:p.gpuBuffer,offset:0,bytesPerRow:E},{width:s,height:o,depthOrArrayLayers:1}),this.device.device.queue.submit([y.finish()]),[2,this.readBuffer(p,0,a.byteLength===g?a:null,l,g,h.format,!0,!1,f,E,o)]})})},e.prototype.readTextureSync=function(i,r,n,s,o,a,l,c){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},e.prototype.readBuffer=function(i,r,n,s,o,a,l,c,h,u,d){var f=this;r===void 0&&(r=0),n===void 0&&(n=null),o===void 0&&(o=0),a===void 0&&(a=v.U8_RGB),l===void 0&&(l=!1),h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0);var E=i,g=o||E.size,p=n||E.view,y=p&&p.constructor&&p.constructor.BYTES_PER_ELEMENT||P_(a),T=E;if(!(E.usage&U.MAP_READ&&E.usage&U.COPY_DST)){var w=this.device.device.createCommandEncoder();T=this.device.createBuffer({usage:U.STORAGE|U.MAP_READ|U.COPY_DST,hint:Q.STATIC,viewOrSize:g}),w.copyBufferToBuffer(E.gpuBuffer,r,T.gpuBuffer,0,g),this.device.device.queue.submit([w.finish()])}return new Promise(function(_,b){T.gpuBuffer.mapAsync($d.READ,r,g).then(function(){var S=T.gpuBuffer.getMappedRange(r,g),P=p;if(l)P===null?P=ip(a,g,!0,S):P=ip(a,P.buffer,void 0,S);else if(P===null)switch(y){case 1:P=new Uint8Array(g),P.set(new Uint8Array(S));break;case 2:P=f.getHalfFloatAsFloatRGBAArrayBuffer(g/2,S);break;case 4:P=new Float32Array(g/4),P.set(new Float32Array(S));break}else switch(y){case 1:P=new Uint8Array(P.buffer),P.set(new Uint8Array(S));break;case 2:P=f.getHalfFloatAsFloatRGBAArrayBuffer(g/2,S,p);break;case 4:var O=p&&p.constructor||Float32Array;P=new O(P.buffer),P.set(new O(S));break}if(h!==u){y===1&&!l&&(h*=2,u*=2);for(var Y=new Uint8Array(P.buffer),ce=h,H=0,ee=1;ee<d;++ee){H=ee*u;for(var Pe=0;Pe<h;++Pe)Y[ce++]=Y[H++]}y!==0&&!l?P=new Float32Array(Y.buffer,0,ce/4):P=new Uint8Array(Y.buffer,0,ce)}T.gpuBuffer.unmap(),_(P)},function(S){return b(S)})})},e.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(i,r,n){n||(n=new Float32Array(i));for(var s=new Uint16Array(r);i--;)n[i]=Jm(s[i]);return n},e}(Ni),sp=function(){function t(e){this.device=e,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return t.prototype.getEncoder=function(){var e;return((e=this.renderBundle)===null||e===void 0?void 0:e.renderBundleEncoder)||this.gpuRenderPassEncoder},t.prototype.getTextureView=function(e,i){return j(i<e.mipLevelCount),e.mipLevelCount===1?e.gpuTextureView:e.gpuTexture.createView({baseMipLevel:i,mipLevelCount:1})},t.prototype.setRenderPassDescriptor=function(e){var i,r,n,s,o,a;this.descriptor=e,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var l=e.colorAttachment.length;this.gfxColorAttachment.length=l,this.gfxColorResolveTo.length=l;for(var c=0;c<e.colorAttachment.length;c++){var h=e.colorAttachment[c],u=e.colorResolveTo[c];if(h===null&&u!==null&&(h=u,u=null),this.gfxColorAttachment[c]=h,this.gfxColorResolveTo[c]=u,this.gfxColorAttachmentLevel[c]=((i=e.colorAttachmentLevel)===null||i===void 0?void 0:i[c])||0,this.gfxColorResolveToLevel[c]=((r=e.colorResolveToLevel)===null||r===void 0?void 0:r[c])||0,h!==null){this.gpuColorAttachments[c]===void 0&&(this.gpuColorAttachments[c]={});var d=this.gpuColorAttachments[c];d.view=this.getTextureView(h,((n=this.gfxColorAttachmentLevel)===null||n===void 0?void 0:n[c])||0);var f=(o=(s=e.colorClearColor)===null||s===void 0?void 0:s[c])!==null&&o!==void 0?o:"load";f==="load"?d.loadOp="load":(d.loadOp="clear",d.clearValue=f),d.storeOp=!((a=e.colorStore)===null||a===void 0)&&a[c]?"store":"discard",d.resolveTarget=void 0,u!==null&&(h.sampleCount>1?d.resolveTarget=this.getTextureView(u,this.gfxColorResolveToLevel[c]):d.storeOp="store")}else{this.gpuColorAttachments.length=c,this.gfxColorAttachment.length=c,this.gfxColorResolveTo.length=c;break}}if(this.gfxDepthStencilAttachment=e.depthStencilAttachment,this.gfxDepthStencilResolveTo=e.depthStencilResolveTo,e.depthStencilAttachment){var E=e.depthStencilAttachment,d=this.gpuDepthStencilAttachment;d.view=E.gpuTextureView;var g=!!(pa(E.format)&F.Depth);g?(e.depthClearValue==="load"?d.depthLoadOp="load":(d.depthLoadOp="clear",d.depthClearValue=e.depthClearValue),e.depthStencilStore||this.gfxDepthStencilResolveTo!==null?d.depthStoreOp="store":d.depthStoreOp="discard"):(d.depthLoadOp=void 0,d.depthStoreOp=void 0);var p=!!(pa(E.format)&F.Stencil);p?(e.stencilClearValue==="load"?d.stencilLoadOp="load":(d.stencilLoadOp="clear",d.stencilClearValue=e.stencilClearValue),e.depthStencilStore||this.gfxDepthStencilResolveTo!==null?d.stencilStoreOp="store":d.stencilStoreOp="discard"):(d.stencilLoadOp=void 0,d.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=Zr(e.occlusionQueryPool)?void 0:Um(e.occlusionQueryPool)},t.prototype.beginRenderPass=function(e,i){j(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(i),this.frameCommandEncoder=e,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},t.prototype.flipY=function(e,i){var r=this.device.swapChainHeight;return r-e-i},t.prototype.setViewport=function(e,i,r,n,s,o){s===void 0&&(s=0),o===void 0&&(o=1),this.gpuRenderPassEncoder.setViewport(e,this.flipY(i,n),r,n,s,o)},t.prototype.setScissorRect=function(e,i,r,n){this.gpuRenderPassEncoder.setScissorRect(e,this.flipY(i,n),r,n)},t.prototype.setPipeline=function(e){var i=e,r=ps(i.gpuRenderPipeline);this.getEncoder().setPipeline(r)},t.prototype.setVertexInput=function(e,i,r){if(e!==null){var n=this.getEncoder(),s=e;r!==null&&n.setIndexBuffer(la(r.buffer),ps(s.indexFormat),r.offset);for(var o=0;o<i.length;o++){var a=i[o];a!==null&&n.setVertexBuffer(o,la(a.buffer),a.offset)}}},t.prototype.setBindings=function(e){var i=e,r=this.getEncoder();i.gpuBindGroup.forEach(function(n,s){n&&r.setBindGroup(s,i.gpuBindGroup[s])})},t.prototype.setStencilReference=function(e){this.gpuRenderPassEncoder.setStencilReference(e)},t.prototype.draw=function(e,i,r,n){this.getEncoder().draw(e,i,r,n)},t.prototype.drawIndexed=function(e,i,r,n,s){this.getEncoder().drawIndexed(e,i,r,n,s)},t.prototype.drawIndirect=function(e,i){this.getEncoder().drawIndirect(la(e),i)},t.prototype.drawIndexedIndirect=function(e,i){this.getEncoder().drawIndexedIndirect(la(e),i)},t.prototype.beginOcclusionQuery=function(e){this.gpuRenderPassEncoder.beginOcclusionQuery(e)},t.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},t.prototype.pushDebugGroup=function(e){this.gpuRenderPassEncoder.pushDebugGroup(e)},t.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},t.prototype.insertDebugMarker=function(e){this.gpuRenderPassEncoder.insertDebugMarker(e)},t.prototype.beginBundle=function(e){this.renderBundle=e},t.prototype.endBundle=function(){this.renderBundle.finish()},t.prototype.executeBundles=function(e){this.gpuRenderPassEncoder.executeBundles(e.map(function(i){return i.renderBundle}))},t.prototype.finish=function(){var e;(e=this.gpuRenderPassEncoder)===null||e===void 0||e.end(),this.gpuRenderPassEncoder=null;for(var i=0;i<this.gfxColorAttachment.length;i++){var r=this.gfxColorAttachment[i],n=this.gfxColorResolveTo[i];r!==null&&n!==null&&r.sampleCount===1&&this.copyAttachment(n,this.gfxColorAttachmentLevel[i],r,this.gfxColorResolveToLevel[i])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},t.prototype.copyAttachment=function(e,i,r,n){j(r.sampleCount===1);var s={texture:r.gpuTexture,mipLevel:n},o={texture:e.gpuTexture,mipLevel:i};j(r.width>>>n===e.width>>>i),j(r.height>>>n===e.height>>>i),j(!!(r.usage&Ke.COPY_SRC)),j(!!(e.usage&Ke.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(s,o,[e.width,e.height,1])},t}(),og=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=t.call(this,{id:r,device:n})||this;return o.type=pe.RenderPipeline,o.isCreatingAsync=!1,o.gpuRenderPipeline=null,o.descriptor=s,o.device.createRenderPipelineInternal(o,!1),o}return e.prototype.getBindGroupLayout=function(i){return this.gpuRenderPipeline.getBindGroupLayout(i)},e}(Ni),ag=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o,a,l=t.call(this,{id:r,device:n})||this;l.type=pe.Sampler;var c=s.lodMinClamp,h=s.mipmapFilter===it.NO_MIP?s.lodMinClamp:s.lodMaxClamp,u=(o=s.maxAnisotropy)!==null&&o!==void 0?o:1;return u>1&&j(s.minFilter===Ze.BILINEAR&&s.magFilter===Ze.BILINEAR&&s.mipmapFilter===it.LINEAR),l.gpuSampler=l.device.device.createSampler({addressModeU:dd(s.addressModeU),addressModeV:dd(s.addressModeV),addressModeW:dd((a=s.addressModeW)!==null&&a!==void 0?a:s.addressModeU),lodMinClamp:c,lodMaxClamp:h,minFilter:Qf(s.minFilter),magFilter:Qf(s.magFilter),mipmapFilter:xm(s.mipmapFilter),compare:s.compareFunction!==void 0?xh(s.compareFunction):void 0,maxAnisotropy:u}),l}return e}(Ni),Eh=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=i.descriptor,o=i.skipCreate,a=i.sampleCount,l=t.call(this,{id:r,device:n})||this;l.type=pe.Texture,l.flipY=!1;var c=s.format,h=s.dimension,u=s.width,d=s.height,f=s.depthOrArrayLayers,E=s.mipLevelCount,g=s.usage,p=s.pixelStore;return l.flipY=!!(p!=null&&p.unpackFlipY),l.device.createTextureShared({format:c,dimension:h??re.TEXTURE_2D,width:u,height:d,depthOrArrayLayers:f??1,mipLevelCount:E??1,usage:g,sampleCount:a??1},l,o),l}return e.prototype.textureFromImageBitmapOrCanvas=function(i,r,n){for(var s=r[0].width,o=r[0].height,a={size:{width:s,height:o,depthOrArrayLayers:n},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},l=i.createTexture(a),c=0;c<r.length;c++)i.queue.copyExternalImageToTexture({source:r[c],flipY:this.flipY},{texture:l,origin:[0,0,c]},[s,o]);return[l,s,o]},e.prototype.isImageBitmapOrCanvases=function(i){var r=i[0];return r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof OffscreenCanvas},e.prototype.isVideo=function(i){var r=i[0];return r instanceof HTMLVideoElement},e.prototype.setImageData=function(i,r){var n,s=this,o=this.device.device,a,l,c;if(this.isImageBitmapOrCanvases(i))n=bi(this.textureFromImageBitmapOrCanvas(o,i,this.depthOrArrayLayers),3),a=n[0],l=n[1],c=n[2];else if(this.isVideo(i))a=o.importExternalTexture({source:i[0]});else{var h=k_(this.gpuTextureformat),u=Math.ceil(this.width/h.width)*h.length;i.forEach(function(d){o.queue.writeTexture({texture:s.gpuTexture},d,{bytesPerRow:u},{width:s.width,height:s.height})})}this.width=l,this.height=c,a&&(this.gpuTexture=a),this.gpuTextureView=this.gpuTexture.createView({dimension:Fm(this.dimension)})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gpuTexture.destroy()},e}(Ni),lg=function(t){De(e,t);function e(i){var r=i.id,n=i.device,s=t.call(this,{id:r,device:n})||this;return s.type=pe.RenderBundle,s.renderBundleEncoder=s.device.device.createRenderBundleEncoder({colorFormats:[s.device.swapChainFormat]}),s}return e.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},e}(Ni),cg=function(){function t(e,i,r,n,s,o){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Ke.RENDER_ATTACHMENT|Ke.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=zc.UPPER_LEFT,this.clipSpaceNearZ=er.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=i,this.canvas=r,this.canvasContext=n,this.glsl_compile=s,this.WGSLComposer=o,this.fallbackTexture2D=this.createFallbackTexture(re.TEXTURE_2D,Fe.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(re.TEXTURE_2D,Fe.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(re.TEXTURE_2D_ARRAY,Fe.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(re.TEXTURE_3D,Fe.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(re.TEXTURE_CUBE_MAP,Fe.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:ri.REPEAT,addressModeV:ri.REPEAT,minFilter:Ze.POINT,magFilter:Ze.POINT,mipmapFilter:it.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:ri.REPEAT,addressModeV:ri.REPEAT,minFilter:Ze.POINT,magFilter:Ze.POINT,mipmapFilter:it.NEAREST,compareFunction:pt.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(a){console.error(a.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return t.prototype.destroy=function(){},t.prototype.configureSwapChain=function(e,i){this.swapChainWidth===e&&this.swapChainHeight===i||(this.swapChainWidth=e,this.swapChainHeight=i)},t.prototype.getOnscreenTexture=function(){var e=this.canvasContext.getCurrentTexture(),i=e.createView(),r=new Eh({id:0,device:this,descriptor:{format:v.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:re.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return r.depthOrArrayLayers=1,r.sampleCount=1,r.gpuTexture=e,r.gpuTextureView=i,r.name="Onscreen",this.setResourceName(r,"Onscreen Texture"),r},t.prototype.getDevice=function(){return this},t.prototype.getCanvas=function(){return this.canvas},t.prototype.beginFrame=function(){j(this.frameCommandEncoderPool.length===0)},t.prototype.endFrame=function(){j(this.frameCommandEncoderPool.every(function(e){return e!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(e){return e.finish()})),this.frameCommandEncoderPool=[]},t.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},t.prototype.createBuffer=function(e){return new tg({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createTexture=function(e){return new Eh({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createSampler=function(e){return new ag({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderTarget=function(e){var i=new Eh({id:this.getNextUniqueId(),device:this,descriptor:Ie(Ie({},e),{dimension:re.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Ae.RENDER_TARGET}),sampleCount:e.sampleCount});return i.depthOrArrayLayers=1,i.type=pe.RenderTarget,i},t.prototype.createRenderTargetFromTexture=function(e){var i=e,r=i.format,n=i.width,s=i.height,o=i.depthOrArrayLayers,a=i.sampleCount,l=i.mipLevelCount,c=i.gpuTexture,h=i.gpuTextureView,u=i.usage;j(!!(u&Ke.RENDER_ATTACHMENT));var d=new Eh({id:this.getNextUniqueId(),device:this,descriptor:{format:r,width:n,height:s,depthOrArrayLayers:o,dimension:re.TEXTURE_2D,mipLevelCount:l,usage:u},skipCreate:!0});return d.depthOrArrayLayers=o,d.sampleCount=a,d.gpuTexture=c,d.gpuTextureView=h,d},t.prototype.createProgram=function(e){var i,r;return!((i=e.vertex)===null||i===void 0)&&i.glsl&&(e.vertex.glsl=Fu(this.queryVendorInfo(),"vert",e.vertex.glsl)),!((r=e.fragment)===null||r===void 0)&&r.glsl&&(e.fragment.glsl=Fu(this.queryVendorInfo(),"frag",e.fragment.glsl)),new np({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createProgramSimple=function(e){return new np({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createTextureShared=function(e,i,r){var n={width:e.width,height:e.height,depthOrArrayLayers:e.depthOrArrayLayers},s=e.mipLevelCount,o=Ef(e.format),a=Im(e.dimension),l=Bm(e.usage);if(i.gpuTextureformat=o,i.dimension=e.dimension,i.format=e.format,i.width=e.width,i.height=e.height,i.depthOrArrayLayers=e.depthOrArrayLayers,i.mipLevelCount=s,i.usage=l,i.sampleCount=e.sampleCount,!r){var c=this.device.createTexture({size:n,mipLevelCount:s,format:o,dimension:a,sampleCount:e.sampleCount,usage:l}),h=c.createView();i.gpuTexture=c,i.gpuTextureView=h}},t.prototype.getFallbackSampler=function(e){var i=e.formatKind;return i===Fe.Depth&&e.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},t.prototype.getFallbackTexture=function(e){var i=e.dimension,r=e.formatKind;if(i===re.TEXTURE_2D)return r===Fe.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(i===re.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(i===re.TEXTURE_3D)return this.fallbackTexture3D;if(i===re.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},t.prototype.createFallbackTexture=function(e,i){var r=e===re.TEXTURE_CUBE_MAP?6:1,n=i===Fe.Float?v.U8_RGBA_NORM:v.D24;return this.createTexture({dimension:e,format:n,usage:Ae.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1})},t.prototype.createBindings=function(e){return new eg({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createInputLayout=function(e){return new rg({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createComputePipeline=function(e){return new ig({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderPipeline=function(e){return new og({id:this.getNextUniqueId(),device:this,descriptor:Ie({},e)})},t.prototype.createQueryPool=function(e,i){return new ng({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:i}})},t.prototype.createRenderPipelineInternal=function(e,i){var r;if(e.gpuRenderPipeline===null){var n=e.descriptor,s=n.program,o=s.vertexStage,a=s.fragmentStage;if(!(o===null||a===null)){var l=n.megaStateDescriptor||{},c=l.stencilBack,h=l.stencilFront,u=Iv(l,["stencilBack","stencilFront"]),d=jc(_a);n.megaStateDescriptor=Ie(Ie(Ie({},d),{stencilBack:Ie(Ie({},d.stencilBack),c),stencilFront:Ie(Ie({},d.stencilFront),h)}),u);var f=n.megaStateDescriptor.attachmentsState[0];n.colorAttachmentFormats.forEach(function(_,b){n.megaStateDescriptor.attachmentsState[b]||(n.megaStateDescriptor.attachmentsState[b]=B_(void 0,f))});var E=Xm((r=n.topology)!==null&&r!==void 0?r:qe.TRIANGLES,n.megaStateDescriptor),g=zm(n.colorAttachmentFormats,n.megaStateDescriptor),p=jm(n.depthStencilAttachmentFormat,n.megaStateDescriptor),y=void 0;n.inputLayout!==null&&(y=n.inputLayout.buffers);var T=n.sampleCount,w={layout:"auto",vertex:Ie(Ie({},o),{buffers:y}),primitive:E,depthStencil:p,multisample:{count:T},fragment:Ie(Ie({},a),{targets:g})};e.gpuRenderPipeline=this.device.createRenderPipeline(w)}}},t.prototype.createReadback=function(){return new sg({id:this.getNextUniqueId(),device:this})},t.prototype.createRenderBundle=function(){return new lg({id:this.getNextUniqueId(),device:this})},t.prototype.createRenderPass=function(e){var i=this.renderPassPool.pop();i===void 0&&(i=new sp(this));var r=this.frameCommandEncoderPool.pop();return r===void 0&&(r=this.device.createCommandEncoder()),i.beginRenderPass(r,e),i},t.prototype.createComputePass=function(){var e=this.computePassPool.pop();e===void 0&&(e=new rp);var i=this.frameCommandEncoderPool.pop();return i===void 0&&(i=this.device.createCommandEncoder()),e.beginComputePass(i),e},t.prototype.submitPass=function(e){var i=e;i instanceof sp?(this.frameCommandEncoderPool.push(i.frameCommandEncoder),i.finish(),this.renderPassPool.push(i)):i instanceof rp&&(this.frameCommandEncoderPool.push(i.frameCommandEncoder),i.finish(),this.computePassPool.push(i))},t.prototype.copySubTexture2D=function(e,i,r,n,s,o,a){var l=this.device.createCommandEncoder(),c=e,h=n,u={texture:h.gpuTexture,origin:[s,o,0],mipLevel:0,aspect:"all"},d={texture:c.gpuTexture,origin:[i,r,0],mipLevel:0,aspect:"all"};j(!!(h.usage&Ke.COPY_SRC)),j(!!(c.usage&Ke.COPY_DST)),l.copyTextureToTexture(u,d,[h.width,h.height,a||1]),this.device.queue.submit([l.finish()])},t.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},t.prototype.queryTextureFormatSupported=function(e,i,r){if(qm(e)){if(!this.featureTextureCompressionBC)return!1;var n=Qm(e);return i%n!==0||r%n!==0?!1:this.featureTextureCompressionBC}switch(e){case v.U16_RGBA_NORM:return!1;case v.F32_RGBA:return!1}return!0},t.prototype.queryPlatformAvailable=function(){return!0},t.prototype.queryVendorInfo=function(){return this},t.prototype.queryRenderPass=function(e){var i=e;return i.descriptor},t.prototype.queryRenderTarget=function(e){var i=e;return i},t.prototype.setResourceName=function(e,i){if(e.name=i,e.type===pe.Buffer){var r=e;r.gpuBuffer.label=i}else if(e.type===pe.Texture){var r=e;r.gpuTexture.label=i,r.gpuTextureView.label=i}else if(e.type===pe.RenderTarget){var r=e;r.gpuTexture.label=i,r.gpuTextureView.label=i}else if(e.type===pe.Sampler){var r=e;r.gpuSampler.label=i}else if(e.type===pe.RenderPipeline){var r=e;r.gpuRenderPipeline!==null&&(r.gpuRenderPipeline.label=i)}},t.prototype.setResourceLeakCheck=function(e,i){},t.prototype.checkForLeaks=function(){},t.prototype.programPatched=function(e){},t.prototype.pipelineQueryReady=function(e){var i=e;return i.gpuRenderPipeline!==null},t.prototype.pipelineForceReady=function(e){var i=e;this.createRenderPipelineInternal(i,!1)},t}(),sn=function(){function t(e){this.pluginOptions=e}return t.prototype.createSwapChain=function(e){return ha(this,void 0,void 0,function(){var i,r,n,s,o,a,l,c;return ua(this,function(h){switch(h.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];i=null,h.label=1;case 1:return h.trys.push([1,3,,4]),r=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:r})];case 2:return i=h.sent(),[3,4];case 3:return n=h.sent(),console.log(n),[3,4];case 4:return i===null?[2,null]:(s=["depth32float-stencil8","texture-compression-bc","float32-filterable"],o=s.filter(function(u){return i.features.has(u)}),[4,i.requestDevice({requiredFeatures:o})]);case 5:if(a=h.sent(),a&&(l=this.pluginOptions.onContextLost,a.lost.then(function(){l&&l()})),a===null)return[2,null];if(c=e.getContext("webgpu"),!c)return[2,null];h.label=6;case 6:return h.trys.push([6,8,,9]),[4,U_(this.pluginOptions.shaderCompilerPath)];case 7:return h.sent(),[3,9];case 8:return h.sent(),[3,9];case 9:return[2,new cg(i,a,e,c,Pm,Kc&&new Kc)]}})})},t}(),fd=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Ya;let hg=class{constructor(){Ya.set(this,[])}getCallbacksNum(){return fd(this,Ya,"f").length}tapPromise(e){fd(this,Ya,"f").push(e)}promise(...e){return Promise.all(fd(this,Ya,"f").map(i=>i(...e)))}};Ya=new WeakMap;var op=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Dh;let It=class{constructor(){Dh.set(this,[])}tap(e){op(this,Dh,"f").push(e)}call(...e){op(this,Dh,"f").forEach(function(i){i.apply(void 0,e)})}};Dh=new WeakMap;var Ca=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},un;let ug=class{constructor(){un.set(this,[])}tap(e){Ca(this,un,"f").push(e)}call(...e){if(Ca(this,un,"f").length){let i=Ca(this,un,"f")[0].apply(void 0,e);for(let r=0;r<Ca(this,un,"f").length-1;r++){const n=Ca(this,un,"f")[r];i=n(...i)}return i}return null}};un=new WeakMap;const dg=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};function Du(t,e){e(t)||t.children.forEach(i=>{Du(i,e)})}const pd=0;function dn(t){return[t[0],t[1],t[2],pd,t[3],t[4],t[5],pd,t[6],t[7],t[8],pd]}function $_(t,e,i,r){return Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2))}var fg=4,pg=.001,_g=1e-7,Eg=10,za=11,vh=1/(za-1),vg=typeof Float32Array=="function";function W_(t,e){return 1-3*e+3*t}function L_(t,e){return 3*e-6*t}function X_(t){return 3*t}function Uu(t,e,i){return((W_(e,i)*t+L_(e,i))*t+X_(e))*t}function V_(t,e,i){return 3*W_(e,i)*t*t+2*L_(e,i)*t+X_(e)}function mg(t,e,i,r,n){var s,o,a=0;do o=e+(i-e)/2,s=Uu(o,r,n)-t,s>0?i=o:e=o;while(Math.abs(s)>_g&&++a<Eg);return o}function gg(t,e,i,r){for(var n=0;n<fg;++n){var s=V_(e,i,r);if(s===0)return e;var o=Uu(e,i,r)-t;e-=o/s}return e}function Tg(t){return t}var yg=function(e,i,r,n){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===i&&r===n)return Tg;for(var s=vg?new Float32Array(za):new Array(za),o=0;o<za;++o)s[o]=Uu(o*vh,e,r);function a(l){for(var c=0,h=1,u=za-1;h!==u&&s[h]<=l;++h)c+=vh;--h;var d=(l-s[h])/(s[h+1]-s[h]),f=c+d*vh,E=V_(f,e,r);return E>=pg?gg(l,f,e,r):E===0?f:mg(l,c,c+vh,e,r)}return function(c){return c===0?0:c===1?1:Uu(a(c),i,n)}};const Oe=ff(yg),Rg={linear:Oe(0,0,1,1),ease:Oe(.25,.1,.25,1),"ease-in":Oe(.42,0,1,1),"ease-out":Oe(0,0,.58,1),"ease-in-out":Oe(.42,0,.58,1)};var Yr;(function(t){t._bytes4=new Uint8Array(4),t._float=new Float32Array(t._bytes4.buffer),t._int=new Int32Array(t._bytes4.buffer),t._bytes2=new Uint8Array(2),t._short=new Int16Array(t._bytes2.buffer);function e(c){return t._float[0]=c,t._int[0]}t.floatToInt=e;function i(c){return t._int[0]=c,t._float[0]}t.intToFloat=i;function r(c){return t._float[0]=c,t._bytes4}t.floatToBytes=r;function n(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._float[0]}t.bytesToFloat=n;function s(c){return t._int[0]=c,t._bytes4}t.intToBytes=s;function o(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._int[0]}t.bytesToInt=o;function a(c){return t._short[0]=c,t._bytes2}t.shortToBytes=a;function l(c,h){return t._bytes2[0]=c,t._bytes2[1]=h,t._short[0]}t.bytesToShort=l})(Yr||(Yr={}));const ap=256;let wg=class{constructor(e=new Uint8Array(ap)){this._bytes=e,this.count=0,this.readOffset=0,this.capacity=ap,this.count=this.capacity=e.length}clear(){this.count=0,this.readOffset=0}byteCount(){return this.count}bytes(){return this._bytes.subarray(0,this.count)}grow(){this.capacity*=2;const e=new Uint8Array(this.capacity);e.set(this._bytes),this._bytes=e}hasMoreToRead(){return this.readOffset<this.count}seekTo(e){this.readOffset=e}skipBytes(e){this.readOffset+=e}appendBytes(e){const i=e.length;return this.count+i>this.capacity&&this.grow(),this._bytes.set(e,this.count),this.count+=i,this}byteAt(e){return this._bytes[e]}appendByte(e){return this.count+1>this.capacity&&this.grow(),this._bytes[this.count]=e,this.count++,this}readByte(){const e=this.byteAt(this.readOffset);return this.readOffset++,e}shortAt(e){return Yr.bytesToShort(this._bytes[e],this._bytes[e+1])}appendShort(e){return this.appendBytes(Yr.shortToBytes(e)),this}appendShorts(e){for(const i of e)this.appendShort(i);return this}readShort(){const e=this.shortAt(this.readOffset);return this.readOffset+=2,e}intAt(e){return Yr.bytesToInt(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendInt(e){return this.appendBytes(Yr.intToBytes(e)),this}appendInts(e){for(const i of e)this.appendInt(i);return this}readInt(){const e=this.intAt(this.readOffset);return this.readOffset+=4,e}floatAt(e){return Yr.bytesToFloat(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendFloat(e){return this.appendBytes(Yr.floatToBytes(e)),this}appendFloats(e){for(const i of e)this.appendFloat(i);return this}readFloat(){const e=this.floatAt(this.readOffset);return this.readOffset+=4,e}isEmpty(){return this.count==0}};const mh=t=>t instanceof Object,lp=t=>t===!!t,gh=t=>typeof t=="function",Xe=t=>t===void 0,cp=t=>t==null,_d={default:-1};function Ag(t="default"){return _d[t]===void 0&&(_d[t]=-1),++_d[t]}var L=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ot=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},di,Dt,Ut,ti,ja,Ga,fi,Ka,Za,qa,Uh,Qa;const hp=1e-4;let H_=class Y_{constructor(e,i){this.clipSpaceNearZ=er.NEGATIVE_ONE,di.set(this,1),Dt.set(this,0),Ut.set(this,0),ti.set(this,0),ja.set(this,0),Ga.set(this,0),fi.set(this,me()),Ka.set(this,me()),Za.set(this,me()),qa.set(this,me()),Uh.set(this,me()),Qa.set(this,void 0),this.projection(e,i),this.updateMatrix()}clone(){const e=new Y_(L(this,ja,"f"),L(this,Ga,"f"));return ot(e,Dt,L(this,Dt,"f"),"f"),ot(e,Ut,L(this,Ut,"f"),"f"),ot(e,di,L(this,di,"f"),"f"),ot(e,ti,L(this,ti,"f"),"f"),e.updateMatrix(),e}projection(e,i){ot(this,ja,e,"f"),ot(this,Ga,i,"f"),oh(L(this,Ka,"f"),e,i),this.updateViewProjectionMatrix()}updateMatrix(){const e=1/L(this,di,"f");nh(L(this,fi,"f")),Nt(L(this,fi,"f"),L(this,fi,"f"),[L(this,Dt,"f"),L(this,Ut,"f")]),ir(L(this,fi,"f"),L(this,fi,"f"),L(this,ti,"f")),sh(L(this,fi,"f"),L(this,fi,"f"),[e,e]),Qi(L(this,Za,"f"),L(this,fi,"f")),this.updateViewProjectionMatrix()}updateViewProjectionMatrix(){tr(L(this,qa,"f"),L(this,Ka,"f"),L(this,Za,"f")),Qi(L(this,Uh,"f"),L(this,qa,"f")),this.onchange&&this.onchange()}get projectionMatrix(){return L(this,Ka,"f")}get viewMatrix(){return L(this,Za,"f")}get viewProjectionMatrix(){return L(this,qa,"f")}get viewProjectionMatrixInv(){return L(this,Uh,"f")}get matrix(){return L(this,fi,"f")}get zoom(){return L(this,di,"f")}set zoom(e){L(this,di,"f")!==e&&(ot(this,di,e,"f"),this.updateMatrix())}get x(){return L(this,Dt,"f")}set x(e){L(this,Dt,"f")!==e&&(ot(this,Dt,e,"f"),this.updateMatrix())}get y(){return L(this,Ut,"f")}set y(e){L(this,Ut,"f")!==e&&(ot(this,Ut,e,"f"),this.updateMatrix())}get rotation(){return L(this,ti,"f")}set rotation(e){L(this,ti,"f")!==e&&(ot(this,ti,e,"f"),this.updateMatrix())}get width(){return L(this,ja,"f")}get height(){return L(this,Ga,"f")}createLandmark(e={}){return Object.assign({zoom:L(this,di,"f"),x:L(this,Dt,"f"),y:L(this,Ut,"f"),rotation:L(this,ti,"f")},e)}gotoLandmark(e,i={}){const{easing:r="linear",duration:n=100,onframe:s=void 0,onfinish:o=void 0}=i,{zoom:a=L(this,di,"f"),x:l=L(this,Dt,"f"),y:c=L(this,Ut,"f"),rotation:h=L(this,ti,"f"),viewportX:u=0,viewportY:d=0}=e,f=u||d,E=()=>{this.applyLandmark({x:l,y:c,zoom:a,rotation:h,viewportX:u,viewportY:d}),o&&o()};if(n===0){E();return}this.cancelLandmarkAnimation();let g;const p=[l,c],y=[a,h],T=w=>{g===void 0&&(g=w);const _=w-g;if(_>n){E();return}const b=Rg[r](_/n),S=Re(),P=ah(1,0);if(Ji(S,[L(this,Dt,"f"),L(this,Ut,"f")],p,b),Ji(P,[this.zoom,L(this,ti,"f")],y,b),this.applyLandmark({x:S[0],y:S[1],zoom:P[0],rotation:P[1],viewportX:u,viewportY:d}),f?Ts(P,y)<=hp:Ts(S,p)<=hp){E();return}_<n&&(s&&s(b),ot(this,Qa,requestAnimationFrame(T),"f"))};requestAnimationFrame(T)}cancelLandmarkAnimation(){L(this,Qa,"f")!==void 0&&cancelAnimationFrame(L(this,Qa,"f"))}viewport2Canvas({x:e,y:i},r){const{width:n,height:s,viewProjectionMatrixInv:o}=r||this,a=je(Re(),[e/n*2-1,(1-i/s)*2-1],o);return{x:a[0],y:a[1]}}canvas2Viewport({x:e,y:i},r){const{width:n,height:s,viewProjectionMatrix:o}=r||this,a=je(Re(),[e,i],o);return{x:(a[0]+1)/2*n,y:(1-(a[1]+1)/2)*s}}applyLandmark(e){const{x:i,y:r,zoom:n,rotation:s,viewportX:o,viewportY:a}=e,l=o||a;let c=0,h=0;if(l){const u=this.viewport2Canvas({x:o,y:a});c=u.x,h=u.y}if(ot(this,di,n,"f"),ot(this,ti,s,"f"),ot(this,Dt,i,"f"),ot(this,Ut,r,"f"),this.updateMatrix(),l){const{x:u,y:d}=this.viewport2Canvas({x:o,y:a});ot(this,Dt,L(this,Dt,"f")+(c-u),"f"),ot(this,Ut,L(this,Ut,"f")+(h-d),"f"),this.updateMatrix()}}};di=new WeakMap,Dt=new WeakMap,Ut=new WeakMap,ti=new WeakMap,ja=new WeakMap,Ga=new WeakMap,fi=new WeakMap,Ka=new WeakMap,Za=new WeakMap,qa=new WeakMap,Uh=new WeakMap,Qa=new WeakMap;const bg=Math.PI*2,ya=180/Math.PI,Ra=Math.PI/180;var z_=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(z_||{});class ve{constructor(e=0,i=0){this.x=0,this.y=0,this.x=e,this.y=i}clone(){return new ve(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,i=e){return this.x=e,this.y=i,this}}ve.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Th=[new ve,new ve,new ve,new ve];class mr{constructor(e=0,i=0,r=0,n=0){this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(n),this.type=z_.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new mr(0,0,0,0)}clone(){return new mr(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,i){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(e,i){if(!i){const O=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=O)return!1;const Y=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>Y}const r=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=r||o<=s)return!1;const a=Th[0].set(e.left,e.top),l=Th[1].set(e.left,e.bottom),c=Th[2].set(e.right,e.top),h=Th[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(i.a*i.d-i.b*i.c);if(u===0||(i.apply(a,a),i.apply(l,l),i.apply(c,c),i.apply(h,h),Math.max(a.x,l.x,c.x,h.x)<=r||Math.min(a.x,l.x,c.x,h.x)>=n||Math.max(a.y,l.y,c.y,h.y)<=s||Math.min(a.y,l.y,c.y,h.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),E=d*r+f*s,g=d*n+f*s,p=d*r+f*o,y=d*n+f*o;if(Math.max(E,g,p,y)<=d*a.x+f*a.y||Math.min(E,g,p,y)>=d*h.x+f*h.y)return!1;const T=u*(a.y-c.y),w=u*(c.x-a.x),_=T*r+w*s,b=T*n+w*s,S=T*r+w*o,P=T*n+w*o;return!(Math.max(_,b,S,P)<=T*a.x+w*a.y||Math.min(_,b,S,P)>=T*h.x+w*h.y)}pad(e=0,i=e){return this.x-=e,this.y-=i,this.width+=e*2,this.height+=i*2,this}fit(e){const i=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(r-i,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(e=1,i=.001){const r=Math.ceil((this.x+this.width-i)*e)/e,n=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=r-this.x,this.height=n-this.y,this}enlarge(e){const i=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=r-i,this.y=n,this.height=s-n,this}}mr.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ni{constructor(e=1,i=0,r=0,n=1,s=0,o=0){this.array=null,this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,i,r,n,s,o){return this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o,this}toArray(e,i){this.array||(this.array=new Float32Array(9));const r=i||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,i){i=i||new ve;const r=e.x,n=e.y;return i.x=this.a*r+this.c*n+this.tx,i.y=this.b*r+this.d*n+this.ty,i}applyInverse(e,i){i=i||new ve;const r=1/(this.a*this.d+this.c*-this.b),n=e.x,s=e.y;return i.x=this.d*r*n+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,i.y=this.a*r*s+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,i}translate(e,i){return this.tx+=e,this.ty+=i,this}scale(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this}rotate(e){const i=Math.cos(e),r=Math.sin(e),n=this.a,s=this.c,o=this.tx;return this.a=n*i-this.b*r,this.b=n*r+this.b*i,this.c=s*i-this.d*r,this.d=s*r+this.d*i,this.tx=o*i-this.ty*r,this.ty=o*r+this.ty*i,this}append(e){const i=this.a,r=this.b,n=this.c,s=this.d;return this.a=e.a*i+e.b*n,this.b=e.a*r+e.b*s,this.c=e.c*i+e.d*n,this.d=e.c*r+e.d*s,this.tx=e.tx*i+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,i,r,n,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d),this}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}decompose(e){const i=this.a,r=this.b,n=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-n,s),l=Math.atan2(r,i),c=Math.abs(a+l);return c<1e-5||Math.abs(bg-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(i*i+r*r),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(o.x*i+o.y*n),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,o=e*n-i*r;return this.a=n/o,this.b=-i/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*s)/o,this.ty=-(e*this.ty-i*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ni;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new ni}static get TEMP_MATRIX(){return new ni}}ni.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ms=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ns=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Bs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Is=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yh=Math.sign;function Sg(){for(let t=0;t<16;t++){const e=[];for(let i=0;i<16;i++){const r=yh(Ms[t]*Ms[i]+Bs[t]*Ns[i]),n=yh(Ns[t]*Ms[i]+Is[t]*Ns[i]),s=yh(Ms[t]*Bs[i]+Bs[t]*Is[i]),o=yh(Ns[t]*Bs[i]+Is[t]*Is[i]);for(let a=0;a<16;a++)if(Ms[a]===r&&Ns[a]===n&&Bs[a]===s&&Is[a]===o){e.push(a);break}}}for(let t=0;t<16;t++)new ni().set(Ms[t],Ns[t],Bs[t],Is[t],0,0)}Sg();class _s{constructor(e,i,r=0,n=0){this._x=r,this._y=n,this.cb=e,this.scope=i}clone(e=this.cb,i=this.scope){return new _s(e,i,this._x,this._y)}set(e=0,i=e){return(this._x!==e||this._y!==i)&&(this._x=e,this._y=i,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}_s.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Wd=class{constructor(){this.worldTransform=new ni,this.localTransform=new ni,this.position=new _s(this.onChange,this,0,0),this.scale=new _s(this.onChange,this,1,1),this.pivot=new _s(this.onChange,this,0,0),this.skew=new _s(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};Wd.IDENTITY=new Wd;let Qt=Wd;Qt.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};let j_=class G_{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=G_.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ve,this.page=new ve,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,r,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},ku=class extends j_{constructor(){super(...arguments),this.client=new ve,this.movement=new ve,this.offset=new ve,this.global=new ve,this.screen=new ve}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,i,r,n,s,o,a,l,c,h,u,d,f,E,g){throw new Error("Method not implemented.")}},pi=class extends ku{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}},Ld=class extends ku{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};var Pg=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Cg=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},kh;const Mg=2048;let Ng=class{constructor(e){this.dispatch=new tn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,kh.set(this,void 0),this.rootTarget=e,this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}setPickHandler(e){Pg(this,kh,e,"f")}addEventMapping(e,i){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:i,priority:0}),this.mappingTable[e].sort((r,n)=>r.priority-n.priority)}dispatchEvent(e,i){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,i),this.dispatch.emit(i||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const i=this.mappingTable[e.type];if(i)for(let r=0,n=i.length;r<n;r++)i[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,i){return Cg(this,kh,"f").call(this,e,i)}propagate(e,i){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=r.length-1;n<s;n++)if(e.currentTarget=r[n],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,i),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(e.currentTarget=r[n],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,i,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let s=r.length-1;s>=0;s--)n.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const i=[e];for(let r=0;r<Mg&&e!==this.rootTarget&&e.parent;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(e.parent),e=e.parent}return i.reverse(),i}notifyTarget(e,i){i=i??e.type;const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${i}capture`:i;this._notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,i)}mapPointerDown(e){if(!(e instanceof pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(e){var i,r,n;if(!(e instanceof pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const s=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const o=s.pointerType==="mouse"||s.pointerType==="pen",a=this.trackingData(e.pointerId),l=this.findMountedTarget(a.overTargets);if(((i=a.overTargets)===null||i===void 0?void 0:i.length)>0&&l!==s.target){const u=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,u,l);if(this.dispatchEvent(d,"pointerout"),o&&this.dispatchEvent(d,"mouseout"),!s.composedPath().includes(l)){const f=this.createPointerEvent(e,"pointerleave",l);for(f.eventPhase=f.AT_TARGET;f.target&&!s.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),o&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}if(l!==s.target){const u=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(s,u);this.dispatchEvent(d,"pointerover"),o&&this.dispatchEvent(d,"mouseover");let f=l==null?void 0:l.parent;for(;f&&f!==this.rootTarget.parent&&f!==s.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const g=this.clonePointerEvent(s,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),o&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(d)}const c=[],h=(r=this.enableGlobalMoveEvents)!==null&&r!==void 0?r:!0;this.moveOnAll?c.push("pointermove"):this.dispatchEvent(s,"pointermove"),h&&c.push("globalpointermove"),s.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(s,"touchmove"),h&&c.push("globaltouchmove")),o&&(this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(s,"mousemove"),h&&c.push("globalmousemove"),this.cursor=(n=s.target)===null||n===void 0?void 0:n.cursor),c.length>0&&this.all(s,c),this._allInteractiveElements.length=0,this._hitElements.length=0,a.overTargets=s.composedPath(),this.freeEvent(s)}mapPointerOver(e){var i;if(!(e instanceof pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(i=n.target)===null||i===void 0?void 0:i.cursor);const o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId);if(i.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){var i;if(!(e instanceof pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.dispatchEvent(n,l?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),o=this.findMountedTarget(s.pressTargetsByButton[e.button]);let a=o;if(o&&!n.composedPath().includes(o)){let l=o;for(;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}l=l.parent}delete s.pressTargetsByButton[e.button],a=l}if(a){const l=this.clonePointerEvent(n,"click");l.target=a,l.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:r});const c=s.clicksByButton[e.button];if(c.target===l.target&&r-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=l.target,c.timeStamp=r,l.detail=c.clickCount,!(!((i=n.detail)===null||i===void 0)&&i.preventClick)){if(l.pointerType==="mouse"){const h=l.button===2;this.dispatchEvent(l,h?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap")}this.freeEvent(l)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(r){let s=r;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof Ld)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(e);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(e){if(!e)return null;let i=e[0];for(let r=1;r<e.length&&e[r].parent===i;r++)i=e[r];return i}createPointerEvent(e,i,r){var n;const s=this.allocateEvent(pi);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=(n=r??this.hitTest(s.global.x,s.global.y))!==null&&n!==void 0?n:this._hitElements[0],typeof i=="string"&&(s.type=i),s}createWheelEvent(e){const i=this.allocateEvent(Ld);return this.copyWheelData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(e,i){const r=this.allocateEvent(pi);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=i??r.type,r}copyWheelData(e,i){i.deltaMode=e.deltaMode,i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ}copyPointerData(e,i){e instanceof pi&&i instanceof pi&&(i.pointerId=e.pointerId,i.width=e.width,i.height=e.height,i.isPrimary=e.isPrimary,i.pointerType=e.pointerType,i.pressure=e.pressure,i.tangentialPressure=e.tangentialPressure,i.tiltX=e.tiltX,i.tiltY=e.tiltY,i.twist=e.twist)}copyMouseData(e,i){e instanceof ku&&i instanceof ku&&(i.altKey=e.altKey,i.button=e.button,i.buttons=e.buttons,i.client.copyFrom(e.client),i.ctrlKey=e.ctrlKey,i.metaKey=e.metaKey,i.movement.copyFrom(e.movement),i.screen.copyFrom(e.screen),i.shiftKey=e.shiftKey,i.global.copyFrom(e.global))}copyData(e,i){i.isTrusted=e.isTrusted,i.srcElement=e.srcElement,i.timeStamp=performance.now(),i.type=e.type,i.detail=e.detail,i.view=e.view,i.which=e.which,i.layer.copyFrom(e.layer),i.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const i=this.eventPool.get(e).pop()||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(e)}_notifyListeners(e,i){const r=e.currentTarget._events[i];if(r)if("fn"in r)r.once&&e.currentTarget.removeListener(i,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let n=0,s=r.length;n<s&&!e.propagationImmediatelyStopped;n++)r[n].once&&e.currentTarget.removeListener(i,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,e)}};kh=new WeakMap;const up=new ni;class Zc{constructor(e=1/0,i=1/0,r=-1/0,n=-1/0){this.matrix=up,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=up,this}containsPoint(e,i){return this.minX<=e&&this.minY<=i&&this.maxX>=e&&this.maxY>=i}addBounds(e,i){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,i)}addFrame(e,i,r,n,s){s||(s=this.matrix);const o=s.a,a=s.b,l=s.c,c=s.d,h=s.tx,u=s.ty;let d=this.minX,f=this.minY,E=this.maxX,g=this.maxY,p=o*e+l*i+h,y=a*e+c*i+u;p<d&&(d=p),y<f&&(f=y),p>E&&(E=p),y>g&&(g=y),p=o*r+l*i+h,y=a*r+c*i+u,p<d&&(d=p),y<f&&(f=y),p>E&&(E=p),y>g&&(g=y),p=o*e+l*n+h,y=a*e+c*n+u,p<d&&(d=p),y<f&&(f=y),p>E&&(E=p),y>g&&(g=y),p=o*r+l*n+h,y=a*r+c*n+u,p<d&&(d=p),y<f&&(f=y),p>E&&(E=p),y>g&&(g=y),this.minX=d,this.minY=f,this.maxX=E,this.maxY=g}}const K_=new Qt,dp=new ni;let vf=class extends tn{constructor(e={}){var i,r,n,s,o,a,l,c;super(),this.uid=Ag(),this.renderDirtyFlag=!0,this.geometryBoundsDirtyFlag=!0,this.renderBoundsDirtyFlag=!0,this.transform=new Qt,this.children=[],this.cursor=(i=e.cursor)!==null&&i!==void 0?i:"default",this.hitArea=e.hitArea,this.pointerEvents=(r=e.pointerEvents)!==null&&r!==void 0?r:"auto",this.visible=(n=e.visible)!==null&&n!==void 0?n:!0,this.renderable=(s=e.renderable)!==null&&s!==void 0?s:!0,this.cullable=(o=e.cullable)!==null&&o!==void 0?o:!0,this.draggable=(a=e.draggable)!==null&&a!==void 0?a:!1,this.droppable=(l=e.droppable)!==null&&l!==void 0?l:!1,this.batchable=(c=e.batchable)!==null&&c!==void 0?c:!1}addEventListener(e,i,r){const n=lp(r)&&r||mh(r)&&r.capture,s=mh(r)?r.signal:void 0,o=mh(r)&&r.once,a=gh(i)?void 0:i;e=n?`${e}capture`:e;const l=gh(i)?i:i.handleEvent;s&&s.addEventListener("abort",()=>{this.off(e,l,a)}),o?this.once(e,l,a):this.on(e,l,a)}removeEventListener(e,i,r){const n=lp(r)&&r||mh(r)&&r.capture,s=gh(i)?void 0:i;e=n?`${e}capture`:e,i=gh(i)?i:i==null?void 0:i.handleEvent,this.off(e,i,s)}dispatchEvent(e){if(!(e instanceof j_))throw new Error("Container cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=[],e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*ya}set angle(e){this.transform.rotation=e*Ra}appendChild(e){return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),e}removeChild(e){const i=this.children.indexOf(e);return i===-1?null:(e.parent=void 0,e.transform._parentID=-1,this.children.splice(i,1),e)}getBounds(e,i){i=i||new Zc,i.clear();let r;return this.parent?e?r=this.parent.worldTransform:(dp.identity(),r=Z_(this,dp)):r=ni.IDENTITY,mf(this,i,r,e),i}};function mf(t,e,i,r){if(!t.visible)return;let n;r?n=t.worldTransform:(t.transform.updateLocalTransform(),n=new ni,n.copyFrom(t.localTransform),n.append(i)),t.renderable&&(e.matrix=n,e.addBounds(t.getRenderBounds()));for(let s=0;s<t.children.length;s++)mf(t.children[s],e,n,r)}function Z_(t,e){const i=t.parent;return i&&(Z_(i,e),i.transform.updateLocalTransform(),e.append(i.localTransform)),e}function q_(t,e,i){let r=!1,n=!1;const s=!!e&&e!=="none",o=!!i&&i!=="none";return t==="visiblepainted"||t==="painted"||t==="auto"?(r=s,n=o):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?n=!0:(t==="visible"||t==="all")&&(r=!0,n=!0),[r,n]}function gf(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Q_(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function lh(){}var qc=.7,$u=1/qc,fa="\\s*([+-]?\\d+)\\s*",Qc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bg=/^#([0-9a-f]{3,8})$/,Ig=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),Fg=new RegExp(`^rgb\\(${Zi},${Zi},${Zi}\\)$`),Og=new RegExp(`^rgba\\(${fa},${fa},${fa},${Qc}\\)$`),xg=new RegExp(`^rgba\\(${Zi},${Zi},${Zi},${Qc}\\)$`),Dg=new RegExp(`^hsl\\(${Qc},${Zi},${Zi}\\)$`),Ug=new RegExp(`^hsla\\(${Qc},${Zi},${Zi},${Qc}\\)$`),fp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gf(lh,Tf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pp,formatHex:pp,formatHex8:kg,formatHsl:$g,formatRgb:_p,toString:_p});function pp(){return this.rgb().formatHex()}function kg(){return this.rgb().formatHex8()}function $g(){return J_(this).formatHsl()}function _p(){return this.rgb().formatRgb()}function Tf(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Bg.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Ep(e):i===3?new Lt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Rh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Rh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ig.exec(t))?new Lt(e[1],e[2],e[3],1):(e=Fg.exec(t))?new Lt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Og.exec(t))?Rh(e[1],e[2],e[3],e[4]):(e=xg.exec(t))?Rh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dg.exec(t))?gp(e[1],e[2]/100,e[3]/100,1):(e=Ug.exec(t))?gp(e[1],e[2]/100,e[3]/100,e[4]):fp.hasOwnProperty(t)?Ep(fp[t]):t==="transparent"?new Lt(NaN,NaN,NaN,0):null}function Ep(t){return new Lt(t>>16&255,t>>8&255,t&255,1)}function Rh(t,e,i,r){return r<=0&&(t=e=i=NaN),new Lt(t,e,i,r)}function Wg(t){return t instanceof lh||(t=Tf(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function Mi(t,e,i,r){return arguments.length===1?Wg(t):new Lt(t,e,i,r??1)}function Lt(t,e,i,r){this.r=+t,this.g=+e,this.b=+i,this.opacity=+r}gf(Lt,Mi,Q_(lh,{brighter(t){return t=t==null?$u:Math.pow($u,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?qc:Math.pow(qc,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lt(ms(this.r),ms(this.g),ms(this.b),Wu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vp,formatHex:vp,formatHex8:Lg,formatRgb:mp,toString:mp}));function vp(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}`}function Lg(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}${Es((isNaN(this.opacity)?1:this.opacity)*255)}`}function mp(){const t=Wu(this.opacity);return`${t===1?"rgb(":"rgba("}${ms(this.r)}, ${ms(this.g)}, ${ms(this.b)}${t===1?")":`, ${t})`}`}function Wu(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ms(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Es(t){return t=ms(t),(t<16?"0":"")+t.toString(16)}function gp(t,e,i,r){return r<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Pi(t,e,i,r)}function J_(t){if(t instanceof Pi)return new Pi(t.h,t.s,t.l,t.opacity);if(t instanceof lh||(t=Tf(t)),!t)return new Pi;if(t instanceof Pi)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(i-r)/a+(i<r)*6:i===s?o=(r-e)/a+2:o=(e-i)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new Pi(o,a,l,t.opacity)}function Xg(t,e,i,r){return arguments.length===1?J_(t):new Pi(t,e,i,r??1)}function Pi(t,e,i,r){this.h=+t,this.s=+e,this.l=+i,this.opacity=+r}gf(Pi,Xg,Q_(lh,{brighter(t){return t=t==null?$u:Math.pow($u,t),new Pi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?qc:Math.pow(qc,t),new Pi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Lt(Ed(t>=240?t-240:t+120,n,r),Ed(t,n,r),Ed(t<120?t+240:t-120,n,r),this.opacity)},clamp(){return new Pi(Tp(this.h),wh(this.s),wh(this.l),Wu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wu(this.opacity);return`${t===1?"hsl(":"hsla("}${Tp(this.h)}, ${wh(this.s)*100}%, ${wh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Tp(t){return t=(t||0)%360,t<0?t+360:t}function wh(t){return Math.max(0,Math.min(1,t||0))}function Ed(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}var ie=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},oi=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Oi,xi,gt,Vs,$h,Hs,Wh,fn,Ja,el,tl;let yf=class extends vf{constructor(e={}){super(e),Oi.set(this,void 0),xi.set(this,void 0),gt.set(this,void 0),Vs.set(this,void 0),$h.set(this,void 0),Hs.set(this,void 0),Wh.set(this,void 0),fn.set(this,void 0),Ja.set(this,void 0),el.set(this,void 0),tl.set(this,void 0);const{cx:i,cy:r,r:n,fill:s,stroke:o,strokeWidth:a,opacity:l,fillOpacity:c,strokeOpacity:h}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black",this.stroke=o??"black",this.strokeWidth=a??0,this.opacity=l??1,this.fillOpacity=c??1,this.strokeOpacity=h??1}get cx(){return ie(this,Oi,"f")}set cx(e){ie(this,Oi,"f")!==e&&(oi(this,Oi,e,"f"),this.renderDirtyFlag=!0)}get cy(){return ie(this,xi,"f")}set cy(e){ie(this,xi,"f")!==e&&(oi(this,xi,e,"f"),this.renderDirtyFlag=!0)}get r(){return ie(this,gt,"f")}set r(e){ie(this,gt,"f")!==e&&(oi(this,gt,e,"f"),this.renderDirtyFlag=!0)}get fill(){return ie(this,Vs,"f")}set fill(e){ie(this,Vs,"f")!==e&&(oi(this,Vs,e,"f"),oi(this,$h,Mi(e),"f"),this.renderDirtyFlag=!0)}get fillRGB(){return ie(this,$h,"f")}get stroke(){return ie(this,Hs,"f")}set stroke(e){ie(this,Hs,"f")!==e&&(oi(this,Hs,e,"f"),oi(this,Wh,Mi(e),"f"),this.renderDirtyFlag=!0)}get strokeRGB(){return ie(this,Wh,"f")}get strokeWidth(){return ie(this,fn,"f")}set strokeWidth(e){ie(this,fn,"f")!==e&&(oi(this,fn,e,"f"),this.renderDirtyFlag=!0)}get opacity(){return ie(this,Ja,"f")}set opacity(e){ie(this,Ja,"f")!==e&&(oi(this,Ja,e,"f"),this.renderDirtyFlag=!0)}get fillOpacity(){return ie(this,el,"f")}set fillOpacity(e){ie(this,el,"f")!==e&&(oi(this,el,e,"f"),this.renderDirtyFlag=!0)}get strokeOpacity(){return ie(this,tl,"f")}set strokeOpacity(e){ie(this,tl,"f")!==e&&(oi(this,tl,e,"f"),this.renderDirtyFlag=!0)}containsPoint(e,i){const r=ie(this,fn,"f")/2,n=$_(ie(this,Oi,"f"),ie(this,xi,"f"),e,i),[s,o]=q_(this.pointerEvents,ie(this,Vs,"f"),ie(this,Hs,"f"));return s?n<=ie(this,gt,"f"):o?n>=ie(this,gt,"f")-r&&n<=ie(this,gt,"f")+r:!1}getGeometryBounds(){return this.geometryBoundsDirtyFlag&&(this.geometryBoundsDirtyFlag=!1,this.geometryBounds=new Zc(ie(this,Oi,"f")-ie(this,gt,"f"),ie(this,xi,"f")-ie(this,gt,"f"),ie(this,Oi,"f")+ie(this,gt,"f"),ie(this,xi,"f")+ie(this,gt,"f"))),this.geometryBounds}getRenderBounds(){if(this.renderBoundsDirtyFlag){const e=ie(this,fn,"f")/2;this.renderBoundsDirtyFlag=!1,this.renderBounds=new Zc(ie(this,Oi,"f")-ie(this,gt,"f")-e,ie(this,xi,"f")-ie(this,gt,"f")-e,ie(this,Oi,"f")+ie(this,gt,"f")+e,ie(this,xi,"f")+ie(this,gt,"f")+e)}return this.renderBounds}};Oi=new WeakMap,xi=new WeakMap,gt=new WeakMap,Vs=new WeakMap,$h=new WeakMap,Hs=new WeakMap,Wh=new WeakMap,fn=new WeakMap,Ja=new WeakMap,el=new WeakMap,tl=new WeakMap;const Vg=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

layout(location = 0) in vec2 a_Position;

out vec2 v_Position;

vec2 project_clipspace_to_world(vec2 p) {
  return (u_ViewProjectionInvMatrix * vec3(p, 1)).xy;
}

void main() {
  v_Position = project_clipspace_to_world(a_Position);
  gl_Position = vec4(a_Position, 0, 1);
}
`,Hg=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

out vec4 outputColor;

in vec2 v_Position;

const vec4 GRID_COLOR = vec4(0.87, 0.87, 0.87, 1.0);
const vec4 PAGE_COLOR = vec4(0.986, 0.986, 0.986, 1.0);
const int CHECKERBOARD_STYLE_NONE = 0;
const int CHECKERBOARD_STYLE_GRID = 1;
const int CHECKERBOARD_STYLE_DOTS = 2;
const float BASE_GRID_PIXEL_SIZE = 100.0;
const float BASE_DOT_SIZE = 8.0;

vec2 scale_grid_size(float zoom) {
  if (zoom < 0.125) return vec2(BASE_GRID_PIXEL_SIZE * 125.0, 0.125);
  else if (zoom < 0.25) return vec2(BASE_GRID_PIXEL_SIZE * 25.0, 0.25);
  else if (zoom < 0.5) return vec2(BASE_GRID_PIXEL_SIZE * 5.0, 0.5);
  return vec2(BASE_GRID_PIXEL_SIZE, 4.0);
}

vec4 render_grid_checkerboard(vec2 coord) {
  float alpha = 0.0;

  vec2 size = scale_grid_size(u_ZoomScale);
  float gridSize1 = size.x;
  float gridSize2 = gridSize1 / 10.0;
  float zoomStep = size.y;
  int checkboardStyle = int(floor(u_CheckboardStyle + 0.5));

  if (checkboardStyle == CHECKERBOARD_STYLE_GRID) {
    vec2 grid1 = abs(fract(coord / gridSize1 - 0.5) - 0.5) / fwidth(coord) * gridSize1 / 2.0;
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    float v1 = 1.0 - min(min(grid1.x, grid1.y), 1.0);
    float v2 = 1.0 - min(min(grid2.x, grid2.y), 1.0);

    if (v1 > 0.0) {
      alpha = v1;
    } else {
      alpha = v2 * clamp(u_ZoomScale / zoomStep, 0.0, 1.0);
    }
  } else if (checkboardStyle == CHECKERBOARD_STYLE_DOTS) {
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    alpha = smoothstep(1.0, 0.0, length(grid2) - BASE_DOT_SIZE * u_ZoomScale / zoomStep);
  }

  return mix(PAGE_COLOR, GRID_COLOR, alpha);
}

void main() {
  outputColor = render_grid_checkerboard(v_Position);
}
`;var at=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Ma=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},pn,Ys,zs,il,rl,nl;let eE=class{constructor(){pn.set(this,void 0),Ys.set(this,void 0),zs.set(this,void 0),il.set(this,void 0),rl.set(this,void 0),nl.set(this,new wg)}appendVertex(e,i){at(this,nl,"f").appendFloat(e).appendFloat(i)}render(e,i,r){if(!at(this,pn,"f")){Ma(this,pn,e.createProgram({vertex:{glsl:Vg},fragment:{glsl:Hg}}),"f"),Ma(this,zs,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{format:v.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:at(this,pn,"f")}),"f"),Ma(this,Ys,e.createRenderPipeline({inputLayout:at(this,zs,"f"),program:at(this,pn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],depthStencilAttachmentFormat:v.D24_S8,topology:qe.TRIANGLE_STRIP}),"f"),at(this,nl,"f").clear(),this.appendVertex(-1,-1),this.appendVertex(-1,1),this.appendVertex(1,-1),this.appendVertex(1,1);const n=at(this,nl,"f").bytes(),s=e.createBuffer({viewOrSize:n.byteLength,usage:U.VERTEX,hint:Q.DYNAMIC});Ma(this,rl,s,"f"),s.setSubData(0,n),Ma(this,il,e.createBindings({pipeline:at(this,Ys,"f"),uniformBufferBindings:[{buffer:r}]}),"f")}i.setBindings(at(this,il,"f")),i.setPipeline(at(this,Ys,"f")),i.setVertexInput(at(this,zs,"f"),[{buffer:at(this,rl,"f")}],null),i.draw(4)}destroy(){at(this,pn,"f").destroy(),at(this,rl,"f").destroy(),at(this,Ys,"f").destroy(),at(this,zs,"f").destroy(),at(this,il,"f").destroy()}};pn=new WeakMap,Ys=new WeakMap,zs=new WeakMap,il=new WeakMap,rl=new WeakMap,nl=new WeakMap;let tE=class extends vf{constructor(){super(...arguments),this.renderable=!1}getDrawcallCtors(){return[]}containsPoint(e,i){throw new Error("Method not implemented.")}getGeometryBounds(){throw new Error("Method not implemented.")}getRenderBounds(){throw new Error("Method not implemented.")}destroy(){}};const yp=1e5;class Yg{constructor(e,i){this.device=e,this.instanced=i,this.shapes=[],this.maxInstances=1/0,this.geometryDirty=!0,this.materialDirty=!0}validate(){return this.count()<=this.maxInstances-1}submit(e,i){this.geometryDirty&&this.createGeometry(),this.materialDirty&&this.createMaterial(i),this.render(e),this.geometryDirty&&(this.geometryDirty=!1),this.materialDirty&&(this.materialDirty=!1)}add(e){this.shapes.includes(e)||(this.shapes.push(e),this.geometryDirty=!0)}remove(e){if(this.shapes.includes(e)){const i=this.shapes.indexOf(e);this.shapes.splice(i,1),this.geometryDirty=!0}}count(){return this.shapes.length}}const zg=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(location = 0) in vec2 a_FragCoord;

#ifdef USE_INSTANCES
  layout(location = 14) in vec4 a_Abcd;
  layout(location = 15) in vec2 a_Txty;
  layout(location = 1) in vec4 a_PositionSize;
  layout(location = 2) in vec4 a_FillColor;
  layout(location = 3) in vec4 a_StrokeColor;
  layout(location = 4) in vec4 a_ZIndexStrokeWidth;
  layout(location = 5) in vec4 a_Opacity;
#else
  layout(std140) uniform ShapeUniforms {
    mat3 u_ModelMatrix;
    vec4 u_PositionSize;
    vec4 u_FillColor;
    vec4 u_StrokeColor;
    vec4 u_ZIndexStrokeWidth;
    vec4 u_Opacity;
  };
#endif

out vec2 v_FragCoord;
#ifdef USE_INSTANCES
  out vec4 v_FillColor;
  out vec4 v_StrokeColor;
  out float v_StrokeWidth;
  out vec4 v_Opacity;
#else
#endif
out vec2 v_Radius;

void main() {
  mat3 model;
  vec2 position;
  vec2 size;
  vec4 fillColor;
  vec4 strokeColor;
  float zIndex;
  float strokeWidth;

  #ifdef USE_INSTANCES
    model = mat3(a_Abcd.x, a_Abcd.y, 0, a_Abcd.z, a_Abcd.w, 0, a_Txty.x, a_Txty.y, 1);
    position = a_PositionSize.xy;
    size = a_PositionSize.zw;
    fillColor = a_FillColor;
    strokeColor = a_StrokeColor;
    zIndex = a_ZIndexStrokeWidth.x;
    strokeWidth = a_ZIndexStrokeWidth.y;

    v_FillColor = fillColor;
    v_StrokeColor = strokeColor;
    v_StrokeWidth = strokeWidth;
    v_Opacity = a_Opacity;
  #else
    model = u_ModelMatrix;
    position = u_PositionSize.xy;
    size = u_PositionSize.zw;
    fillColor = u_FillColor;
    strokeColor = u_StrokeColor;
    zIndex = u_ZIndexStrokeWidth.x;
    strokeWidth = u_ZIndexStrokeWidth.y;
  #endif

  vec2 radius = size + vec2(strokeWidth / 2.0);

  v_FragCoord = a_FragCoord;
  v_Radius = radius;

  gl_Position = vec4((u_ProjectionMatrix 
    * u_ViewMatrix
    * model 
    * vec3(position + size * a_FragCoord, 1)).xy, zIndex, 1);
}
`,jg=`
#ifdef USE_INSTANCES
#else
  layout(std140) uniform ShapeUniforms {
    mat3 u_ModelMatrix;
    vec4 u_PositionSize;
    vec4 u_FillColor;
    vec4 u_StrokeColor;
    vec4 u_ZIndexStrokeWidth;
    vec4 u_Opacity;
  };
#endif

out vec4 outputColor;

in vec2 v_FragCoord;
#ifdef USE_INSTANCES
  in vec4 v_FillColor;
  in vec4 v_StrokeColor;
  in float v_StrokeWidth;
  in vec4 v_Opacity;
#else
#endif
in vec2 v_Radius;

float epsilon = 0.000001;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float strokeWidth;
  vec4 fillColor;
  vec4 strokeColor;
  float opacity;
  float fillOpacity;
  float strokeOpacity;
  
  #ifdef USE_INSTANCES
    fillColor = v_FillColor;
    strokeColor = v_StrokeColor;
    strokeWidth = v_StrokeWidth;
    opacity = v_Opacity.x;
    fillOpacity = v_Opacity.y;
    strokeOpacity = v_Opacity.z;
  #else
    fillColor = u_FillColor;
    strokeColor = u_StrokeColor;
    strokeWidth = u_ZIndexStrokeWidth.y;
    opacity = u_Opacity.x;
    fillOpacity = u_Opacity.y;
    strokeOpacity = u_Opacity.z;
  #endif

  vec2 r = (v_Radius - strokeWidth) / v_Radius.y;

  float outerDistance = sdf_circle(v_FragCoord, 1.0);
  float innerDistance = sdf_circle(v_FragCoord, r.x);
  float antialiasedBlur = -fwidth(outerDistance);

  float opacity_t = clamp(outerDistance / antialiasedBlur, 0.0, 1.0);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasedBlur,
    0.0,
    innerDistance
  );

  outputColor = mix(vec4(fillColor.rgb, fillColor.a * fillOpacity), strokeColor * strokeOpacity, color_t);
  outputColor.a = outputColor.a * opacity * opacity_t;

  if (outputColor.a < epsilon)
    discard;
}
`;var Ee=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ai=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Di,js,Ar,br,sl,_n,Sr,Pr,Gs;class Gg extends Yg{constructor(){super(...arguments),Di.set(this,void 0),js.set(this,void 0),Ar.set(this,void 0),br.set(this,void 0),sl.set(this,void 0),_n.set(this,void 0),Sr.set(this,void 0),Pr.set(this,void 0),Gs.set(this,void 0)}createGeometry(){Ee(this,js,"f")||(ai(this,js,this.device.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),ai(this,sl,this.device.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f")),this.instanced&&(Ee(this,Ar,"f")&&Ee(this,Ar,"f").destroy(),ai(this,Ar,this.device.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*20*this.shapes.length,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),Ee(this,br,"f")&&Ee(this,br,"f").destroy(),ai(this,br,this.device.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*6*this.shapes.length,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"))}createMaterial(e){let i="";this.instanced&&(i+=`#define USE_INSTANCES
`),Ee(this,Di,"f")&&(Ee(this,Di,"f").destroy(),Ee(this,Pr,"f").destroy(),Ee(this,Sr,"f").destroy()),ai(this,Di,this.device.createProgram({vertex:{glsl:i+zg},fragment:{glsl:i+jg}}),"f");const r=[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]}];this.instanced?(r.push({arrayStride:4*20,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RGBA},{shaderLocation:2,offset:4*4,format:v.F32_RGBA},{shaderLocation:3,offset:4*8,format:v.F32_RGBA},{shaderLocation:4,offset:4*12,format:v.F32_RGBA},{shaderLocation:5,offset:4*16,format:v.F32_RGBA}]},{arrayStride:4*6,stepMode:Se.INSTANCE,attributes:[{shaderLocation:14,offset:0,format:v.F32_RGBA},{shaderLocation:15,offset:4*4,format:v.F32_RG}]}),ai(this,Pr,this.device.createInputLayout({vertexBufferDescriptors:r,indexBufferFormat:v.U32_R,program:Ee(this,Di,"f")}),"f")):(ai(this,Pr,this.device.createInputLayout({vertexBufferDescriptors:r,indexBufferFormat:v.U32_R,program:Ee(this,Di,"f")}),"f"),Ee(this,_n,"f")||ai(this,_n,this.device.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*32,usage:U.UNIFORM,hint:Q.DYNAMIC}),"f")),ai(this,Sr,this.device.createRenderPipeline({inputLayout:Ee(this,Pr,"f"),program:Ee(this,Di,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],depthStencilAttachmentFormat:v.D24_S8,megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}],depthWrite:!0,depthCompare:pt.GREATER}}),"f"),this.instanced?ai(this,Gs,this.device.createBindings({pipeline:Ee(this,Sr,"f"),uniformBufferBindings:[{buffer:e}]}),"f"):ai(this,Gs,this.device.createBindings({pipeline:Ee(this,Sr,"f"),uniformBufferBindings:[{buffer:e},{buffer:Ee(this,_n,"f")}]}),"f")}render(e){if(this.shapes.some(r=>r.renderDirtyFlag)||this.geometryDirty){if(this.instanced){Ee(this,br,"f").setSubData(0,new Uint8Array(new Float32Array(this.shapes.map(n=>[n.worldTransform.a,n.worldTransform.b,n.worldTransform.c,n.worldTransform.d,n.worldTransform.tx,n.worldTransform.ty]).flat()).buffer));const r=[];this.shapes.forEach(n=>{if(n instanceof yf){const{cx:s,cy:o,r:a,fillRGB:{r:l,g:c,b:h,opacity:u},strokeRGB:{r:d,g:f,b:E,opacity:g},strokeWidth:p,opacity:y,fillOpacity:T,strokeOpacity:w}=n;r.push(s,o,a,a,l/255,c/255,h/255,u,d/255,f/255,E/255,g,n.globalRenderOrder/yp,p,0,0,y,T,w,0)}}),Ee(this,Ar,"f").setSubData(0,new Uint8Array(new Float32Array(r).buffer))}else{const{cx:r,cy:n,r:s,fillRGB:{r:o,g:a,b:l,opacity:c},strokeRGB:{r:h,g:u,b:d,opacity:f},strokeWidth:E,worldTransform:g,opacity:p,fillOpacity:y,strokeOpacity:T}=this.shapes[0];Ee(this,_n,"f").setSubData(0,new Uint8Array(new Float32Array([...dn(g.toArray(!0)),r,n,s,s,o/255,a/255,l/255,c,h/255,u/255,d/255,f,this.shapes[0].globalRenderOrder/yp,E,0,0,p,y,T,0]).buffer))}this.shapes.forEach(r=>{r.renderDirtyFlag=!1})}const i=[{buffer:Ee(this,js,"f")}];this.instanced&&i.push({buffer:Ee(this,Ar,"f")},{buffer:Ee(this,br,"f")}),e.setPipeline(Ee(this,Sr,"f")),e.setVertexInput(Ee(this,Pr,"f"),i,{buffer:Ee(this,sl,"f")}),e.setBindings(Ee(this,Gs,"f")),e.drawIndexed(6,this.shapes.length)}destroy(){var e,i,r,n,s,o,a,l;Ee(this,Di,"f")&&(Ee(this,Di,"f").destroy(),(e=Ee(this,br,"f"))===null||e===void 0||e.destroy(),(i=Ee(this,Ar,"f"))===null||i===void 0||i.destroy(),(r=Ee(this,js,"f"))===null||r===void 0||r.destroy(),(n=Ee(this,sl,"f"))===null||n===void 0||n.destroy(),(s=Ee(this,_n,"f"))===null||s===void 0||s.destroy(),(o=Ee(this,Sr,"f"))===null||o===void 0||o.destroy(),(a=Ee(this,Pr,"f"))===null||a===void 0||a.destroy(),(l=Ee(this,Gs,"f"))===null||l===void 0||l.destroy())}}Di=new WeakMap,js=new WeakMap,Ar=new WeakMap,br=new WeakMap,sl=new WeakMap,_n=new WeakMap,Sr=new WeakMap,Pr=new WeakMap,Gs=new WeakMap;var lt=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Kg=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Cr,En,vn,Lh;const iE=new WeakMap;iE.set(yf,[Gg]);class Zg{constructor(e){this.device=e,Cr.set(this,[]),En.set(this,Object.create(null)),vn.set(this,Object.create(null)),Lh.set(this,new WeakMap)}createDrawcalls(e,i=!1){var r;return(r=iE.get(e.constructor))===null||r===void 0?void 0:r.map(n=>{const s=new n(this.device,i);return s.add(e),s})}getOrCreateNonBatchableDrawcalls(e){let i=lt(this,En,"f")[e.uid];return i||(i=this.createDrawcalls(e)||[],lt(this,En,"f")[e.uid]=i),i}getOrCreateBatchableDrawcalls(e){let i=lt(this,vn,"f")[e.uid];if(!i){const r=e.constructor;let n=lt(this,Lh,"f").get(r);n||(n=[]),i=n.find(s=>s.every(o=>o.validate())),i||(i=this.createDrawcalls(e,!0)||[],n.push(i),lt(this,Lh,"f").set(r,n)),i.forEach(s=>{s.add(e)}),lt(this,vn,"f")[e.uid]=i}return i}add(e){if(e.batchable){const i=this.getOrCreateBatchableDrawcalls(e);lt(this,Cr,"f").indexOf(i[0])===-1&&lt(this,Cr,"f").push(...i)}else lt(this,Cr,"f").push(...this.getOrCreateNonBatchableDrawcalls(e))}remove(e){e.batchable?(this.getOrCreateBatchableDrawcalls(e).forEach(i=>{i.remove(e)}),delete lt(this,vn,"f")[e.uid]):(this.getOrCreateNonBatchableDrawcalls(e).forEach(i=>{i.destroy()}),delete lt(this,En,"f")[e.uid])}destroy(){for(const e in lt(this,En,"f"))lt(this,En,"f")[e].forEach(i=>{i.destroy()});for(const e in lt(this,vn,"f"))lt(this,vn,"f")[e].forEach(i=>{i.destroy()})}clear(){Kg(this,Cr,[],"f")}flush(e,i){lt(this,Cr,"f").forEach(r=>{r.submit(e,i)})}stats(){return{drawcallCount:lt(this,Cr,"f").length}}}Cr=new WeakMap,En=new WeakMap,vn=new WeakMap,Lh=new WeakMap;var qg=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Ft=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},z=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Ks,Ge,Mr,mn,gn,Tn,ol,al,Nr,ll,Xh,yn,Xd;(function(t){t[t.NONE=0]="NONE",t[t.GRID=1]="GRID",t[t.DOTS=2]="DOTS"})(Xd||(Xd={}));let Qg=class{constructor(){Ks.set(this,void 0),Ge.set(this,void 0),Mr.set(this,void 0),mn.set(this,void 0),gn.set(this,void 0),Tn.set(this,void 0),ol.set(this,Xd.GRID),al.set(this,void 0),Nr.set(this,void 0),ll.set(this,1),Xh.set(this,new Set),yn.set(this,new Set)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o,camera:a}=e;i.initAsync.tapPromise(()=>qg(this,void 0,void 0,function*(){let l;n==="webgl"?l=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(d){}}):l=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:c,height:h}=r,u=yield l.createSwapChain(r);u.configureSwapChain(c,h),Ft(this,Ks,u,"f"),Ft(this,Ge,u.getDevice(),"f"),Ft(this,Nr,new Zg(z(this,Ge,"f")),"f"),Ft(this,Mr,z(this,Ge,"f").createRenderTargetFromTexture(z(this,Ge,"f").createTexture({format:v.U8_RGBA_RT,width:c,height:h,usage:Ae.RENDER_TARGET})),"f"),Ft(this,mn,z(this,Ge,"f").createRenderTargetFromTexture(z(this,Ge,"f").createTexture({format:v.D24_S8,width:c,height:h,usage:Ae.RENDER_TARGET})),"f"),Ft(this,Tn,z(this,Ge,"f").createBuffer({viewOrSize:new Float32Array([...dn(a.projectionMatrix),...dn(a.viewMatrix),...dn(a.viewProjectionMatrixInv),a.zoom,z(this,ol,"f"),0,0]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),Ft(this,al,new eE,"f")})),i.resize.tap((l,c)=>{z(this,Ks,"f").configureSwapChain(l*o,c*o),z(this,Mr,"f")&&(z(this,Mr,"f").destroy(),Ft(this,Mr,z(this,Ge,"f").createRenderTargetFromTexture(z(this,Ge,"f").createTexture({format:v.U8_RGBA_RT,width:l*o,height:c*o,usage:Ae.RENDER_TARGET})),"f"),z(this,mn,"f").destroy(),Ft(this,mn,z(this,Ge,"f").createRenderTargetFromTexture(z(this,Ge,"f").createTexture({format:v.D24_S8,width:l*o,height:c*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{z(this,Nr,"f").destroy(),z(this,Tn,"f").destroy(),z(this,al,"f").destroy(),z(this,Mr,"f").destroy(),z(this,mn,"f").destroy(),z(this,Ge,"f").destroy(),z(this,Ge,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:l,height:c}=z(this,Ks,"f").getCanvas(),h=z(this,Ks,"f").getOnscreenTexture();z(this,Tn,"f").setSubData(0,new Uint8Array(new Float32Array([...dn(a.projectionMatrix),...dn(a.viewMatrix),...dn(a.viewProjectionMatrixInv),a.zoom,z(this,ol,"f"),0,0]).buffer)),z(this,Ge,"f").beginFrame(),Ft(this,gn,z(this,Ge,"f").createRenderPass({colorAttachment:[z(this,Mr,"f")],colorResolveTo:[h],colorClearColor:[rn],depthStencilAttachment:z(this,mn,"f"),depthClearValue:1}),"f"),z(this,gn,"f").setViewport(0,0,l,c),z(this,al,"f").render(z(this,Ge,"f"),z(this,gn,"f"),z(this,Tn,"f")),z(this,Nr,"f").clear(),Ft(this,ll,1,"f"),z(this,yn,"f").clear()}),i.endFrame.tap(()=>{z(this,yn,"f").forEach(l=>{z(this,Nr,"f").add(l)}),[...z(this,Xh,"f")].filter(l=>!z(this,yn,"f").has(l)).forEach(l=>{z(this,Nr,"f").remove(l)}),z(this,Nr,"f").flush(z(this,gn,"f"),z(this,Tn,"f")),z(this,Ge,"f").submitPass(z(this,gn,"f")),z(this,Ge,"f").endFrame(),Ft(this,Xh,z(this,yn,"f"),"f")}),i.render.tap(l=>{var c,h;l._localID!==l._currentLocalID&&(l.renderDirtyFlag=!0),l.transform.updateTransform(l.parent?l.parent.transform:K_),l.renderable&&(z(this,yn,"f").add(l),l.globalRenderOrder=(Ft(this,ll,(h=z(this,ll,"f"),c=h++,h),"f"),c))})}setCheckboardStyle(e){Ft(this,ol,e,"f")}};Ks=new WeakMap,Ge=new WeakMap,Mr=new WeakMap,mn=new WeakMap,gn=new WeakMap,Tn=new WeakMap,ol=new WeakMap,al=new WeakMap,Nr=new WeakMap,ll=new WeakMap,Xh=new WeakMap,yn=new WeakMap;var li=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},on=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},cl,Rn,Br,Zs;const Jg=.02,eT=4,tT=100,$c=[.02,.05,.1,.15,.2,.33,.5,.75,1,1.25,1.5,2,2.5,3,4],iT=t=>$c.find(e=>e>t)||$c[$c.length-1],rT=t=>[...$c].reverse().find(e=>e<t)||$c[0];let nT=class{constructor(){cl.set(this,void 0),Rn.set(this,{}),Br.set(this,void 0),Zs.set(this,!1)}apply(e){const{canvas:i,camera:r,root:n,api:{client2Viewport:s}}=e;n.draggable=!0;const o=me();let a,l,c;const h=Re();let u,d=!1;function f(_){const b=i.getBoundingClientRect(),S=_.nativeEvent.clientX-b.left,P=_.nativeEvent.clientY-b.top,O=S/i.clientWidth,Y=P/i.clientHeight,ce=O*2-1,H=Y*-2+1;return[ce,H]}function E(_){const b=je(Re(),f(_),o);r.x=a+h[0]-b[0],r.y=l+h[1]-b[1]}function g(_){const b=(_.nativeEvent.clientX-u[0])/100,S=me();Nt(S,S,[h[0],h[1]]),ir(S,S,b),Nt(S,S,[-h[0],-h[1]]),r.x=a,r.y=l,r.rotation=c,tr(S,S,r.matrix),r.rotation=c+b,r.x=S[6],r.y=S[7]}n.addEventListener("dragstart",_=>{li(this,Br,"f")||(d=_.shiftKey,rh(o,r.viewProjectionMatrixInv),a=r.x,l=r.y,c=r.rotation,je(h,f(_),o),u=[_.nativeEvent.clientX,_.nativeEvent.clientY])}),n.addEventListener("drag",_=>{li(this,Br,"f")||(d?g(_):E(_))}),n.addEventListener("dragend",_=>{li(this,Br,"f")||(d=!1)});const p=(_,b)=>{const S=Math.max(Jg,Math.min(eT,r.zoom*Math.pow(2,b*-.01))),P=s(_);r.gotoLandmark(r.createLandmark({viewportX:P.x,viewportY:P.y,zoom:S}),{duration:0})};n.addEventListener("wheel",_=>{_.preventDefault(),p({x:_.nativeEvent.clientX,y:_.nativeEvent.clientY},_.deltaY)});const y=_=>{_.pointerType==="mouse"?on(this,cl,!0,"f"):li(this,Rn,"f")[_.pointerId]||(li(this,Rn,"f")[_.pointerId]={last:null}),this.touchCount>=2?on(this,Br,!0,"f"):on(this,Br,!1,"f")},T=_=>{if(_.pointerType==="mouse"&&on(this,cl,!1,"f"),_.pointerType!=="mouse"&&delete li(this,Rn,"f")[_.pointerId],li(this,Zs,"f")&&this.touchCount<=1)return on(this,Zs,!1,"f"),on(this,Br,!1,"f"),!0},w=_=>{if(this.touchCount>=2){const b=_.global.x,S=_.global.y,P=li(this,Rn,"f"),O=Object.keys(P),Y=Number(O[0]),ce=Number(O[1]),H=P[Y],ee=P[ce],Pe=H.last&&ee.last?Math.sqrt(Math.pow(ee.last.x-H.last.x,2)+Math.pow(ee.last.y-H.last.y,2)):null;if(Y===_.pointerId?H.last={x:b,y:S}:ce===_.pointerId&&(ee.last={x:b,y:S}),Pe){const Xt=new ve(H.last.x+(ee.last.x-H.last.x)/2,H.last.y+(ee.last.y-H.last.y)/2),_t=Math.sqrt(Math.pow(ee.last.x-H.last.x,2)+Math.pow(ee.last.y-H.last.y,2));p(Xt,(Pe/_t-1)*tT)}else li(this,Zs,"f")||on(this,Zs,!0,"f")}};n.addEventListener("pointerdown",y),n.addEventListener("pointermove",w),n.addEventListener("pointerup",T),n.addEventListener("pointerupoutside",T),n.addEventListener("pointercancel",T)}get touchCount(){return(li(this,cl,"f")?1:0)+Object.keys(li(this,Rn,"f")).length}};cl=new WeakMap,Rn=new WeakMap,Br=new WeakMap,Zs=new WeakMap;let sT=class{apply(e){const{canvas:i,hooks:r,globalThis:n,supportsPointerEvents:s,supportsTouchEvents:o}=e,a=_=>{_.preventDefault(),r.pointerMove.call(_)},l=_=>{r.pointerUp.call(_)},c=_=>{r.pointerDown.call(_)},h=_=>{r.pointerOver.call(_)},u=_=>{r.pointerOut.call(_)},d=_=>{r.pointerCancel.call(_)},f=_=>{r.pointerWheel.call(_)},E=_=>{n.document.addEventListener("pointermove",a,!0),_.addEventListener("pointerdown",c,!0),_.addEventListener("pointerleave",u,!0),_.addEventListener("pointerover",h,!0),n.addEventListener("pointerup",l,!0),n.addEventListener("pointercancel",d,!0)},g=_=>{_.addEventListener("touchstart",c,!0),_.addEventListener("touchend",l,!0),_.addEventListener("touchmove",a,!0),_.addEventListener("touchcancel",d,!0)},p=_=>{n.document.addEventListener("mousemove",a,!0),_.addEventListener("mousedown",c,!0),_.addEventListener("mouseout",u,!0),_.addEventListener("mouseover",h,!0),n.addEventListener("mouseup",l,!0)},y=_=>{n.document.removeEventListener("pointermove",a,!0),_.removeEventListener("pointerdown",c,!0),_.removeEventListener("pointerleave",u,!0),_.removeEventListener("pointerover",h,!0),n.removeEventListener("pointerup",l,!0)},T=_=>{_.removeEventListener("touchstart",c,!0),_.removeEventListener("touchend",l,!0),_.removeEventListener("touchmove",a,!0),_.removeEventListener("touchcancel",d,!0)},w=_=>{n.document.removeEventListener("mousemove",a,!0),_.removeEventListener("mousedown",c,!0),_.removeEventListener("mouseout",u,!0),_.removeEventListener("mouseover",h,!0),n.removeEventListener("mouseup",l,!0)};r.init.tap(()=>{s?E(i):(p(i),o&&g(i)),i.addEventListener("wheel",f,{capture:!0})}),r.destroy.tap(()=>{s?y(i):(w(i),o&&T(i)),i.removeEventListener("wheel",f,!0)})}};var Rp=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Qe=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Vd,hl,Hd,_i,or;const oT=1,aT={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};let lT=class{constructor(){Vd.set(this,!0),hl.set(this,new pi(null)),Hd.set(this,new Ld(null)),_i.set(this,void 0),or.set(this,void 0),this.onPointerMove=e=>{const i=this.normalizeToPointerEvent(e);for(const r of i){const n=this.bootstrapEvent(Qe(this,hl,"f"),r);Qe(this,_i,"f").mapEvent(n)}this.setCursor(Qe(this,_i,"f").cursor)}}apply(e){const{hooks:i,root:r}=e;Rp(this,or,e,"f"),Rp(this,_i,new Ng(r),"f"),Qe(this,_i,"f").setPickHandler((n,s)=>{const{picked:o}=i.pickSync.call({position:{x:n,y:s},picked:[],topmost:!0});return o[0]||null}),i.pointerWheel.tap(n=>{const s=this.normalizeWheelEvent(n);Qe(this,_i,"f").mapEvent(s)}),i.pointerDown.tap(n=>{const s=this.normalizeToPointerEvent(n);Qe(this,Vd,"f")&&s[0].isNormalized&&(n.cancelable||!("cancelable"in n))&&n.preventDefault();for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this.bootstrapEvent(Qe(this,hl,"f"),l);Qe(this,_i,"f").mapEvent(c)}this.setCursor(Qe(this,_i,"f").cursor)}),i.pointerUp.tap(n=>{let s=n.target;n.composedPath&&n.composedPath().length>0&&(s=n.composedPath()[0]);const o=s!==Qe(this,or,"f").canvas?"outside":"",a=this.normalizeToPointerEvent(n);for(let l=0,c=a.length;l<c;l++){const h=this.bootstrapEvent(Qe(this,hl,"f"),a[l]);h.type+=o,Qe(this,_i,"f").mapEvent(h)}this.setCursor(Qe(this,_i,"f").cursor)}),i.pointerMove.tap(this.onPointerMove),i.pointerOver.tap(this.onPointerMove),i.pointerOut.tap(this.onPointerMove),i.pointerCancel.tap(this.onPointerMove)}normalizeWheelEvent(e){const i=Qe(this,Hd,"f");this.transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode;const{x:r,y:n}=this.getViewportXY(e);i.client.x=r,i.client.y=n;const{x:s,y:o}=Qe(this,or,"f").api.viewport2Canvas(i.client);return i.screen.x=s,i.screen.y=o,i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.metaKey=i.metaKey,e.shiftKey=i.shiftKey,e.ctrlKey=i.ctrlKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.screen.x=i.screenX,e.screen.y=i.screenY,e.relatedTarget=null}setCursor(e){Qe(this,or,"f").canvas.style.cursor=e}normalizeToPointerEvent(e){const{supportsTouchEvents:i,supportsPointerEvents:r}=Qe(this,or,"f"),n=[];if(i&&e instanceof TouchEvent)for(let s=0;s<e.changedTouches.length;s++){const o=e.changedTouches[s];Xe(o.button)&&(o.button=0),Xe(o.buttons)&&(o.buttons=1),Xe(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),Xe(o.width)&&(o.width=o.radiusX||1),Xe(o.height)&&(o.height=o.radiusY||1),Xe(o.tiltX)&&(o.tiltX=0),Xe(o.tiltY)&&(o.tiltY=0),Xe(o.pointerType)&&(o.pointerType="touch"),Xe(o.pointerId)&&(o.pointerId=o.identifier||0),Xe(o.pressure)&&(o.pressure=o.force||.5),Xe(o.twist)&&(o.twist=0),Xe(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,n.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!r||!(e instanceof globalThis.PointerEvent))){const s=e;Xe(s.isPrimary)&&(s.isPrimary=!0),Xe(s.width)&&(s.width=1),Xe(s.height)&&(s.height=1),Xe(s.tiltX)&&(s.tiltX=0),Xe(s.tiltY)&&(s.tiltY=0),Xe(s.pointerType)&&(s.pointerType="mouse"),Xe(s.pointerId)&&(s.pointerId=oT),Xe(s.pressure)&&(s.pressure=.5),Xe(s.twist)&&(s.twist=0),Xe(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(e);return n}bootstrapEvent(e,i){e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this.transferMouseData(e,i);const{x:r,y:n}=this.getViewportXY(i);e.client.x=r,e.client.y=n;const{x:s,y:o}=Qe(this,or,"f").api.viewport2Canvas(e.client);return e.screen.x=s,e.screen.y=o,e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=aT[e.type]||e.type),e}getViewportXY(e){let i,r;const{offsetX:n,offsetY:s,clientX:o,clientY:a}=e;if(!cp(n)&&!cp(s))i=n,r=s;else{const l=Qe(this,or,"f").api.client2Viewport({x:o,y:a});i=l.x,r=l.y}return{x:i,y:r}}};Vd=new WeakMap,hl=new WeakMap,Hd=new WeakMap,_i=new WeakMap,or=new WeakMap;const wp=new ve;let cT=class{apply(e){const{hooks:i,root:r,api:{elementsFromBBox:n}}=e;i.pickSync.tap(s=>{const{position:{x:o,y:a}}=s,l=[r];return n(o,a,o,a).forEach(c=>{this.hitTest(c,o,a)&&l.unshift(c)}),s.picked=l,s})}hitTest(e,i,r){if(e.hitArea||e.renderable){e.worldTransform.applyInverse({x:i,y:r},wp);const{x:n,y:s}=wp;return e.hitArea?e.hitArea.contains(n,s):e.containsPoint(n,s)}return!1}};var hT=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Ap=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ul;function bp(t,e){do{if(t&&e(t))return t;t=t.parent}while(t!==void 0);return null}let uT=class{constructor(e={}){ul.set(this,void 0),hT(this,ul,Object.assign({overlap:"pointer",dragstartTimeThreshold:0,dragstartDistanceThreshold:0},e),"f")}apply(e){const{root:i,hooks:r,api:{elementsFromPoint:n}}=e,s=o=>{const a=o.target,l=bp(a,c=>c.draggable===!0);if(l){let c=!1;const h=o.timeStamp,u=[o.clientX,o.clientY];let d=null,f=[o.clientX,o.clientY];const E=p=>{if(!c){const _=p.timeStamp-h,b=$_(p.clientX,p.clientY,...u);if(_<=Ap(this,ul,"f").dragstartTimeThreshold||b<=Ap(this,ul,"f").dragstartDistanceThreshold)return;p.type="dragstart",l.dispatchEvent(p),c=!0}p.type="drag",p.dx=p.clientX-f[0],p.dy=p.clientY-f[1],l.dispatchEvent(p),f=[p.clientX,p.clientY];const y=[p.globalX,p.globalY],T=n(y[0],y[1]),w=T[T.indexOf(a)+1];if(w){const _=bp(w,b=>b.droppable===!0);d!==_&&(d&&(p.type="dragleave",p.target=d,d.dispatchEvent(p)),_&&(p.type="dragenter",p.target=_,_.dispatchEvent(p)),d=_,d&&(p.type="dragover",p.target=d,d.dispatchEvent(p)))}};i.addEventListener("pointermove",E);const g=function(p){if(c){p.detail={preventClick:!0};const y=p;d&&(y.type="drop",y.target=d,d.dispatchEvent(y)),y.type="dragend",l.dispatchEvent(y),c=!1}i.removeEventListener("pointermove",E)};a.addEventListener("pointerup",g,{once:!0}),a.addEventListener("pointerupoutside",g,{once:!0})}};r.init.tap(()=>{i.addEventListener("pointerdown",s)}),r.destroy.tap(()=>{i.removeEventListener("pointerdown",s)})}};ul=new WeakMap;var dT=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Fs=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Vh,wn;class fT{constructor(){Vh.set(this,void 0),wn.set(this,new Zc)}apply(e){const{root:i,hooks:r,rBushRoot:n}=e;dT(this,Vh,e,"f"),r.cameraChange.tap(this.updateViewport.bind(this)),this.updateViewport(),r.beginFrame.tap(()=>{const{minX:s,minY:o,maxX:a,maxY:l}=Fs(this,wn,"f");if(n.all().length===0){const c=[];Du(i,h=>{if(h.renderable){const u=h.getBounds();c.push({minX:u.minX,minY:u.minY,maxX:u.maxX,maxY:u.maxY,shape:h})}}),n.clear(),n.load(c)}Du(i,c=>{if(c.renderable&&c.cullable){const h=c.getBounds();c.culled=h.minX>=a||h.minY>=l||h.maxX<=s||h.maxY<=o}return c.culled})})}updateViewport(){const{camera:e,api:{viewport2Canvas:i}}=Fs(this,Vh,"f"),{width:r,height:n}=e,s=i({x:0,y:0}),o=i({x:r,y:0}),a=i({x:r,y:n}),l=i({x:0,y:n});Fs(this,wn,"f").minX=Math.min(s.x,o.x,a.x,l.x),Fs(this,wn,"f").minY=Math.min(s.y,o.y,a.y,l.y),Fs(this,wn,"f").maxX=Math.max(s.x,o.x,a.x,l.x),Fs(this,wn,"f").maxY=Math.max(s.y,o.y,a.y,l.y)}}Vh=new WeakMap,wn=new WeakMap;var pT=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Ue=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Na=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Hh,Tt,dl,Yh,An,fl;let rE=class{get pluginContext(){return Ue(this,Tt,"f")}get root(){return Ue(this,An,"f")}get camera(){return Ue(this,fl,"f")}constructor(e){Hh.set(this,void 0),Tt.set(this,void 0),dl.set(this,void 0),Yh.set(this,void 0),An.set(this,new tE),fl.set(this,void 0);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=dg(),a=s??o.devicePixelRatio,l=!!o.PointerEvent,c="ontouchstart"in o,{width:h,height:u}=i,d=new H_(h/a,u/a);d.onchange=()=>{Ue(this,Tt,"f").hooks.cameraChange.call()},Na(this,fl,d,"f"),Na(this,Tt,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:a,supportsPointerEvents:l,supportsTouchEvents:c,hooks:{init:new It,initAsync:new hg,beginFrame:new It,render:new It,endFrame:new It,destroy:new It,resize:new It,pointerDown:new It,pointerUp:new It,pointerMove:new It,pointerOut:new It,pointerOver:new It,pointerWheel:new It,pointerCancel:new It,pickSync:new ug,cameraChange:new It},camera:d,root:Ue(this,An,"f"),rBushRoot:new gv,api:{elementsFromPoint:this.elementsFromPoint.bind(this),elementFromPoint:this.elementFromPoint.bind(this),elementsFromBBox:this.elementsFromBBox.bind(this),client2Viewport:this.client2Viewport.bind(this),viewport2Canvas:d.viewport2Canvas.bind(d),viewport2Client:this.viewport2Client.bind(this),canvas2Viewport:d.canvas2Viewport.bind(d)}},"f"),Na(this,dl,new Qg,"f"),Na(this,Yh,new lT,"f");const f=[new sT,Ue(this,Yh,"f"),new cT,new nT,new fT,Ue(this,dl,"f"),new uT({dragstartTimeThreshold:100,dragstartDistanceThreshold:10})];Na(this,Hh,pT(this,void 0,void 0,function*(){const{hooks:E}=Ue(this,Tt,"f");return f.forEach(g=>{g.apply(Ue(this,Tt,"f"))}),E.init.call(),yield E.initAsync.promise(),this}),"f")}get initialized(){return Ue(this,Hh,"f").then(()=>this)}render(){const{hooks:e}=Ue(this,Tt,"f");e.beginFrame.call(),Du(Ue(this,An,"f"),i=>{if(i.culled||!i.visible)return!0;e.render.call(i)}),e.endFrame.call()}resize(e,i){const{hooks:r}=Ue(this,Tt,"f");Ue(this,fl,"f").projection(e,i),r.resize.call(e,i)}destroy(){const{hooks:e}=Ue(this,Tt,"f");e.destroy.call()}getDOM(){return Ue(this,Tt,"f").canvas}appendChild(e){Ue(this,An,"f").appendChild(e)}removeChild(e){return Ue(this,An,"f").removeChild(e)}setCheckboardStyle(e){Ue(this,dl,"f").setCheckboardStyle(e)}elementsFromBBox(e,i,r,n){const{rBushRoot:s}=Ue(this,Tt,"f"),o=s.search({minX:e,minY:i,maxX:r,maxY:n}),a=[];return o.forEach(({shape:l})=>{const{pointerEvents:c="auto"}=l,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(c);(!h||h&&l.visible)&&!l.culled&&l.pointerEvents!=="none"&&a.push(l)}),a.sort((l,c)=>l.globalRenderOrder-c.globalRenderOrder),a}elementsFromPoint(e,i){const{picked:r}=Ue(this,Tt,"f").hooks.pickSync.call({topmost:!1,position:{x:e,y:i},picked:[]});return r}elementFromPoint(e,i){const{picked:r}=Ue(this,Tt,"f").hooks.pickSync.call({topmost:!0,position:{x:e,y:i},picked:[]});return r[0]}client2Viewport({x:e,y:i}){const{left:r,top:n}=Ue(this,Tt,"f").canvas.getBoundingClientRect();return{x:e-r,y:i-n}}viewport2Client({x:e,y:i}){const{left:r,top:n}=Ue(this,Tt,"f").canvas.getBoundingClientRect();return{x:e+r,y:i+n}}zoomIn(){const{camera:e}=this;e.cancelLandmarkAnimation();const i=e.createLandmark({viewportX:e.width/2,viewportY:e.height/2,zoom:iT(e.zoom)});e.gotoLandmark(i,{duration:300,easing:"ease"})}zoomOut(){const{camera:e}=this;e.cancelLandmarkAnimation();const i=e.createLandmark({viewportX:e.width/2,viewportY:e.height/2,zoom:rT(e.zoom)});e.gotoLandmark(i,{duration:300,easing:"ease"})}};Hh=new WeakMap,Tt=new WeakMap,dl=new WeakMap,Yh=new WeakMap,An=new WeakMap,fl=new WeakMap;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zh=globalThis,Rf=zh.ShadowRoot&&(zh.ShadyCSS===void 0||zh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,wf=Symbol(),Sp=new WeakMap;let nE=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==wf)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(Rf&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=Sp.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Sp.set(i,e))}return e}toString(){return this.cssText}};const _T=t=>new nE(typeof t=="string"?t:t+"",void 0,wf),ed=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new nE(i,t,wf)},ET=(t,e)=>{if(Rf)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),n=zh.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},Pp=Rf?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return _T(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:vT,defineProperty:mT,getOwnPropertyDescriptor:gT,getOwnPropertyNames:TT,getOwnPropertySymbols:yT,getPrototypeOf:RT}=Object,qr=globalThis,Cp=qr.trustedTypes,wT=Cp?Cp.emptyScript:"",vd=qr.reactiveElementPolyfillSupport,Wc=(t,e)=>t,Lu={toAttribute(t,e){switch(e){case Boolean:t=t?wT:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},Af=(t,e)=>!vT(t,e),Mp={attribute:!0,type:String,converter:Lu,reflect:!1,hasChanged:Af};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),qr.litPropertyMetadata??(qr.litPropertyMetadata=new WeakMap);class qs extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=Mp){if(i.state&&(i.attribute=!1),this._$Ei(),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&mT(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=gT(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Mp}static _$Ei(){if(this.hasOwnProperty(Wc("elementProperties")))return;const e=RT(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Wc("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Wc("properties"))){const i=this.properties,r=[...TT(i),...yT(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(Pp(n))}else e!==void 0&&i.push(Pp(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(i=>i(this))}addController(e){var i;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)==null||i.call(e))}removeController(e){var i;(i=this._$EO)==null||i.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ET(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$EC(e,i){var s;const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:Lu).toAttribute(i,r.type);this._$Em=e,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(e,i){var s;const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const o=r.getPropertyOptions(n),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:Lu;this._$Em=n,this[n]=a.fromAttribute(i,o.type),this._$Em=null}}requestUpdate(e,i,r){if(e!==void 0){if(r??(r=this.constructor.getPropertyOptions(e)),!(r.hasChanged??Af)(this[e],i))return;this.P(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,i,r){this._$AL.has(e)||this._$AL.set(e,i),r.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(i)):this._$EU()}catch(n){throw e=!1,this._$EU(),n}e&&this._$AE(i)}willUpdate(e){}_$AE(e){var i;(i=this._$EO)==null||i.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(i=>this._$EC(i,this[i]))),this._$EU()}updated(e){}firstUpdated(e){}}qs.elementStyles=[],qs.shadowRootOptions={mode:"open"},qs[Wc("elementProperties")]=new Map,qs[Wc("finalized")]=new Map,vd==null||vd({ReactiveElement:qs}),(qr.reactiveElementVersions??(qr.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lc=globalThis,Xu=Lc.trustedTypes,Np=Xu?Xu.createPolicy("lit-html",{createHTML:t=>t}):void 0,sE="$lit$",Kr=`lit$${Math.random().toFixed(9).slice(2)}$`,oE="?"+Kr,AT=`<${oE}>`,Rs=document,Jc=()=>Rs.createComment(""),eh=t=>t===null||typeof t!="object"&&typeof t!="function",aE=Array.isArray,bT=t=>aE(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",md=`[ 	
\f\r]`,Ba=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Bp=/-->/g,Ip=/>/g,an=RegExp(`>|${md}(?:([^\\s"'>=/]+)(${md}*=${md}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Fp=/'/g,Op=/"/g,lE=/^(?:script|style|textarea|title)$/i,ST=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),td=ST(1),Ea=Symbol.for("lit-noChange"),rt=Symbol.for("lit-nothing"),xp=new WeakMap,vs=Rs.createTreeWalker(Rs,129);function cE(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Np!==void 0?Np.createHTML(e):e}const PT=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":"",o=Ba;for(let a=0;a<i;a++){const l=t[a];let c,h,u=-1,d=0;for(;d<l.length&&(o.lastIndex=d,h=o.exec(l),h!==null);)d=o.lastIndex,o===Ba?h[1]==="!--"?o=Bp:h[1]!==void 0?o=Ip:h[2]!==void 0?(lE.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=an):h[3]!==void 0&&(o=an):o===an?h[0]===">"?(o=n??Ba,u=-1):h[1]===void 0?u=-2:(u=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?an:h[3]==='"'?Op:Fp):o===Op||o===Fp?o=an:o===Bp||o===Ip?o=Ba:(o=an,n=void 0);const f=o===an&&t[a+1].startsWith("/>")?" ":"";s+=o===Ba?l+AT:u>=0?(r.push(c),l.slice(0,u)+sE+l.slice(u)+Kr+f):l+Kr+(u===-2?a:f)}return[cE(t,s+(t[i]||"<?>")+(e===2?"</svg>":"")),r]};class th{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,h]=PT(e,i);if(this.el=th.createElement(c,r),vs.currentNode=this.el.content,i===2){const u=this.el.content.firstChild;u.replaceWith(...u.childNodes)}for(;(n=vs.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const u of n.getAttributeNames())if(u.endsWith(sE)){const d=h[o++],f=n.getAttribute(u).split(Kr),E=/([.?@])?(.*)/.exec(d);l.push({type:1,index:s,name:E[2],strings:f,ctor:E[1]==="."?MT:E[1]==="?"?NT:E[1]==="@"?BT:id}),n.removeAttribute(u)}else u.startsWith(Kr)&&(l.push({type:6,index:s}),n.removeAttribute(u));if(lE.test(n.tagName)){const u=n.textContent.split(Kr),d=u.length-1;if(d>0){n.textContent=Xu?Xu.emptyScript:"";for(let f=0;f<d;f++)n.append(u[f],Jc()),vs.nextNode(),l.push({type:2,index:++s});n.append(u[d],Jc())}}}else if(n.nodeType===8)if(n.data===oE)l.push({type:2,index:s});else{let u=-1;for(;(u=n.data.indexOf(Kr,u+1))!==-1;)l.push({type:7,index:s}),u+=Kr.length-1}s++}}static createElement(e,i){const r=Rs.createElement("template");return r.innerHTML=e,r}}function va(t,e,i=t,r){var o,a;if(e===Ea)return e;let n=r!==void 0?(o=i._$Co)==null?void 0:o[r]:i._$Cl;const s=eh(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=n:i._$Cl=n),n!==void 0&&(e=va(t,n._$AS(t,e.values),n,r)),e}class CT{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??Rs).importNode(i,!0);vs.currentNode=n;let s=vs.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new ch(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new IT(s,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=vs.nextNode(),o++)}return vs.currentNode=Rs,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}}class ch{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=rt,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=va(this,e,i),eh(e)?e===rt||e==null||e===""?(this._$AH!==rt&&this._$AR(),this._$AH=rt):e!==this._$AH&&e!==Ea&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):bT(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==rt&&eh(this._$AH)?this._$AA.nextSibling.data=e:this.T(Rs.createTextNode(e)),this._$AH=e}$(e){var s;const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=th.createElement(cE(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(i);else{const o=new CT(n,this),a=o.u(this.options);o.p(i),this.T(a),this._$AH=o}}_$AC(e){let i=xp.get(e.strings);return i===void 0&&xp.set(e.strings,i=new th(e)),i}k(e){aE(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new ch(this.S(Jc()),this.S(Jc()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var i;this._$AM===void 0&&(this._$Cv=e,(i=this._$AP)==null||i.call(this,e))}}class id{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=rt,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=rt}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=va(this,e,i,0),o=!eh(e)||e!==this._$AH&&e!==Ea,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=va(this,a[r+l],i,l),c===Ea&&(c=this._$AH[l]),o||(o=!eh(c)||c!==this._$AH[l]),c===rt?e=rt:e!==rt&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===rt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class MT extends id{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===rt?void 0:e}}class NT extends id{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==rt)}}class BT extends id{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=va(this,e,i,0)??rt)===Ea)return;const r=this._$AH,n=e===rt&&r!==rt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==rt&&(r===rt||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,e):this._$AH.handleEvent(e)}}class IT{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){va(this,e)}}const gd=Lc.litHtmlPolyfillSupport;gd==null||gd(th,ch),(Lc.litHtmlVersions??(Lc.litHtmlVersions=[])).push("3.1.3");const FT=(t,e,i)=>{const r=(i==null?void 0:i.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(i==null?void 0:i.renderBefore)??null;r._$litPart$=n=new ch(e.insertBefore(Jc(),s),s,void 0,i??{})}return n._$AI(t),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Qr=class extends qs{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=FT(i,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ea}};var __;Qr._$litElement$=!0,Qr.finalized=!0,(__=globalThis.litElementHydrateSupport)==null||__.call(globalThis,{LitElement:Qr});const Td=globalThis.litElementPolyfillSupport;Td==null||Td({LitElement:Qr});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.5");/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let hE=class extends Event{constructor(e,i,r){super("context-request",{bubbles:!0,composed:!0}),this.context=e,this.callback=i,this.subscribe=r??!1}};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 *//**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Dp=class{constructor(e,i,r,n){if(this.subscribe=!1,this.provided=!1,this.value=void 0,this.t=(s,o)=>{this.unsubscribe&&(this.unsubscribe!==o&&(this.provided=!1,this.unsubscribe()),this.subscribe||this.unsubscribe()),this.value=s,this.host.requestUpdate(),this.provided&&!this.subscribe||(this.provided=!0,this.callback&&this.callback(s,o)),this.unsubscribe=o},this.host=e,i.context!==void 0){const s=i;this.context=s.context,this.callback=s.callback,this.subscribe=s.subscribe??!1}else this.context=i,this.callback=r,this.subscribe=n??!1;this.host.addController(this)}hostConnected(){this.dispatchRequest()}hostDisconnected(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}dispatchRequest(){this.host.dispatchEvent(new hE(this.context,this.t,this.subscribe))}};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class OT{get value(){return this.o}set value(e){this.setValue(e)}setValue(e,i=!1){const r=i||!Object.is(e,this.o);this.o=e,r&&this.updateObservers()}constructor(e){this.subscriptions=new Map,this.updateObservers=()=>{for(const[i,{disposer:r}]of this.subscriptions)i(this.o,r)},e!==void 0&&(this.value=e)}addCallback(e,i,r){if(!r)return void e(this.value);this.subscriptions.has(e)||this.subscriptions.set(e,{disposer:()=>{this.subscriptions.delete(e)},consumerHost:i});const{disposer:n}=this.subscriptions.get(e);e(this.value,n)}clearCallbacks(){this.subscriptions.clear()}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let xT=class extends Event{constructor(e){super("context-provider",{bubbles:!0,composed:!0}),this.context=e}};class uE extends OT{constructor(e,i,r){var n,s;super(i.context!==void 0?i.initialValue:r),this.onContextRequest=o=>{const a=o.composedPath()[0];o.context===this.context&&a!==this.host&&(o.stopPropagation(),this.addCallback(o.callback,a,o.subscribe))},this.onProviderRequest=o=>{const a=o.composedPath()[0];if(o.context!==this.context||a===this.host)return;const l=new Set;for(const[c,{consumerHost:h}]of this.subscriptions)l.has(c)||(l.add(c),h.dispatchEvent(new hE(this.context,c,!0)));o.stopPropagation()},this.host=e,i.context!==void 0?this.context=i.context:this.context=i,this.attachListeners(),(s=(n=this.host).addController)==null||s.call(n,this)}attachListeners(){this.host.addEventListener("context-request",this.onContextRequest),this.host.addEventListener("context-provider",this.onProviderRequest)}hostConnected(){this.host.dispatchEvent(new xT(this.context))}}/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function dE({context:t,subscribe:e}){return(i,r)=>{typeof r=="object"?r.addInitializer(function(){new Dp(this,{context:t,callback:n=>{this[r.name]=n},subscribe:e})}):i.constructor.addInitializer(n=>{new Dp(n,{context:t,callback:s=>{n[r]=s},subscribe:e})})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rd=t=>(e,i)=>{i!==void 0?i.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const DT={attribute:!0,type:String,converter:Lu,reflect:!1,hasChanged:Af},UT=(t=DT,e,i)=>{const{kind:r,metadata:n}=i;let s=globalThis.litPropertyMetadata.get(n);if(s===void 0&&globalThis.litPropertyMetadata.set(n,s=new Map),s.set(i.name,t),r==="accessor"){const{name:o}=i;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,t)},init(a){return a!==void 0&&this.P(o,void 0,t),a}}}if(r==="setter"){const{name:o}=i;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,t)}}throw Error("Unsupported decorator location: "+r)};function hh(t){return(e,i)=>typeof i=="object"?UT(t,e,i):((r,n,s)=>{const o=n.hasOwnProperty(s);return n.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(n,s):void 0})(t,e,i)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function fE(t){return hh({...t,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Up=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,i),i);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function pE(t,e){return(i,r,n)=>{const s=o=>{var a;return((a=o.renderRoot)==null?void 0:a.querySelector(t))??null};if(e){const{get:o,set:a}=typeof r=="object"?i:n??(()=>{const l=Symbol();return{get(){return this[l]},set(c){this[l]=c}}})();return Up(i,r,{get(){let l=o.call(this);return l===void 0&&(l=s(this),(l!==null||this.hasUpdated)&&a.call(this,l)),l}})}return Up(i,r,{get(){return s(this)}})}}const _E=Symbol("canvas");var nd=function(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s},kT=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Bi=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},kp=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Yd,Ui,pl;let ws=class extends Qr{constructor(){super(...arguments),this.renderer="webgl",this.zoom=100,Yd.set(this,new uE(this,{context:_E})),Ui.set(this,void 0),pl.set(this,void 0)}connectedCallback(){super.connectedCallback(),this.addEventListener("sl-resize",this.resize)}disconnectedCallback(){var e;this.removeEventListener("sl-resize",this.resize),Bi(this,pl,"f")&&window.cancelAnimationFrame(Bi(this,pl,"f")),(e=Bi(this,Ui,"f"))===null||e===void 0||e.destroy(),super.disconnectedCallback()}firstUpdated(){return kT(this,void 0,void 0,function*(){kp(this,Ui,yield new rE({canvas:this.$canvas,renderer:this.renderer}).initialized,"f"),Bi(this,Yd,"f").setValue(Bi(this,Ui,"f")),Bi(this,Ui,"f").pluginContext.hooks.cameraChange.tap(()=>{this.zoom=Math.round(Bi(this,Ui,"f").camera.zoom*100)}),this.dispatchEvent(new CustomEvent("ic-ready",{detail:Bi(this,Ui,"f")}));const e=i=>{this.dispatchEvent(new CustomEvent("ic-frame",{detail:i})),Bi(this,Ui,"f").render(),kp(this,pl,window.requestAnimationFrame(e),"f")};e()})}resize(e){var i;const r=e.detail,{width:n,height:s}=r.entries[0].contentRect,o=window.devicePixelRatio;if(n&&s){const a=this.$canvas;a.width=n*o,a.height=s*o,(i=Bi(this,Ui,"f"))===null||i===void 0||i.resize(n,s)}}render(){return td`
      <sl-resize-observer>
        <canvas></canvas>
        <ic-zoom-toolbar-lesson8 zoom=${this.zoom}></ic-zoom-toolbar>
      </sl-resize-observer>
    `}};Yd=new WeakMap;Ui=new WeakMap;pl=new WeakMap;ws.styles=ed`
    :host {
      position: relative;
    }

    canvas {
      width: 100%;
      height: 100%;
      outline: none;
      padding: 0;
      margin: 0;
      touch-action: none;
    }
  `;nd([hh()],ws.prototype,"renderer",void 0);nd([fE()],ws.prototype,"zoom",void 0);nd([pE("canvas",!0)],ws.prototype,"$canvas",void 0);ws=nd([rd("ic-canvas-lesson8")],ws);var bf=function(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let ma=class extends Qr{constructor(){super(...arguments),this.zoom=100}zoomOut(){this.canvas.zoomOut()}zoomIn(){this.canvas.zoomIn()}render(){return td`
      <sl-button-group label="Zoom toolbar">
        <sl-tooltip content="Zoom out">
          <sl-icon-button
            name="dash-lg"
            label="Zoom out"
            @click="${this.zoomOut}"
          ></sl-icon-button>
        </sl-tooltip>
        <span>${this.zoom}%</span>
        <sl-tooltip content="Zoom in">
          <sl-icon-button
            name="plus-lg"
            label="Zoom in"
            @click="${this.zoomIn}"
          ></sl-icon-button>
        </sl-tooltip>
      </sl-button-group>
    `}};ma.styles=ed`
    :host {
      position: absolute;
      right: 16px;
      bottom: 16px;
      box-shadow: var(--sl-shadow-medium);
      background: white;
    }

    span {
      font-size: 12px;
      line-height: 32px;
      width: 32px;
      text-align: center;
      color: var(--sl-color-neutral-600);
    }
  `;bf([dE({context:_E,subscribe:!0})],ma.prototype,"canvas",void 0);bf([hh()],ma.prototype,"zoom",void 0);ma=bf([rd("ic-zoom-toolbar-lesson8")],ma);const $T=Object.freeze(Object.defineProperty({__proto__:null,AABB:Zc,Camera:H_,Canvas:rE,Circle:yf,Grid:eE,Group:tE,IDENTITY_TRANSFORM:K_,get InfiniteCanvas(){return ws},Rectangle:mr,Shape:vf,get ZoomToolbar(){return ma},getBounds:mf,isFillOrStrokeAffected:q_},Symbol.toStringTag,{value:"Module"}));var EE={exports:{}};(function(t,e){(function(i,r){t.exports=r()})(Fv,function(){var i=function(){function r(f){return o.appendChild(f.dom),f}function n(f){for(var E=0;E<o.children.length;E++)o.children[E].style.display=E===f?"block":"none";s=f}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(f){f.preventDefault(),n(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,h=r(new i.Panel("FPS","#0ff","#002")),u=r(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=r(new i.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:o,addPanel:r,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){c++;var f=(performance||Date).now();if(u.update(f-a,200),f>l+1e3&&(h.update(1e3*c/(f-l),100),l=f,c=0,d)){var E=performance.memory;d.update(E.usedJSHeapSize/1048576,E.jsHeapSizeLimit/1048576)}return f},update:function(){a=this.end()},domElement:o,setMode:n}};return i.Panel=function(r,n,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),h=80*c,u=48*c,d=3*c,f=2*c,E=3*c,g=15*c,p=74*c,y=30*c,T=document.createElement("canvas");T.width=h,T.height=u,T.style.cssText="width:80px;height:48px";var w=T.getContext("2d");return w.font="bold "+9*c+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=s,w.fillRect(0,0,h,u),w.fillStyle=n,w.fillText(r,d,f),w.fillRect(E,g,p,y),w.fillStyle=s,w.globalAlpha=.9,w.fillRect(E,g,p,y),{dom:T,update:function(_,b){o=Math.min(o,_),a=Math.max(a,_),w.fillStyle=s,w.globalAlpha=1,w.fillRect(0,0,h,g),w.fillStyle=n,w.fillText(l(_)+" "+r+" ("+l(o)+"-"+l(a)+")",d,f),w.drawImage(T,E+c,g,p-c,y,E,g,p-c,y),w.fillRect(E+p-c,g,c,y),w.fillStyle=s,w.globalAlpha=.9,w.fillRect(E+p-c,g,c,l((1-_/b)*y))}}},i})})(EE);var WT=EE.exports;const LT=ff(WT);var yd=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},_l;let XT=class{constructor(){_l.set(this,[])}getCallbacksNum(){return yd(this,_l,"f").length}tapPromise(e){yd(this,_l,"f").push(e)}promise(...e){return Promise.all(yd(this,_l,"f").map(i=>i(...e)))}};_l=new WeakMap;var $p=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},jh;let Ht=class{constructor(){jh.set(this,[])}tap(e){$p(this,jh,"f").push(e)}call(...e){$p(this,jh,"f").forEach(function(i){i.apply(void 0,e)})}};jh=new WeakMap;var Ia=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},bn;let VT=class{constructor(){bn.set(this,[])}tap(e){Ia(this,bn,"f").push(e)}call(...e){if(Ia(this,bn,"f").length){let i=Ia(this,bn,"f")[0].apply(void 0,e);for(let r=0;r<Ia(this,bn,"f").length-1;r++){const n=Ia(this,bn,"f")[r];i=n(...i)}return i}return null}};bn=new WeakMap;const HT=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};function Vu(t,e){e(t)||t.children.forEach(i=>{Vu(i,e)})}const Rd=0;function Sn(t){return[t[0],t[1],t[2],Rd,t[3],t[4],t[5],Rd,t[6],t[7],t[8],Rd]}function vE(t,e,i,r){return Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2))}const YT={linear:Oe(0,0,1,1),ease:Oe(.25,.1,.25,1),"ease-in":Oe(.42,0,1,1),"ease-out":Oe(0,0,.58,1),"ease-in-out":Oe(.42,0,.58,1)};var zr;(function(t){t._bytes4=new Uint8Array(4),t._float=new Float32Array(t._bytes4.buffer),t._int=new Int32Array(t._bytes4.buffer),t._bytes2=new Uint8Array(2),t._short=new Int16Array(t._bytes2.buffer);function e(c){return t._float[0]=c,t._int[0]}t.floatToInt=e;function i(c){return t._int[0]=c,t._float[0]}t.intToFloat=i;function r(c){return t._float[0]=c,t._bytes4}t.floatToBytes=r;function n(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._float[0]}t.bytesToFloat=n;function s(c){return t._int[0]=c,t._bytes4}t.intToBytes=s;function o(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._int[0]}t.bytesToInt=o;function a(c){return t._short[0]=c,t._bytes2}t.shortToBytes=a;function l(c,h){return t._bytes2[0]=c,t._bytes2[1]=h,t._short[0]}t.bytesToShort=l})(zr||(zr={}));const Wp=256;let zT=class{constructor(e=new Uint8Array(Wp)){this._bytes=e,this.count=0,this.readOffset=0,this.capacity=Wp,this.count=this.capacity=e.length}clear(){this.count=0,this.readOffset=0}byteCount(){return this.count}bytes(){return this._bytes.subarray(0,this.count)}grow(){this.capacity*=2;const e=new Uint8Array(this.capacity);e.set(this._bytes),this._bytes=e}hasMoreToRead(){return this.readOffset<this.count}seekTo(e){this.readOffset=e}skipBytes(e){this.readOffset+=e}appendBytes(e){const i=e.length;return this.count+i>this.capacity&&this.grow(),this._bytes.set(e,this.count),this.count+=i,this}byteAt(e){return this._bytes[e]}appendByte(e){return this.count+1>this.capacity&&this.grow(),this._bytes[this.count]=e,this.count++,this}readByte(){const e=this.byteAt(this.readOffset);return this.readOffset++,e}shortAt(e){return zr.bytesToShort(this._bytes[e],this._bytes[e+1])}appendShort(e){return this.appendBytes(zr.shortToBytes(e)),this}appendShorts(e){for(const i of e)this.appendShort(i);return this}readShort(){const e=this.shortAt(this.readOffset);return this.readOffset+=2,e}intAt(e){return zr.bytesToInt(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendInt(e){return this.appendBytes(zr.intToBytes(e)),this}appendInts(e){for(const i of e)this.appendInt(i);return this}readInt(){const e=this.intAt(this.readOffset);return this.readOffset+=4,e}floatAt(e){return zr.bytesToFloat(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendFloat(e){return this.appendBytes(zr.floatToBytes(e)),this}appendFloats(e){for(const i of e)this.appendFloat(i);return this}readFloat(){const e=this.floatAt(this.readOffset);return this.readOffset+=4,e}isEmpty(){return this.count==0}};const Ah=t=>t instanceof Object,Lp=t=>t===!!t,bh=t=>typeof t=="function",Ve=t=>t===void 0,Xp=t=>t==null;var X=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ct=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Ei,kt,$t,ii,El,vl,vi,ml,gl,Tl,Gh,yl;const Vp=1e-4;let mE=class gE{constructor(e,i){this.clipSpaceNearZ=er.NEGATIVE_ONE,Ei.set(this,1),kt.set(this,0),$t.set(this,0),ii.set(this,0),El.set(this,0),vl.set(this,0),vi.set(this,me()),ml.set(this,me()),gl.set(this,me()),Tl.set(this,me()),Gh.set(this,me()),yl.set(this,void 0),this.projection(e,i),this.updateMatrix()}clone(){const e=new gE(X(this,El,"f"),X(this,vl,"f"));return ct(e,kt,X(this,kt,"f"),"f"),ct(e,$t,X(this,$t,"f"),"f"),ct(e,Ei,X(this,Ei,"f"),"f"),ct(e,ii,X(this,ii,"f"),"f"),e.updateMatrix(),e}projection(e,i){ct(this,El,e,"f"),ct(this,vl,i,"f"),oh(X(this,ml,"f"),e,i),this.updateViewProjectionMatrix()}updateMatrix(){const e=1/X(this,Ei,"f");nh(X(this,vi,"f")),Nt(X(this,vi,"f"),X(this,vi,"f"),[X(this,kt,"f"),X(this,$t,"f")]),ir(X(this,vi,"f"),X(this,vi,"f"),X(this,ii,"f")),sh(X(this,vi,"f"),X(this,vi,"f"),[e,e]),Qi(X(this,gl,"f"),X(this,vi,"f")),this.updateViewProjectionMatrix()}updateViewProjectionMatrix(){tr(X(this,Tl,"f"),X(this,ml,"f"),X(this,gl,"f")),Qi(X(this,Gh,"f"),X(this,Tl,"f")),this.onchange&&this.onchange()}get projectionMatrix(){return X(this,ml,"f")}get viewMatrix(){return X(this,gl,"f")}get viewProjectionMatrix(){return X(this,Tl,"f")}get viewProjectionMatrixInv(){return X(this,Gh,"f")}get matrix(){return X(this,vi,"f")}get zoom(){return X(this,Ei,"f")}set zoom(e){X(this,Ei,"f")!==e&&(ct(this,Ei,e,"f"),this.updateMatrix())}get x(){return X(this,kt,"f")}set x(e){X(this,kt,"f")!==e&&(ct(this,kt,e,"f"),this.updateMatrix())}get y(){return X(this,$t,"f")}set y(e){X(this,$t,"f")!==e&&(ct(this,$t,e,"f"),this.updateMatrix())}get rotation(){return X(this,ii,"f")}set rotation(e){X(this,ii,"f")!==e&&(ct(this,ii,e,"f"),this.updateMatrix())}get width(){return X(this,El,"f")}get height(){return X(this,vl,"f")}createLandmark(e={}){return Object.assign({zoom:X(this,Ei,"f"),x:X(this,kt,"f"),y:X(this,$t,"f"),rotation:X(this,ii,"f")},e)}gotoLandmark(e,i={}){const{easing:r="linear",duration:n=100,onframe:s=void 0,onfinish:o=void 0}=i,{zoom:a=X(this,Ei,"f"),x:l=X(this,kt,"f"),y:c=X(this,$t,"f"),rotation:h=X(this,ii,"f"),viewportX:u=0,viewportY:d=0}=e,f=u||d,E=()=>{this.applyLandmark({x:l,y:c,zoom:a,rotation:h,viewportX:u,viewportY:d}),o&&o()};if(n===0){E();return}this.cancelLandmarkAnimation();let g;const p=[l,c],y=[a,h],T=w=>{g===void 0&&(g=w);const _=w-g;if(_>n){E();return}const b=YT[r](_/n),S=Re(),P=ah(1,0);if(Ji(S,[X(this,kt,"f"),X(this,$t,"f")],p,b),Ji(P,[this.zoom,X(this,ii,"f")],y,b),this.applyLandmark({x:S[0],y:S[1],zoom:P[0],rotation:P[1],viewportX:u,viewportY:d}),f?Ts(P,y)<=Vp:Ts(S,p)<=Vp){E();return}_<n&&(s&&s(b),ct(this,yl,requestAnimationFrame(T),"f"))};requestAnimationFrame(T)}cancelLandmarkAnimation(){X(this,yl,"f")!==void 0&&cancelAnimationFrame(X(this,yl,"f"))}viewport2Canvas({x:e,y:i},r){const{width:n,height:s,viewProjectionMatrixInv:o}=r||this,a=je(Re(),[e/n*2-1,(1-i/s)*2-1],o);return{x:a[0],y:a[1]}}canvas2Viewport({x:e,y:i},r){const{width:n,height:s,viewProjectionMatrix:o}=r||this,a=je(Re(),[e,i],o);return{x:(a[0]+1)/2*n,y:(1-(a[1]+1)/2)*s}}applyLandmark(e){const{x:i,y:r,zoom:n,rotation:s,viewportX:o,viewportY:a}=e,l=o||a;let c=0,h=0;if(l){const u=this.viewport2Canvas({x:o,y:a});c=u.x,h=u.y}if(ct(this,Ei,n,"f"),ct(this,ii,s,"f"),ct(this,kt,i,"f"),ct(this,$t,r,"f"),this.updateMatrix(),l){const{x:u,y:d}=this.viewport2Canvas({x:o,y:a});ct(this,kt,X(this,kt,"f")+(c-u),"f"),ct(this,$t,X(this,$t,"f")+(h-d),"f"),this.updateMatrix()}}};Ei=new WeakMap,kt=new WeakMap,$t=new WeakMap,ii=new WeakMap,El=new WeakMap,vl=new WeakMap,vi=new WeakMap,ml=new WeakMap,gl=new WeakMap,Tl=new WeakMap,Gh=new WeakMap,yl=new WeakMap;let TE=class yE{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=yE.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ve,this.page=new ve,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,r,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},Hu=class extends TE{constructor(){super(...arguments),this.client=new ve,this.movement=new ve,this.offset=new ve,this.global=new ve,this.screen=new ve}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,i,r,n,s,o,a,l,c,h,u,d,f,E,g){throw new Error("Method not implemented.")}},mi=class extends Hu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}},zd=class extends Hu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};var jT=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},GT=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Kh;const KT=2048;let ZT=class{constructor(e){this.dispatch=new tn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,Kh.set(this,void 0),this.rootTarget=e,this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}setPickHandler(e){jT(this,Kh,e,"f")}addEventMapping(e,i){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:i,priority:0}),this.mappingTable[e].sort((r,n)=>r.priority-n.priority)}dispatchEvent(e,i){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,i),this.dispatch.emit(i||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const i=this.mappingTable[e.type];if(i)for(let r=0,n=i.length;r<n;r++)i[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,i){return GT(this,Kh,"f").call(this,e,i)}propagate(e,i){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=r.length-1;n<s;n++)if(e.currentTarget=r[n],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,i),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(e.currentTarget=r[n],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,i,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let s=r.length-1;s>=0;s--)n.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const i=[e];for(let r=0;r<KT&&e!==this.rootTarget&&e.parent;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(e.parent),e=e.parent}return i.reverse(),i}notifyTarget(e,i){i=i??e.type;const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${i}capture`:i;this._notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,i)}mapPointerDown(e){if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(e){var i,r,n;if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const s=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const o=s.pointerType==="mouse"||s.pointerType==="pen",a=this.trackingData(e.pointerId),l=this.findMountedTarget(a.overTargets);if(((i=a.overTargets)===null||i===void 0?void 0:i.length)>0&&l!==s.target){const u=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,u,l);if(this.dispatchEvent(d,"pointerout"),o&&this.dispatchEvent(d,"mouseout"),!s.composedPath().includes(l)){const f=this.createPointerEvent(e,"pointerleave",l);for(f.eventPhase=f.AT_TARGET;f.target&&!s.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),o&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}if(l!==s.target){const u=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(s,u);this.dispatchEvent(d,"pointerover"),o&&this.dispatchEvent(d,"mouseover");let f=l==null?void 0:l.parent;for(;f&&f!==this.rootTarget.parent&&f!==s.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const g=this.clonePointerEvent(s,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),o&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(d)}const c=[],h=(r=this.enableGlobalMoveEvents)!==null&&r!==void 0?r:!0;this.moveOnAll?c.push("pointermove"):this.dispatchEvent(s,"pointermove"),h&&c.push("globalpointermove"),s.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(s,"touchmove"),h&&c.push("globaltouchmove")),o&&(this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(s,"mousemove"),h&&c.push("globalmousemove"),this.cursor=(n=s.target)===null||n===void 0?void 0:n.cursor),c.length>0&&this.all(s,c),this._allInteractiveElements.length=0,this._hitElements.length=0,a.overTargets=s.composedPath(),this.freeEvent(s)}mapPointerOver(e){var i;if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(i=n.target)===null||i===void 0?void 0:i.cursor);const o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId);if(i.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){var i;if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.dispatchEvent(n,l?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),o=this.findMountedTarget(s.pressTargetsByButton[e.button]);let a=o;if(o&&!n.composedPath().includes(o)){let l=o;for(;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}l=l.parent}delete s.pressTargetsByButton[e.button],a=l}if(a){const l=this.clonePointerEvent(n,"click");l.target=a,l.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:r});const c=s.clicksByButton[e.button];if(c.target===l.target&&r-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=l.target,c.timeStamp=r,l.detail=c.clickCount,!(!((i=n.detail)===null||i===void 0)&&i.preventClick)){if(l.pointerType==="mouse"){const h=l.button===2;this.dispatchEvent(l,h?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap")}this.freeEvent(l)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof mi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(r){let s=r;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof zd)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(e);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(e){if(!e)return null;let i=e[0];for(let r=1;r<e.length&&e[r].parent===i;r++)i=e[r];return i}createPointerEvent(e,i,r){var n;const s=this.allocateEvent(mi);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=(n=r??this.hitTest(s.global.x,s.global.y))!==null&&n!==void 0?n:this._hitElements[0],typeof i=="string"&&(s.type=i),s}createWheelEvent(e){const i=this.allocateEvent(zd);return this.copyWheelData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(e,i){const r=this.allocateEvent(mi);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=i??r.type,r}copyWheelData(e,i){i.deltaMode=e.deltaMode,i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ}copyPointerData(e,i){e instanceof mi&&i instanceof mi&&(i.pointerId=e.pointerId,i.width=e.width,i.height=e.height,i.isPrimary=e.isPrimary,i.pointerType=e.pointerType,i.pressure=e.pressure,i.tangentialPressure=e.tangentialPressure,i.tiltX=e.tiltX,i.tiltY=e.tiltY,i.twist=e.twist)}copyMouseData(e,i){e instanceof Hu&&i instanceof Hu&&(i.altKey=e.altKey,i.button=e.button,i.buttons=e.buttons,i.client.copyFrom(e.client),i.ctrlKey=e.ctrlKey,i.metaKey=e.metaKey,i.movement.copyFrom(e.movement),i.screen.copyFrom(e.screen),i.shiftKey=e.shiftKey,i.global.copyFrom(e.global))}copyData(e,i){i.isTrusted=e.isTrusted,i.srcElement=e.srcElement,i.timeStamp=performance.now(),i.type=e.type,i.detail=e.detail,i.view=e.view,i.which=e.which,i.layer.copyFrom(e.layer),i.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const i=this.eventPool.get(e).pop()||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(e)}_notifyListeners(e,i){const r=e.currentTarget._events[i];if(r)if("fn"in r)r.once&&e.currentTarget.removeListener(i,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let n=0,s=r.length;n<s&&!e.propagationImmediatelyStopped;n++)r[n].once&&e.currentTarget.removeListener(i,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,e)}};Kh=new WeakMap;const RE=new Qt;let Sf=class extends tn{constructor(e={}){var i,r,n,s,o,a;super(),this.renderDirtyFlag=!0,this.transform=new Qt,this.children=[],this.cursor=(i=e.cursor)!==null&&i!==void 0?i:"default",this.hitArea=e.hitArea,this.pointerEvents=(r=e.pointerEvents)!==null&&r!==void 0?r:"auto",this.visible=(n=e.visible)!==null&&n!==void 0?n:!0,this.renderable=(s=e.renderable)!==null&&s!==void 0?s:!0,this.draggable=(o=e.draggable)!==null&&o!==void 0?o:!1,this.droppable=(a=e.droppable)!==null&&a!==void 0?a:!1}addEventListener(e,i,r){const n=Lp(r)&&r||Ah(r)&&r.capture,s=Ah(r)?r.signal:void 0,o=Ah(r)&&r.once,a=bh(i)?void 0:i;e=n?`${e}capture`:e;const l=bh(i)?i:i.handleEvent;s&&s.addEventListener("abort",()=>{this.off(e,l,a)}),o?this.once(e,l,a):this.on(e,l,a)}removeEventListener(e,i,r){const n=Lp(r)&&r||Ah(r)&&r.capture,s=bh(i)?void 0:i;e=n?`${e}capture`:e,i=bh(i)?i:i==null?void 0:i.handleEvent,this.off(e,i,s)}dispatchEvent(e){if(!(e instanceof TE))throw new Error("Container cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*ya}set angle(e){this.transform.rotation=e*Ra}appendChild(e){return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),e}removeChild(e){const i=this.children.indexOf(e);return i===-1?null:(e.parent=void 0,e.transform._parentID=-1,this.children.splice(i,1),e)}};function wE(t,e,i){let r=!1,n=!1;const s=!!e&&e!=="none",o=!!i&&i!=="none";return t==="visiblepainted"||t==="painted"||t==="auto"?(r=s,n=o):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?n=!0:(t==="visible"||t==="all")&&(r=!0,n=!0),[r,n]}const qT=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

layout(location = 0) in vec2 a_FragCoord;
layout(location = 1) in vec2 a_Position;
layout(location = 2) in vec2 a_Size;
layout(location = 3) in vec4 a_FillColor;

out vec2 v_FragCoord;
out vec4 v_FillColor;

void main() {
  v_FragCoord = a_FragCoord;
  v_FillColor = a_FillColor;

  gl_Position = vec4((u_ProjectionMatrix 
    * u_ViewMatrix
    * u_ModelMatrix 
    * vec3(a_Position + a_Size * a_FragCoord, 1)).xy, 0, 1);
}
`,QT=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

out vec4 outputColor;

in vec2 v_FragCoord;
in vec4 v_FillColor;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float distance = sdf_circle(v_FragCoord, 1.0);

  if (distance > 0.0) {
    discard;
  }
  
  float alpha = clamp(-distance / fwidth(-distance), 0.0, 1.0);

  outputColor = v_FillColor;
  outputColor.a *= alpha;
}
`;var G=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},vt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Pn,Cn,ki,Qs,Mn,Js,jd,eo,Nn,Rl,to,wl,io,ro,no,Al;let JT=class extends Sf{constructor(e={}){super(e),Pn.set(this,void 0),Cn.set(this,void 0),ki.set(this,void 0),Qs.set(this,void 0),Mn.set(this,void 0),Js.set(this,void 0),jd.set(this,void 0),eo.set(this,void 0),Nn.set(this,void 0),Rl.set(this,void 0),to.set(this,void 0),wl.set(this,void 0),io.set(this,void 0),ro.set(this,void 0),no.set(this,void 0),Al.set(this,void 0);const{cx:i,cy:r,r:n,fill:s,stroke:o,strokeWidth:a}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black",this.stroke=o??"black",this.strokeWidth=a??0}get cx(){return G(this,Pn,"f")}set cx(e){G(this,Pn,"f")!==e&&(vt(this,Pn,e,"f"),this.renderDirtyFlag=!0)}get cy(){return G(this,Cn,"f")}set cy(e){G(this,Cn,"f")!==e&&(vt(this,Cn,e,"f"),this.renderDirtyFlag=!0)}get r(){return G(this,ki,"f")}set r(e){G(this,ki,"f")!==e&&(vt(this,ki,e,"f"),this.renderDirtyFlag=!0)}get fill(){return G(this,Qs,"f")}set fill(e){G(this,Qs,"f")!==e&&(vt(this,Qs,e,"f"),vt(this,Mn,Mi(e),"f"),this.renderDirtyFlag=!0)}get stroke(){return G(this,Js,"f")}set stroke(e){G(this,Js,"f")!==e&&(vt(this,Js,e,"f"),vt(this,jd,Mi(e),"f"),this.renderDirtyFlag=!0)}get strokeWidth(){return G(this,eo,"f")}set strokeWidth(e){G(this,eo,"f")!==e&&(vt(this,eo,e,"f"),this.renderDirtyFlag=!0)}render(e,i,r){G(this,Nn,"f")||(vt(this,Nn,e.createProgram({vertex:{glsl:qT},fragment:{glsl:QT}}),"f"),vt(this,io,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*16,usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),vt(this,to,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*8,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),vt(this,Rl,e.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),vt(this,wl,e.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f"),vt(this,no,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]},{arrayStride:4*8,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RG},{shaderLocation:2,offset:4*2,format:v.F32_RG},{shaderLocation:3,offset:4*4,format:v.F32_RGBA}]}],indexBufferFormat:v.U32_R,program:G(this,Nn,"f")}),"f"),vt(this,ro,e.createRenderPipeline({inputLayout:G(this,no,"f"),program:G(this,Nn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}]}}),"f"),vt(this,Al,e.createBindings({pipeline:G(this,ro,"f"),uniformBufferBindings:[{buffer:r},{buffer:G(this,io,"f")}]}),"f")),G(this,io,"f").setSubData(0,new Uint8Array(new Float32Array(Sn(this.worldTransform.toArray(!0))).buffer)),this.renderDirtyFlag&&G(this,to,"f").setSubData(0,new Uint8Array(new Float32Array([G(this,Pn,"f"),G(this,Cn,"f"),G(this,ki,"f"),G(this,ki,"f"),G(this,Mn,"f").r/255,G(this,Mn,"f").g/255,G(this,Mn,"f").b/255,G(this,Mn,"f").opacity]).buffer)),i.setPipeline(G(this,ro,"f")),i.setVertexInput(G(this,no,"f"),[{buffer:G(this,Rl,"f")},{buffer:G(this,to,"f")}],{buffer:G(this,wl,"f")}),i.setBindings(G(this,Al,"f")),i.drawIndexed(6,1),this.renderDirtyFlag=!1}destroy(){G(this,Nn,"f").destroy(),G(this,to,"f").destroy(),G(this,Rl,"f").destroy(),G(this,wl,"f").destroy(),G(this,io,"f").destroy(),G(this,ro,"f").destroy(),G(this,no,"f").destroy(),G(this,Al,"f").destroy()}containsPoint(e,i){const r=G(this,eo,"f")/2,n=vE(G(this,Pn,"f"),G(this,Cn,"f"),e,i),[s,o]=wE(this.pointerEvents,G(this,Qs,"f"),G(this,Js,"f"));return s?n<=G(this,ki,"f"):o?n>=G(this,ki,"f")-r&&n<=G(this,ki,"f")+r:!1}};Pn=new WeakMap,Cn=new WeakMap,ki=new WeakMap,Qs=new WeakMap,Mn=new WeakMap,Js=new WeakMap,jd=new WeakMap,eo=new WeakMap,Nn=new WeakMap,Rl=new WeakMap,to=new WeakMap,wl=new WeakMap,io=new WeakMap,ro=new WeakMap,no=new WeakMap,Al=new WeakMap;const ey=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

layout(location = 0) in vec2 a_Position;

out vec2 v_Position;

vec2 project_clipspace_to_world(vec2 p) {
  return (u_ViewProjectionInvMatrix * vec3(p, 1)).xy;
}

void main() {
  v_Position = project_clipspace_to_world(a_Position);
  gl_Position = vec4(a_Position, 0, 1);
}
`,ty=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

out vec4 outputColor;

in vec2 v_Position;

const vec4 GRID_COLOR = vec4(0.87, 0.87, 0.87, 1.0);
const vec4 PAGE_COLOR = vec4(0.986, 0.986, 0.986, 1.0);
const int CHECKERBOARD_STYLE_NONE = 0;
const int CHECKERBOARD_STYLE_GRID = 1;
const int CHECKERBOARD_STYLE_DOTS = 2;
const float BASE_GRID_PIXEL_SIZE = 100.0;
const float BASE_DOT_SIZE = 8.0;

vec2 scale_grid_size(float zoom) {
  if (zoom < 0.125) return vec2(BASE_GRID_PIXEL_SIZE * 125.0, 0.125);
  else if (zoom < 0.25) return vec2(BASE_GRID_PIXEL_SIZE * 25.0, 0.25);
  else if (zoom < 0.5) return vec2(BASE_GRID_PIXEL_SIZE * 5.0, 0.5);
  return vec2(BASE_GRID_PIXEL_SIZE, 4.0);
}

vec4 render_grid_checkerboard(vec2 coord) {
  float alpha = 0.0;

  vec2 size = scale_grid_size(u_ZoomScale);
  float gridSize1 = size.x;
  float gridSize2 = gridSize1 / 10.0;
  float zoomStep = size.y;
  int checkboardStyle = int(floor(u_CheckboardStyle + 0.5));

  if (checkboardStyle == CHECKERBOARD_STYLE_GRID) {
    vec2 grid1 = abs(fract(coord / gridSize1 - 0.5) - 0.5) / fwidth(coord) * gridSize1 / 2.0;
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    float v1 = 1.0 - min(min(grid1.x, grid1.y), 1.0);
    float v2 = 1.0 - min(min(grid2.x, grid2.y), 1.0);

    if (v1 > 0.0) {
      alpha = v1;
    } else {
      alpha = v2 * clamp(u_ZoomScale / zoomStep, 0.0, 1.0);
    }
  } else if (checkboardStyle == CHECKERBOARD_STYLE_DOTS) {
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    alpha = smoothstep(1.0, 0.0, length(grid2) - BASE_DOT_SIZE * u_ZoomScale / zoomStep);
  }

  return mix(PAGE_COLOR, GRID_COLOR, alpha);
}

void main() {
  outputColor = render_grid_checkerboard(v_Position);
}
`;var ht=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Fa=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Bn,so,oo,bl,Sl,Pl;let AE=class{constructor(){Bn.set(this,void 0),so.set(this,void 0),oo.set(this,void 0),bl.set(this,void 0),Sl.set(this,void 0),Pl.set(this,new zT)}appendVertex(e,i){ht(this,Pl,"f").appendFloat(e).appendFloat(i)}render(e,i,r){if(!ht(this,Bn,"f")){Fa(this,Bn,e.createProgram({vertex:{glsl:ey},fragment:{glsl:ty}}),"f"),Fa(this,oo,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{format:v.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:ht(this,Bn,"f")}),"f"),Fa(this,so,e.createRenderPipeline({inputLayout:ht(this,oo,"f"),program:ht(this,Bn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],topology:qe.TRIANGLE_STRIP}),"f"),ht(this,Pl,"f").clear(),this.appendVertex(-1,-1),this.appendVertex(-1,1),this.appendVertex(1,-1),this.appendVertex(1,1);const n=ht(this,Pl,"f").bytes(),s=e.createBuffer({viewOrSize:n.byteLength,usage:U.VERTEX,hint:Q.DYNAMIC});Fa(this,Sl,s,"f"),s.setSubData(0,n),Fa(this,bl,e.createBindings({pipeline:ht(this,so,"f"),uniformBufferBindings:[{buffer:r}]}),"f")}i.setBindings(ht(this,bl,"f")),i.setPipeline(ht(this,so,"f")),i.setVertexInput(ht(this,oo,"f"),[{buffer:ht(this,Sl,"f")}],null),i.draw(4)}destroy(){ht(this,Bn,"f").destroy(),ht(this,Sl,"f").destroy(),ht(this,so,"f").destroy(),ht(this,oo,"f").destroy(),ht(this,bl,"f").destroy()}};Bn=new WeakMap,so=new WeakMap,oo=new WeakMap,bl=new WeakMap,Sl=new WeakMap,Pl=new WeakMap;let bE=class extends Sf{constructor(){super(...arguments),this.renderable=!1}containsPoint(e,i){throw new Error("Method not implemented.")}render(e,i,r){}destroy(){}};var iy=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Rr=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},ge=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ao,yt,Ir,In,Fn,Cl,Ml,Gd;(function(t){t[t.NONE=0]="NONE",t[t.GRID=1]="GRID",t[t.DOTS=2]="DOTS"})(Gd||(Gd={}));let ry=class{constructor(){ao.set(this,void 0),yt.set(this,void 0),Ir.set(this,void 0),In.set(this,void 0),Fn.set(this,void 0),Cl.set(this,Gd.GRID),Ml.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o,camera:a}=e;i.initAsync.tapPromise(()=>iy(this,void 0,void 0,function*(){let l;n==="webgl"?l=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(d){}}):l=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:c,height:h}=r,u=yield l.createSwapChain(r);u.configureSwapChain(c,h),Rr(this,ao,u,"f"),Rr(this,yt,u.getDevice(),"f"),Rr(this,Ir,ge(this,yt,"f").createRenderTargetFromTexture(ge(this,yt,"f").createTexture({format:v.U8_RGBA_RT,width:c,height:h,usage:Ae.RENDER_TARGET})),"f"),Rr(this,Fn,ge(this,yt,"f").createBuffer({viewOrSize:new Float32Array([...Sn(a.projectionMatrix),...Sn(a.viewMatrix),...Sn(a.viewProjectionMatrixInv),a.zoom,ge(this,Cl,"f"),0,0]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),Rr(this,Ml,new AE,"f")})),i.resize.tap((l,c)=>{ge(this,ao,"f").configureSwapChain(l*o,c*o),ge(this,Ir,"f")&&(ge(this,Ir,"f").destroy(),Rr(this,Ir,ge(this,yt,"f").createRenderTargetFromTexture(ge(this,yt,"f").createTexture({format:v.U8_RGBA_RT,width:l*o,height:c*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{ge(this,Fn,"f").destroy(),ge(this,Ml,"f").destroy(),ge(this,Ir,"f").destroy(),ge(this,yt,"f").destroy(),ge(this,yt,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:l,height:c}=ge(this,ao,"f").getCanvas(),h=ge(this,ao,"f").getOnscreenTexture();ge(this,Fn,"f").setSubData(0,new Uint8Array(new Float32Array([...Sn(a.projectionMatrix),...Sn(a.viewMatrix),...Sn(a.viewProjectionMatrixInv),a.zoom,ge(this,Cl,"f"),0,0]).buffer)),ge(this,yt,"f").beginFrame(),Rr(this,In,ge(this,yt,"f").createRenderPass({colorAttachment:[ge(this,Ir,"f")],colorResolveTo:[h],colorClearColor:[rn]}),"f"),ge(this,In,"f").setViewport(0,0,l,c),ge(this,Ml,"f").render(ge(this,yt,"f"),ge(this,In,"f"),ge(this,Fn,"f"))}),i.endFrame.tap(()=>{ge(this,yt,"f").submitPass(ge(this,In,"f")),ge(this,yt,"f").endFrame()}),i.render.tap(l=>{l.transform.updateTransform(l.parent?l.parent.transform:RE),l.render(ge(this,yt,"f"),ge(this,In,"f"),ge(this,Fn,"f"))})}setCheckboardStyle(e){Rr(this,Cl,e,"f")}};ao=new WeakMap,yt=new WeakMap,Ir=new WeakMap,In=new WeakMap,Fn=new WeakMap,Cl=new WeakMap,Ml=new WeakMap;var ci=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ln=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Nl,On,Fr,lo;const ny=.02,sy=4,oy=100,Xc=[.02,.05,.1,.15,.2,.33,.5,.75,1,1.25,1.5,2,2.5,3,4],ay=t=>Xc.find(e=>e>t)||Xc[Xc.length-1],ly=t=>[...Xc].reverse().find(e=>e<t)||Xc[0];let cy=class{constructor(){Nl.set(this,void 0),On.set(this,{}),Fr.set(this,void 0),lo.set(this,!1)}apply(e){const{canvas:i,camera:r,root:n,api:{client2Viewport:s}}=e;n.hitArea=new mr(-Number.MAX_VALUE,-Number.MAX_VALUE,1/0,1/0),n.draggable=!0;const o=me();let a,l,c;const h=Re();let u,d=!1;function f(_){const b=i.getBoundingClientRect(),S=_.nativeEvent.clientX-b.left,P=_.nativeEvent.clientY-b.top,O=S/i.clientWidth,Y=P/i.clientHeight,ce=O*2-1,H=Y*-2+1;return[ce,H]}function E(_){const b=je(Re(),f(_),o);r.x=a+h[0]-b[0],r.y=l+h[1]-b[1]}function g(_){const b=(_.nativeEvent.clientX-u[0])/100,S=me();Nt(S,S,[h[0],h[1]]),ir(S,S,b),Nt(S,S,[-h[0],-h[1]]),r.x=a,r.y=l,r.rotation=c,tr(S,S,r.matrix),r.rotation=c+b,r.x=S[6],r.y=S[7]}n.addEventListener("dragstart",_=>{ci(this,Fr,"f")||(d=_.shiftKey,rh(o,r.viewProjectionMatrixInv),a=r.x,l=r.y,c=r.rotation,je(h,f(_),o),u=[_.nativeEvent.clientX,_.nativeEvent.clientY])}),n.addEventListener("drag",_=>{ci(this,Fr,"f")||(d?g(_):E(_))}),n.addEventListener("dragend",_=>{ci(this,Fr,"f")||(d=!1)});const p=(_,b)=>{const S=Math.max(ny,Math.min(sy,r.zoom*Math.pow(2,b*-.01))),P=s(_);r.gotoLandmark(r.createLandmark({viewportX:P.x,viewportY:P.y,zoom:S}),{duration:0})};n.addEventListener("wheel",_=>{_.preventDefault(),p({x:_.nativeEvent.clientX,y:_.nativeEvent.clientY},_.deltaY)});const y=_=>{_.pointerType==="mouse"?ln(this,Nl,!0,"f"):ci(this,On,"f")[_.pointerId]||(ci(this,On,"f")[_.pointerId]={last:null}),this.touchCount>=2?ln(this,Fr,!0,"f"):ln(this,Fr,!1,"f")},T=_=>{if(_.pointerType==="mouse"&&ln(this,Nl,!1,"f"),_.pointerType!=="mouse"&&delete ci(this,On,"f")[_.pointerId],ci(this,lo,"f")&&this.touchCount<=1)return ln(this,lo,!1,"f"),ln(this,Fr,!1,"f"),!0},w=_=>{if(this.touchCount>=2){const b=_.global.x,S=_.global.y,P=ci(this,On,"f"),O=Object.keys(P),Y=Number(O[0]),ce=Number(O[1]),H=P[Y],ee=P[ce],Pe=H.last&&ee.last?Math.sqrt(Math.pow(ee.last.x-H.last.x,2)+Math.pow(ee.last.y-H.last.y,2)):null;if(Y===_.pointerId?H.last={x:b,y:S}:ce===_.pointerId&&(ee.last={x:b,y:S}),Pe){const Xt=new ve(H.last.x+(ee.last.x-H.last.x)/2,H.last.y+(ee.last.y-H.last.y)/2),_t=Math.sqrt(Math.pow(ee.last.x-H.last.x,2)+Math.pow(ee.last.y-H.last.y,2));p(Xt,(Pe/_t-1)*oy)}else ci(this,lo,"f")||ln(this,lo,!0,"f")}};n.addEventListener("pointerdown",y),n.addEventListener("pointermove",w),n.addEventListener("pointerup",T),n.addEventListener("pointerupoutside",T),n.addEventListener("pointercancel",T)}get touchCount(){return(ci(this,Nl,"f")?1:0)+Object.keys(ci(this,On,"f")).length}};Nl=new WeakMap,On=new WeakMap,Fr=new WeakMap,lo=new WeakMap;let hy=class{apply(e){const{canvas:i,hooks:r,globalThis:n,supportsPointerEvents:s,supportsTouchEvents:o}=e,a=_=>{_.preventDefault(),r.pointerMove.call(_)},l=_=>{r.pointerUp.call(_)},c=_=>{r.pointerDown.call(_)},h=_=>{r.pointerOver.call(_)},u=_=>{r.pointerOut.call(_)},d=_=>{r.pointerCancel.call(_)},f=_=>{r.pointerWheel.call(_)},E=_=>{n.document.addEventListener("pointermove",a,!0),_.addEventListener("pointerdown",c,!0),_.addEventListener("pointerleave",u,!0),_.addEventListener("pointerover",h,!0),n.addEventListener("pointerup",l,!0),n.addEventListener("pointercancel",d,!0)},g=_=>{_.addEventListener("touchstart",c,!0),_.addEventListener("touchend",l,!0),_.addEventListener("touchmove",a,!0),_.addEventListener("touchcancel",d,!0)},p=_=>{n.document.addEventListener("mousemove",a,!0),_.addEventListener("mousedown",c,!0),_.addEventListener("mouseout",u,!0),_.addEventListener("mouseover",h,!0),n.addEventListener("mouseup",l,!0)},y=_=>{n.document.removeEventListener("pointermove",a,!0),_.removeEventListener("pointerdown",c,!0),_.removeEventListener("pointerleave",u,!0),_.removeEventListener("pointerover",h,!0),n.removeEventListener("pointerup",l,!0)},T=_=>{_.removeEventListener("touchstart",c,!0),_.removeEventListener("touchend",l,!0),_.removeEventListener("touchmove",a,!0),_.removeEventListener("touchcancel",d,!0)},w=_=>{n.document.removeEventListener("mousemove",a,!0),_.removeEventListener("mousedown",c,!0),_.removeEventListener("mouseout",u,!0),_.removeEventListener("mouseover",h,!0),n.removeEventListener("mouseup",l,!0)};r.init.tap(()=>{s?E(i):(p(i),o&&g(i)),i.addEventListener("wheel",f,{capture:!0})}),r.destroy.tap(()=>{s?y(i):(w(i),o&&T(i)),i.removeEventListener("wheel",f,!0)})}};var Hp=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Je=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Kd,Bl,Zd,gi,ar;const uy=1,dy={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};let fy=class{constructor(){Kd.set(this,!0),Bl.set(this,new mi(null)),Zd.set(this,new zd(null)),gi.set(this,void 0),ar.set(this,void 0),this.onPointerMove=e=>{const i=this.normalizeToPointerEvent(e);for(const r of i){const n=this.bootstrapEvent(Je(this,Bl,"f"),r);Je(this,gi,"f").mapEvent(n)}this.setCursor(Je(this,gi,"f").cursor)}}apply(e){const{hooks:i,root:r}=e;Hp(this,ar,e,"f"),Hp(this,gi,new ZT(r),"f"),Je(this,gi,"f").setPickHandler((n,s)=>{const{picked:o}=i.pickSync.call({position:{x:n,y:s},picked:[],topmost:!0});return o[0]||null}),i.pointerWheel.tap(n=>{const s=this.normalizeWheelEvent(n);Je(this,gi,"f").mapEvent(s)}),i.pointerDown.tap(n=>{const s=this.normalizeToPointerEvent(n);Je(this,Kd,"f")&&s[0].isNormalized&&(n.cancelable||!("cancelable"in n))&&n.preventDefault();for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this.bootstrapEvent(Je(this,Bl,"f"),l);Je(this,gi,"f").mapEvent(c)}this.setCursor(Je(this,gi,"f").cursor)}),i.pointerUp.tap(n=>{let s=n.target;n.composedPath&&n.composedPath().length>0&&(s=n.composedPath()[0]);const o=s!==Je(this,ar,"f").canvas?"outside":"",a=this.normalizeToPointerEvent(n);for(let l=0,c=a.length;l<c;l++){const h=this.bootstrapEvent(Je(this,Bl,"f"),a[l]);h.type+=o,Je(this,gi,"f").mapEvent(h)}this.setCursor(Je(this,gi,"f").cursor)}),i.pointerMove.tap(this.onPointerMove),i.pointerOver.tap(this.onPointerMove),i.pointerOut.tap(this.onPointerMove),i.pointerCancel.tap(this.onPointerMove)}normalizeWheelEvent(e){const i=Je(this,Zd,"f");this.transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode;const{x:r,y:n}=this.getViewportXY(e);i.client.x=r,i.client.y=n;const{x:s,y:o}=Je(this,ar,"f").api.viewport2Canvas(i.client);return i.screen.x=s,i.screen.y=o,i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.metaKey=i.metaKey,e.shiftKey=i.shiftKey,e.ctrlKey=i.ctrlKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.screen.x=i.screenX,e.screen.y=i.screenY,e.relatedTarget=null}setCursor(e){Je(this,ar,"f").canvas.style.cursor=e}normalizeToPointerEvent(e){const{supportsTouchEvents:i,supportsPointerEvents:r}=Je(this,ar,"f"),n=[];if(i&&e instanceof TouchEvent)for(let s=0;s<e.changedTouches.length;s++){const o=e.changedTouches[s];Ve(o.button)&&(o.button=0),Ve(o.buttons)&&(o.buttons=1),Ve(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),Ve(o.width)&&(o.width=o.radiusX||1),Ve(o.height)&&(o.height=o.radiusY||1),Ve(o.tiltX)&&(o.tiltX=0),Ve(o.tiltY)&&(o.tiltY=0),Ve(o.pointerType)&&(o.pointerType="touch"),Ve(o.pointerId)&&(o.pointerId=o.identifier||0),Ve(o.pressure)&&(o.pressure=o.force||.5),Ve(o.twist)&&(o.twist=0),Ve(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,n.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!r||!(e instanceof globalThis.PointerEvent))){const s=e;Ve(s.isPrimary)&&(s.isPrimary=!0),Ve(s.width)&&(s.width=1),Ve(s.height)&&(s.height=1),Ve(s.tiltX)&&(s.tiltX=0),Ve(s.tiltY)&&(s.tiltY=0),Ve(s.pointerType)&&(s.pointerType="mouse"),Ve(s.pointerId)&&(s.pointerId=uy),Ve(s.pressure)&&(s.pressure=.5),Ve(s.twist)&&(s.twist=0),Ve(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(e);return n}bootstrapEvent(e,i){e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this.transferMouseData(e,i);const{x:r,y:n}=this.getViewportXY(i);e.client.x=r,e.client.y=n;const{x:s,y:o}=Je(this,ar,"f").api.viewport2Canvas(e.client);return e.screen.x=s,e.screen.y=o,e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=dy[e.type]||e.type),e}getViewportXY(e){let i,r;const{offsetX:n,offsetY:s,clientX:o,clientY:a}=e;if(!Xp(n)&&!Xp(s))i=n,r=s;else{const l=Je(this,ar,"f").api.client2Viewport({x:o,y:a});i=l.x,r=l.y}return{x:i,y:r}}};Kd=new WeakMap,Bl=new WeakMap,Zd=new WeakMap,gi=new WeakMap,ar=new WeakMap;const Yp=new ve;let py=class{apply(e){const{hooks:i,root:r}=e;i.pickSync.tap(n=>this.pick(n,r))}pick(e,i){const{position:{x:r,y:n}}=e,s=[];return Vu(i,o=>{this.hitTest(o,r,n)&&s.unshift(o)}),e.picked=s,e}hitTest(e,i,r){if(e.pointerEvents==="none")return!1;if(e.hitArea||e.renderable){e.worldTransform.applyInverse({x:i,y:r},Yp);const{x:n,y:s}=Yp;return e.hitArea?e.hitArea.contains(n,s):e.containsPoint(n,s)}return!1}};var _y=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},zp=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Il;function jp(t,e){do{if(t&&e(t))return t;t=t.parent}while(t!==void 0);return null}let Ey=class{constructor(e={}){Il.set(this,void 0),_y(this,Il,Object.assign({overlap:"pointer",dragstartTimeThreshold:0,dragstartDistanceThreshold:0},e),"f")}apply(e){const{root:i,hooks:r,api:{elementsFromPoint:n}}=e,s=o=>{const a=o.target,l=jp(a,c=>c.draggable===!0);if(l){let c=!1;const h=o.timeStamp,u=[o.clientX,o.clientY];let d=null,f=[o.clientX,o.clientY];const E=p=>{if(!c){const _=p.timeStamp-h,b=vE(p.clientX,p.clientY,...u);if(_<=zp(this,Il,"f").dragstartTimeThreshold||b<=zp(this,Il,"f").dragstartDistanceThreshold)return;p.type="dragstart",l.dispatchEvent(p),c=!0}p.type="drag",p.dx=p.clientX-f[0],p.dy=p.clientY-f[1],l.dispatchEvent(p),f=[p.clientX,p.clientY];const y=[p.globalX,p.globalY],T=n(y[0],y[1]),w=T[T.indexOf(a)+1];if(w){const _=jp(w,b=>b.droppable===!0);d!==_&&(d&&(p.type="dragleave",p.target=d,d.dispatchEvent(p)),_&&(p.type="dragenter",p.target=_,_.dispatchEvent(p)),d=_,d&&(p.type="dragover",p.target=d,d.dispatchEvent(p)))}};i.addEventListener("pointermove",E);const g=function(p){if(c){p.detail={preventClick:!0};const y=p;d&&(y.type="drop",y.target=d,d.dispatchEvent(y)),y.type="dragend",l.dispatchEvent(y),c=!1}i.removeEventListener("pointermove",E)};a.addEventListener("pointerup",g,{once:!0}),a.addEventListener("pointerupoutside",g,{once:!0})}};r.init.tap(()=>{i.addEventListener("pointerdown",s)}),r.destroy.tap(()=>{i.removeEventListener("pointerdown",s)})}};Il=new WeakMap;var vy=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},He=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Oa=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Zh,Zt,Fl,qh,Or,Ol;let SE=class{get root(){return He(this,Or,"f")}get camera(){return He(this,Ol,"f")}constructor(e){Zh.set(this,void 0),Zt.set(this,void 0),Fl.set(this,void 0),qh.set(this,void 0),Or.set(this,new bE),Ol.set(this,void 0);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=HT(),a=s??o.devicePixelRatio,l=!!o.PointerEvent,c="ontouchstart"in o,{width:h,height:u}=i,d=new mE(h/a,u/a);Oa(this,Ol,d,"f"),Oa(this,Zt,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:a,supportsPointerEvents:l,supportsTouchEvents:c,hooks:{init:new Ht,initAsync:new XT,beginFrame:new Ht,render:new Ht,endFrame:new Ht,destroy:new Ht,resize:new Ht,pointerDown:new Ht,pointerUp:new Ht,pointerMove:new Ht,pointerOut:new Ht,pointerOver:new Ht,pointerWheel:new Ht,pointerCancel:new Ht,pickSync:new VT},camera:d,root:He(this,Or,"f"),api:{elementsFromPoint:this.elementsFromPoint.bind(this),elementFromPoint:this.elementFromPoint.bind(this),client2Viewport:this.client2Viewport.bind(this),viewport2Canvas:d.viewport2Canvas.bind(d),viewport2Client:this.viewport2Client.bind(this),canvas2Viewport:d.canvas2Viewport.bind(d)}},"f"),Oa(this,Fl,new ry,"f"),Oa(this,qh,new fy,"f");const f=[new hy,He(this,qh,"f"),new py,new cy,He(this,Fl,"f"),new Ey({dragstartTimeThreshold:100,dragstartDistanceThreshold:10})];Oa(this,Zh,vy(this,void 0,void 0,function*(){const{hooks:E}=He(this,Zt,"f");return f.forEach(g=>{g.apply(He(this,Zt,"f"))}),E.init.call(),yield E.initAsync.promise(),this}),"f")}get initialized(){return He(this,Zh,"f").then(()=>this)}render(){const{hooks:e}=He(this,Zt,"f");e.beginFrame.call(),Vu(He(this,Or,"f"),i=>{e.render.call(i)}),e.endFrame.call()}resize(e,i){const{hooks:r}=He(this,Zt,"f");He(this,Ol,"f").projection(e,i),r.resize.call(e,i)}destroy(){const{hooks:e}=He(this,Zt,"f");Vu(He(this,Or,"f"),i=>{i.destroy()}),e.destroy.call()}getDOM(){return He(this,Zt,"f").canvas}appendChild(e){He(this,Or,"f").appendChild(e)}removeChild(e){He(this,Or,"f").removeChild(e)}setCheckboardStyle(e){He(this,Fl,"f").setCheckboardStyle(e)}elementsFromPoint(e,i){const{picked:r}=He(this,Zt,"f").hooks.pickSync.call({topmost:!1,position:{x:e,y:i},picked:[]});return r}elementFromPoint(e,i){const{picked:r}=He(this,Zt,"f").hooks.pickSync.call({topmost:!0,position:{x:e,y:i},picked:[]});return r[0]}client2Viewport({x:e,y:i}){const{left:r,top:n}=He(this,Zt,"f").canvas.getBoundingClientRect();return{x:e-r,y:i-n}}viewport2Client({x:e,y:i}){const{left:r,top:n}=He(this,Zt,"f").canvas.getBoundingClientRect();return{x:e+r,y:i+n}}zoomIn(){const{camera:e}=this;e.cancelLandmarkAnimation();const i=e.createLandmark({viewportX:e.width/2,viewportY:e.height/2,zoom:ay(e.zoom)});e.gotoLandmark(i,{duration:300,easing:"ease"})}zoomOut(){const{camera:e}=this;e.cancelLandmarkAnimation();const i=e.createLandmark({viewportX:e.width/2,viewportY:e.height/2,zoom:ly(e.zoom)});e.gotoLandmark(i,{duration:300,easing:"ease"})}};Zh=new WeakMap,Zt=new WeakMap,Fl=new WeakMap,qh=new WeakMap,Or=new WeakMap,Ol=new WeakMap;const PE=Symbol("canvas");var sd=function(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s},my=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Ii=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Gp=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},qd,$i,xl;let As=class extends Qr{constructor(){super(...arguments),this.renderer="webgl",this.zoom=100,qd.set(this,new uE(this,{context:PE})),$i.set(this,void 0),xl.set(this,void 0)}connectedCallback(){super.connectedCallback(),this.addEventListener("sl-resize",this.resize)}disconnectedCallback(){var e;this.removeEventListener("sl-resize",this.resize),Ii(this,xl,"f")&&window.cancelAnimationFrame(Ii(this,xl,"f")),(e=Ii(this,$i,"f"))===null||e===void 0||e.destroy(),super.disconnectedCallback()}firstUpdated(){return my(this,void 0,void 0,function*(){Gp(this,$i,yield new SE({canvas:this.$canvas,renderer:this.renderer}).initialized,"f"),Ii(this,qd,"f").setValue(Ii(this,$i,"f")),Ii(this,$i,"f").camera.onchange=()=>{this.zoom=Math.round(Ii(this,$i,"f").camera.zoom*100)},this.dispatchEvent(new CustomEvent("ic-ready",{detail:Ii(this,$i,"f")}));const e=i=>{this.dispatchEvent(new CustomEvent("ic-frame",{detail:i})),Ii(this,$i,"f").render(),Gp(this,xl,window.requestAnimationFrame(e),"f")};e()})}resize(e){var i;const r=e.detail,{width:n,height:s}=r.entries[0].contentRect,o=window.devicePixelRatio;if(n&&s){const a=this.$canvas;a.width=n*o,a.height=s*o,(i=Ii(this,$i,"f"))===null||i===void 0||i.resize(n,s)}}render(){return td`
      <sl-resize-observer>
        <canvas></canvas>
        <ic-zoom-toolbar-lesson7 zoom=${this.zoom}></ic-zoom-toolbar-lesson7>
      </sl-resize-observer>
    `}};qd=new WeakMap;$i=new WeakMap;xl=new WeakMap;As.styles=ed`
    :host {
      position: relative;
    }

    canvas {
      width: 100%;
      height: 100%;
      outline: none;
      padding: 0;
      margin: 0;
      touch-action: none;
    }
  `;sd([hh()],As.prototype,"renderer",void 0);sd([fE()],As.prototype,"zoom",void 0);sd([pE("canvas",!0)],As.prototype,"$canvas",void 0);As=sd([rd("ic-canvas-lesson7")],As);var Pf=function(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let ga=class extends Qr{constructor(){super(...arguments),this.zoom=100}zoomOut(){this.canvas.zoomOut()}zoomIn(){this.canvas.zoomIn()}render(){return td`
      <sl-button-group label="Zoom toolbar">
        <sl-tooltip content="Zoom out">
          <sl-icon-button
            name="dash-lg"
            label="Zoom out"
            @click="${this.zoomOut}"
          ></sl-icon-button>
        </sl-tooltip>
        <span>${this.zoom}%</span>
        <sl-tooltip content="Zoom in">
          <sl-icon-button
            name="plus-lg"
            label="Zoom in"
            @click="${this.zoomIn}"
          ></sl-icon-button>
        </sl-tooltip>
      </sl-button-group>
    `}};ga.styles=ed`
    :host {
      position: absolute;
      right: 16px;
      bottom: 16px;
      box-shadow: var(--sl-shadow-medium);
      background: white;
    }

    span {
      font-size: 12px;
      line-height: 32px;
      width: 32px;
      text-align: center;
      color: var(--sl-color-neutral-600);
    }
  `;Pf([dE({context:PE,subscribe:!0})],ga.prototype,"canvas",void 0);Pf([hh()],ga.prototype,"zoom",void 0);ga=Pf([rd("ic-zoom-toolbar-lesson7")],ga);const gy=Object.freeze(Object.defineProperty({__proto__:null,Camera:mE,Canvas:SE,Circle:JT,Grid:AE,Group:bE,IDENTITY_TRANSFORM:RE,get InfiniteCanvas(){return As},Rectangle:mr,Shape:Sf,get ZoomToolbar(){return ga},isFillOrStrokeAffected:wE},Symbol.toStringTag,{value:"Module"})),Ty=W({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(t){return(e,i)=>(R(),N("span",{class:be(["VPBadge",e.type])},[M(e.$slots,"default",{},()=>[Ci(ye(e.text),1)])],2))}}),yy={key:0,class:"VPBackdrop"},Ry=W({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(t){return(e,i)=>(R(),q(uf,{name:"fade"},{default:B(()=>[e.show?(R(),N("div",yy)):$("",!0)]),_:1}))}}),wy=J(Ry,[["__scopeId","data-v-ffb3b5a7"]]),_e=E_;function Ay(t,e){let i,r=!1;return()=>{i&&clearTimeout(i),r?i=setTimeout(t,e):(t(),(r=!0)&&setTimeout(()=>r=!1,e))}}function Qd(t){return/^\//.test(t)?t:`/${t}`}function Cf(t){const{pathname:e,search:i,hash:r,protocol:n}=new URL(t,"http://a.com");if(tv(t)||t.startsWith("#")||!n.startsWith("http")||!iv(e))return t;const{site:s}=_e(),o=e.endsWith("/")||e.endsWith(".html")?t:t.replace(/(?:(^\.+)\/)?.*$/,`$1${e.replace(/(\.md)?$/,s.value.cleanUrls?"":".html")}${i}${r}`);return df(o)}const Mf=we(Ta?location.hash:"");Ta&&window.addEventListener("hashchange",()=>{Mf.value=location.hash});function uh({removeCurrent:t=!0,correspondingLink:e=!1}={}){const{site:i,localeIndex:r,page:n,theme:s}=_e(),o=te(()=>{var l,c;return{label:(l=i.value.locales[r.value])==null?void 0:l.label,link:((c=i.value.locales[r.value])==null?void 0:c.link)||(r.value==="root"?"/":`/${r.value}/`)}});return{localeLinks:te(()=>Object.entries(i.value.locales).flatMap(([l,c])=>t&&o.value.label===c.label?[]:{text:c.label,link:by(c.link||(l==="root"?"/":`/${l}/`),s.value.i18nRouting!==!1&&e,n.value.relativePath.slice(o.value.link.length-1),!i.value.cleanUrls)+Mf.value})),currentLang:o}}function by(t,e,i,r){return e?t.replace(/\/$/,"")+Qd(i.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,r?".html":"")):t}const Sy=t=>(nt("data-v-88c0f218"),t=t(),st(),t),Py={class:"NotFound"},Cy={class:"code"},My={class:"title"},Ny=Sy(()=>I("div",{class:"divider"},null,-1)),By={class:"quote"},Iy={class:"action"},Fy=["href","aria-label"],Oy=W({__name:"NotFound",setup(t){const{site:e,theme:i}=_e(),{localeLinks:r}=uh({removeCurrent:!1}),n=we("/");return Jr(()=>{var o;const s=window.location.pathname.replace(e.value.base,"").replace(/(^.*?\/).*$/,"/$1");r.value.length&&(n.value=((o=r.value.find(({link:a})=>a.startsWith(s)))==null?void 0:o.link)||r.value[0].link)}),(s,o)=>{var a,l,c,h,u;return R(),N("div",Py,[I("p",Cy,ye(((a=A(i).notFound)==null?void 0:a.code)??"404"),1),I("h1",My,ye(((l=A(i).notFound)==null?void 0:l.title)??"PAGE NOT FOUND"),1),Ny,I("blockquote",By,ye(((c=A(i).notFound)==null?void 0:c.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),I("div",Iy,[I("a",{class:"link",href:A(df)(n.value),"aria-label":((h=A(i).notFound)==null?void 0:h.linkLabel)??"go to home"},ye(((u=A(i).notFound)==null?void 0:u.linkText)??"Take me home"),9,Fy)])])}}}),xy=J(Oy,[["__scopeId","data-v-88c0f218"]]);function CE(t,e){if(Array.isArray(t))return Qh(t);if(t==null)return[];e=Qd(e);const i=Object.keys(t).sort((n,s)=>s.split("/").length-n.split("/").length).find(n=>e.startsWith(Qd(n))),r=i?t[i]:[];return Array.isArray(r)?Qh(r):Qh(r.items,r.base)}function Dy(t){const e=[];let i=0;for(const r in t){const n=t[r];if(n.items){i=e.push(n);continue}e[i]||e.push({items:[]}),e[i].items.push(n)}return e}function Uy(t){const e=[];function i(r){for(const n of r)n.text&&n.link&&e.push({text:n.text,link:n.link,docFooterText:n.docFooterText}),n.items&&i(n.items)}return i(t),e}function Jd(t,e){return Array.isArray(e)?e.some(i=>Jd(t,i)):gs(t,e.link)?!0:e.items?Jd(t,e.items):!1}function Qh(t,e){return[...t].map(i=>{const r={...i},n=r.base||e;return n&&r.link&&(r.link=n+r.link),r.items&&(r.items=Qh(r.items,n)),r})}function gr(){const{frontmatter:t,page:e,theme:i}=_e(),r=Od("(min-width: 960px)"),n=we(!1),s=te(()=>{const g=i.value.sidebar,p=e.value.relativePath;return g?CE(g,p):[]}),o=we(s.value);en(s,(g,p)=>{JSON.stringify(g)!==JSON.stringify(p)&&(o.value=s.value)});const a=te(()=>t.value.sidebar!==!1&&o.value.length>0&&t.value.layout!=="home"),l=te(()=>c?t.value.aside==null?i.value.aside==="left":t.value.aside==="left":!1),c=te(()=>t.value.layout==="home"?!1:t.value.aside!=null?!!t.value.aside:i.value.aside!==!1),h=te(()=>a.value&&r.value),u=te(()=>a.value?Dy(o.value):[]);function d(){n.value=!0}function f(){n.value=!1}function E(){n.value?f():d()}return{isOpen:n,sidebar:o,sidebarGroups:u,hasSidebar:a,hasAside:c,leftAside:l,isSidebarEnabled:h,open:d,close:f,toggle:E}}function ky(t,e){let i;Ku(()=>{i=t.value?document.activeElement:void 0}),Jr(()=>{window.addEventListener("keyup",r)}),Zu(()=>{window.removeEventListener("keyup",r)});function r(n){n.key==="Escape"&&t.value&&(e(),i==null||i.focus())}}function $y(t){const{page:e}=_e(),i=we(!1),r=te(()=>t.value.collapsed!=null),n=te(()=>!!t.value.link),s=we(!1),o=()=>{s.value=gs(e.value.relativePath,t.value.link)};en([e,t,Mf],o),Jr(o);const a=te(()=>s.value?!0:t.value.items?Jd(e.value.relativePath,t.value.items):!1),l=te(()=>!!(t.value.items&&t.value.items.length));Ku(()=>{i.value=!!(r.value&&t.value.collapsed)}),v_(()=>{(s.value||a.value)&&(i.value=!1)});function c(){r.value&&(i.value=!i.value)}return{collapsed:i,collapsible:r,isLink:n,isActiveLink:s,hasActiveLink:a,hasChildren:l,toggle:c}}function Wy(){const{hasSidebar:t}=gr(),e=Od("(min-width: 960px)"),i=Od("(min-width: 1280px)");return{isAsideEnabled:te(()=>!i.value&&!e.value?!1:t.value?i.value:e.value)}}const ef=[];function ME(t){return typeof t.outline=="object"&&!Array.isArray(t.outline)&&t.outline.label||t.outlineTitle||"On this page"}function Nf(t){const e=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(i=>i.id&&i.hasChildNodes()).map(i=>{const r=Number(i.tagName[1]);return{element:i,title:Ly(i),link:"#"+i.id,level:r}});return Xy(e,t)}function Ly(t){let e="";for(const i of t.childNodes)if(i.nodeType===1){if(i.classList.contains("VPBadge")||i.classList.contains("header-anchor")||i.classList.contains("ignore-header"))continue;e+=i.textContent}else i.nodeType===3&&(e+=i.textContent);return e.trim()}function Xy(t,e){if(e===!1)return[];const i=(typeof e=="object"&&!Array.isArray(e)?e.level:e)||2,[r,n]=typeof i=="number"?[i,i]:i==="deep"?[2,6]:i;t=t.filter(o=>o.level>=r&&o.level<=n),ef.length=0;for(const{element:o,link:a}of t)ef.push({element:o,link:a});const s=[];e:for(let o=0;o<t.length;o++){const a=t[o];if(o===0)s.push(a);else{for(let l=o-1;l>=0;l--){const c=t[l];if(c.level<a.level){(c.children||(c.children=[])).push(a);continue e}}s.push(a)}}return s}function Vy(t,e){const{isAsideEnabled:i}=Wy(),r=Ay(s,100);let n=null;Jr(()=>{requestAnimationFrame(s),window.addEventListener("scroll",r)}),rv(()=>{o(location.hash)}),Zu(()=>{window.removeEventListener("scroll",r)});function s(){if(!i.value)return;const a=window.scrollY,l=window.innerHeight,c=document.body.offsetHeight,h=Math.abs(a+l-c)<1,u=ef.map(({element:f,link:E})=>({link:E,top:Hy(f)})).filter(({top:f})=>!Number.isNaN(f)).sort((f,E)=>f.top-E.top);if(!u.length){o(null);return}if(a<1){o(null);return}if(h){o(u[u.length-1].link);return}let d=null;for(const{link:f,top:E}of u){if(E>a+nv()+4)break;d=f}o(d)}function o(a){n&&n.classList.remove("active"),a==null?n=null:n=t.value.querySelector(`a[href="${decodeURIComponent(a)}"]`);const l=n;l?(l.classList.add("active"),e.value.style.top=l.offsetTop+39+"px",e.value.style.opacity="1"):(e.value.style.top="33px",e.value.style.opacity="0")}}function Hy(t){let e=0;for(;t!==document.body;){if(t===null)return NaN;e+=t.offsetTop,t=t.offsetParent}return e}const Yy=["href","title"],zy=W({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(t){function e({target:i}){const r=i.href.split("#")[1],n=document.getElementById(decodeURIComponent(r));n==null||n.focus({preventScroll:!0})}return(i,r)=>{const n=bs("VPDocOutlineItem",!0);return R(),N("ul",{class:be(["VPDocOutlineItem",i.root?"root":"nested"])},[(R(!0),N(xe,null,Bt(i.headers,({children:s,link:o,title:a})=>(R(),N("li",null,[I("a",{class:"outline-link",href:o,onClick:e,title:a},ye(a),9,Yy),s!=null&&s.length?(R(),q(n,{key:0,headers:s},null,8,["headers"])):$("",!0)]))),256))],2)}}}),NE=J(zy,[["__scopeId","data-v-09ae36dd"]]),jy=t=>(nt("data-v-c490ae5f"),t=t(),st(),t),Gy={class:"content"},Ky={class:"outline-title",role:"heading","aria-level":"2"},Zy={"aria-labelledby":"doc-outline-aria-label"},qy=jy(()=>I("span",{class:"visually-hidden",id:"doc-outline-aria-label"}," Table of Contents for current page ",-1)),Qy=W({__name:"VPDocAsideOutline",setup(t){const{frontmatter:e,theme:i}=_e(),r=m_([]);qu(()=>{r.value=Nf(e.value.outline??i.value.outline)});const n=we(),s=we();return Vy(n,s),(o,a)=>(R(),N("div",{class:be(["VPDocAsideOutline",{"has-outline":r.value.length>0}]),ref_key:"container",ref:n,role:"navigation"},[I("div",Gy,[I("div",{class:"outline-marker",ref_key:"marker",ref:s},null,512),I("div",Ky,ye(A(ME)(A(i))),1),I("nav",Zy,[qy,V(NE,{headers:r.value,root:!0},null,8,["headers"])])])],2))}}),Jy=J(Qy,[["__scopeId","data-v-c490ae5f"]]),eR={class:"VPDocAsideCarbonAds"},tR=W({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(t){const e=()=>null;return(i,r)=>(R(),N("div",eR,[V(A(e),{"carbon-ads":i.carbonAds},null,8,["carbon-ads"])]))}}),iR=t=>(nt("data-v-4df922d2"),t=t(),st(),t),rR={class:"VPDocAside"},nR=iR(()=>I("div",{class:"spacer"},null,-1)),sR=W({__name:"VPDocAside",setup(t){const{theme:e}=_e();return(i,r)=>(R(),N("div",rR,[M(i.$slots,"aside-top",{},void 0,!0),M(i.$slots,"aside-outline-before",{},void 0,!0),V(Jy),M(i.$slots,"aside-outline-after",{},void 0,!0),nR,M(i.$slots,"aside-ads-before",{},void 0,!0),A(e).carbonAds?(R(),q(tR,{key:0,"carbon-ads":A(e).carbonAds},null,8,["carbon-ads"])):$("",!0),M(i.$slots,"aside-ads-after",{},void 0,!0),M(i.$slots,"aside-bottom",{},void 0,!0)]))}}),oR=J(sR,[["__scopeId","data-v-4df922d2"]]);function aR(){const{theme:t,page:e}=_e();return te(()=>{const{text:i="Edit this page",pattern:r=""}=t.value.editLink||{};let n;return typeof r=="function"?n=r(e.value):n=r.replace(/:path/g,e.value.filePath),{url:n,text:i}})}function lR(){const{page:t,theme:e,frontmatter:i}=_e();return te(()=>{var c,h,u,d,f,E,g,p;const r=CE(e.value.sidebar,t.value.relativePath),n=Uy(r),s=cR(n,y=>y.link.replace(/[?#].*$/,"")),o=s.findIndex(y=>gs(t.value.relativePath,y.link)),a=((c=e.value.docFooter)==null?void 0:c.prev)===!1&&!i.value.prev||i.value.prev===!1,l=((h=e.value.docFooter)==null?void 0:h.next)===!1&&!i.value.next||i.value.next===!1;return{prev:a?void 0:{text:(typeof i.value.prev=="string"?i.value.prev:typeof i.value.prev=="object"?i.value.prev.text:void 0)??((u=s[o-1])==null?void 0:u.docFooterText)??((d=s[o-1])==null?void 0:d.text),link:(typeof i.value.prev=="object"?i.value.prev.link:void 0)??((f=s[o-1])==null?void 0:f.link)},next:l?void 0:{text:(typeof i.value.next=="string"?i.value.next:typeof i.value.next=="object"?i.value.next.text:void 0)??((E=s[o+1])==null?void 0:E.docFooterText)??((g=s[o+1])==null?void 0:g.text),link:(typeof i.value.next=="object"?i.value.next.link:void 0)??((p=s[o+1])==null?void 0:p.link)}}})}function cR(t,e){const i=new Set;return t.filter(r=>{const n=e(r);return i.has(n)?!1:i.add(n)})}const qi=W({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(t){const e=t,i=te(()=>e.tag??(e.href?"a":"span")),r=te(()=>e.href&&g_.test(e.href));return(n,s)=>(R(),q(ca(i.value),{class:be(["VPLink",{link:n.href,"vp-external-link-icon":r.value,"no-icon":n.noIcon}]),href:n.href?A(Cf)(n.href):void 0,target:n.target??(r.value?"_blank":void 0),rel:n.rel??(r.value?"noreferrer":void 0)},{default:B(()=>[M(n.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),hR={class:"VPLastUpdated"},uR=["datetime"],dR=W({__name:"VPDocFooterLastUpdated",setup(t){const{theme:e,page:i,frontmatter:r,lang:n}=_e(),s=te(()=>new Date(r.value.lastUpdated??i.value.lastUpdated)),o=te(()=>s.value.toISOString()),a=we("");return Jr(()=>{Ku(()=>{var l,c,h;a.value=new Intl.DateTimeFormat((c=(l=e.value.lastUpdated)==null?void 0:l.formatOptions)!=null&&c.forceLocale?n.value:void 0,((h=e.value.lastUpdated)==null?void 0:h.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(s.value)})}),(l,c)=>{var h;return R(),N("p",hR,[Ci(ye(((h=A(e).lastUpdated)==null?void 0:h.text)||A(e).lastUpdatedText||"Last updated")+": ",1),I("time",{datetime:o.value},ye(a.value),9,uR)])}}}),fR=J(dR,[["__scopeId","data-v-4c9f76e0"]]),pR=t=>(nt("data-v-5e170b89"),t=t(),st(),t),_R={key:0,class:"VPDocFooter"},ER={key:0,class:"edit-info"},vR={key:0,class:"edit-link"},mR=pR(()=>I("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),gR={key:1,class:"last-updated"},TR={key:1,class:"prev-next"},yR={class:"pager"},RR=["innerHTML"],wR=["innerHTML"],AR={class:"pager"},bR=["innerHTML"],SR=["innerHTML"],PR=W({__name:"VPDocFooter",setup(t){const{theme:e,page:i,frontmatter:r}=_e(),n=aR(),s=lR(),o=te(()=>e.value.editLink&&r.value.editLink!==!1),a=te(()=>i.value.lastUpdated&&r.value.lastUpdated!==!1),l=te(()=>o.value||a.value||s.value.prev||s.value.next);return(c,h)=>{var u,d,f,E;return l.value?(R(),N("footer",_R,[M(c.$slots,"doc-footer-before",{},void 0,!0),o.value||a.value?(R(),N("div",ER,[o.value?(R(),N("div",vR,[V(qi,{class:"edit-link-button",href:A(n).url,"no-icon":!0},{default:B(()=>[mR,Ci(" "+ye(A(n).text),1)]),_:1},8,["href"])])):$("",!0),a.value?(R(),N("div",gR,[V(fR)])):$("",!0)])):$("",!0),(u=A(s).prev)!=null&&u.link||(d=A(s).next)!=null&&d.link?(R(),N("nav",TR,[I("div",yR,[(f=A(s).prev)!=null&&f.link?(R(),q(qi,{key:0,class:"pager-link prev",href:A(s).prev.link},{default:B(()=>{var g;return[I("span",{class:"desc",innerHTML:((g=A(e).docFooter)==null?void 0:g.prev)||"Previous page"},null,8,RR),I("span",{class:"title",innerHTML:A(s).prev.text},null,8,wR)]}),_:1},8,["href"])):$("",!0)]),I("div",AR,[(E=A(s).next)!=null&&E.link?(R(),q(qi,{key:0,class:"pager-link next",href:A(s).next.link},{default:B(()=>{var g;return[I("span",{class:"desc",innerHTML:((g=A(e).docFooter)==null?void 0:g.next)||"Next page"},null,8,bR),I("span",{class:"title",innerHTML:A(s).next.text},null,8,SR)]}),_:1},8,["href"])):$("",!0)])])):$("",!0)])):$("",!0)}}}),CR=J(PR,[["__scopeId","data-v-5e170b89"]]),MR=t=>(nt("data-v-46107ac1"),t=t(),st(),t),NR={class:"container"},BR=MR(()=>I("div",{class:"aside-curtain"},null,-1)),IR={class:"aside-container"},FR={class:"aside-content"},OR={class:"content"},xR={class:"content-container"},DR={class:"main"},UR=W({__name:"VPDoc",setup(t){const{theme:e}=_e(),i=ih(),{hasSidebar:r,hasAside:n,leftAside:s}=gr(),o=te(()=>i.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(a,l)=>{const c=bs("Content");return R(),N("div",{class:be(["VPDoc",{"has-sidebar":A(r),"has-aside":A(n)}])},[M(a.$slots,"doc-top",{},void 0,!0),I("div",NR,[A(n)?(R(),N("div",{key:0,class:be(["aside",{"left-aside":A(s)}])},[BR,I("div",IR,[I("div",FR,[V(oR,null,{"aside-top":B(()=>[M(a.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":B(()=>[M(a.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":B(()=>[M(a.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":B(()=>[M(a.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":B(()=>[M(a.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":B(()=>[M(a.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):$("",!0),I("div",OR,[I("div",xR,[M(a.$slots,"doc-before",{},void 0,!0),I("main",DR,[V(c,{class:be(["vp-doc",[o.value,A(e).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),V(CR,null,{"doc-footer-before":B(()=>[M(a.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),M(a.$slots,"doc-after",{},void 0,!0)])])]),M(a.$slots,"doc-bottom",{},void 0,!0)],2)}}}),kR=J(UR,[["__scopeId","data-v-46107ac1"]]),$R=W({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(t){const e=t,i=te(()=>e.href&&g_.test(e.href)),r=te(()=>e.tag||e.href?"a":"button");return(n,s)=>(R(),q(ca(r.value),{class:be(["VPButton",[n.size,n.theme]]),href:n.href?A(Cf)(n.href):void 0,target:e.target??(i.value?"_blank":void 0),rel:e.rel??(i.value?"noreferrer":void 0)},{default:B(()=>[Ci(ye(n.text),1)]),_:1},8,["class","href","target","rel"]))}}),WR=J($R,[["__scopeId","data-v-975d4811"]]),LR=["src","alt"],XR=W({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(t){return(e,i)=>{const r=bs("VPImage",!0);return e.image?(R(),N(xe,{key:0},[typeof e.image=="string"||"src"in e.image?(R(),N("img",Bh({key:0,class:"VPImage"},typeof e.image=="string"?e.$attrs:{...e.image,...e.$attrs},{src:A(df)(typeof e.image=="string"?e.image:e.image.src),alt:e.alt??(typeof e.image=="string"?"":e.image.alt||"")}),null,16,LR)):(R(),N(xe,{key:1},[V(r,Bh({class:"dark",image:e.image.dark,alt:e.image.alt},e.$attrs),null,16,["image","alt"]),V(r,Bh({class:"light",image:e.image.light,alt:e.image.alt},e.$attrs),null,16,["image","alt"])],64))],64)):$("",!0)}}}),Yu=J(XR,[["__scopeId","data-v-b705d4c5"]]),VR=t=>(nt("data-v-b14d0055"),t=t(),st(),t),HR={class:"container"},YR={class:"main"},zR={key:0,class:"name"},jR=["innerHTML"],GR=["innerHTML"],KR=["innerHTML"],ZR={key:0,class:"actions"},qR={key:0,class:"image"},QR={class:"image-container"},JR=VR(()=>I("div",{class:"image-bg"},null,-1)),ew=W({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(t){const e=Qu("hero-image-slot-exists");return(i,r)=>(R(),N("div",{class:be(["VPHero",{"has-image":i.image||A(e)}])},[I("div",HR,[I("div",YR,[M(i.$slots,"home-hero-info-before",{},void 0,!0),M(i.$slots,"home-hero-info",{},()=>[i.name?(R(),N("h1",zR,[I("span",{innerHTML:i.name,class:"clip"},null,8,jR)])):$("",!0),i.text?(R(),N("p",{key:1,innerHTML:i.text,class:"text"},null,8,GR)):$("",!0),i.tagline?(R(),N("p",{key:2,innerHTML:i.tagline,class:"tagline"},null,8,KR)):$("",!0)],!0),M(i.$slots,"home-hero-info-after",{},void 0,!0),i.actions?(R(),N("div",ZR,[(R(!0),N(xe,null,Bt(i.actions,n=>(R(),N("div",{key:n.link,class:"action"},[V(WR,{tag:"a",size:"medium",theme:n.theme,text:n.text,href:n.link,target:n.target,rel:n.rel},null,8,["theme","text","href","target","rel"])]))),128))])):$("",!0),M(i.$slots,"home-hero-actions-after",{},void 0,!0)]),i.image||A(e)?(R(),N("div",qR,[I("div",QR,[JR,M(i.$slots,"home-hero-image",{},()=>[i.image?(R(),q(Yu,{key:0,class:"image-src",image:i.image},null,8,["image"])):$("",!0)],!0)])])):$("",!0)])],2))}}),tw=J(ew,[["__scopeId","data-v-b14d0055"]]),iw=W({__name:"VPHomeHero",setup(t){const{frontmatter:e}=_e();return(i,r)=>A(e).hero?(R(),q(tw,{key:0,class:"VPHomeHero",name:A(e).hero.name,text:A(e).hero.text,tagline:A(e).hero.tagline,image:A(e).hero.image,actions:A(e).hero.actions},{"home-hero-info-before":B(()=>[M(i.$slots,"home-hero-info-before")]),"home-hero-info":B(()=>[M(i.$slots,"home-hero-info")]),"home-hero-info-after":B(()=>[M(i.$slots,"home-hero-info-after")]),"home-hero-actions-after":B(()=>[M(i.$slots,"home-hero-actions-after")]),"home-hero-image":B(()=>[M(i.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):$("",!0)}}),rw=t=>(nt("data-v-cf9d803b"),t=t(),st(),t),nw={class:"box"},sw={key:0,class:"icon"},ow=["innerHTML"],aw=["innerHTML"],lw=["innerHTML"],cw={key:4,class:"link-text"},hw={class:"link-text-value"},uw=rw(()=>I("span",{class:"vpi-arrow-right link-text-icon"},null,-1)),dw=W({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(t){return(e,i)=>(R(),q(qi,{class:"VPFeature",href:e.link,rel:e.rel,target:e.target,"no-icon":!0,tag:e.link?"a":"div"},{default:B(()=>[I("article",nw,[typeof e.icon=="object"&&e.icon.wrap?(R(),N("div",sw,[V(Yu,{image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])])):typeof e.icon=="object"?(R(),q(Yu,{key:1,image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])):e.icon?(R(),N("div",{key:2,class:"icon",innerHTML:e.icon},null,8,ow)):$("",!0),I("h2",{class:"title",innerHTML:e.title},null,8,aw),e.details?(R(),N("p",{key:3,class:"details",innerHTML:e.details},null,8,lw)):$("",!0),e.linkText?(R(),N("div",cw,[I("p",hw,[Ci(ye(e.linkText)+" ",1),uw])])):$("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),fw=J(dw,[["__scopeId","data-v-cf9d803b"]]),pw={key:0,class:"VPFeatures"},_w={class:"container"},Ew={class:"items"},vw=W({__name:"VPFeatures",props:{features:{}},setup(t){const e=t,i=te(()=>{const r=e.features.length;if(r){if(r===2)return"grid-2";if(r===3)return"grid-3";if(r%3===0)return"grid-6";if(r>3)return"grid-4"}else return});return(r,n)=>r.features?(R(),N("div",pw,[I("div",_w,[I("div",Ew,[(R(!0),N(xe,null,Bt(r.features,s=>(R(),N("div",{key:s.title,class:be(["item",[i.value]])},[V(fw,{icon:s.icon,title:s.title,details:s.details,link:s.link,"link-text":s.linkText,rel:s.rel,target:s.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):$("",!0)}}),mw=J(vw,[["__scopeId","data-v-cdd4a134"]]),gw=W({__name:"VPHomeFeatures",setup(t){const{frontmatter:e}=_e();return(i,r)=>A(e).features?(R(),q(mw,{key:0,class:"VPHomeFeatures",features:A(e).features},null,8,["features"])):$("",!0)}}),Tw=W({__name:"VPHomeContent",setup(t){const{width:e}=sv({includeScrollbar:!1});return(i,r)=>(R(),N("div",{class:"vp-doc container",style:T_(A(e)?{"--vp-offset":`calc(50% - ${A(e)/2}px)`}:{})},[M(i.$slots,"default",{},void 0,!0)],4))}}),yw=J(Tw,[["__scopeId","data-v-12868abd"]]),Rw={class:"VPHome"},ww=W({__name:"VPHome",setup(t){const{frontmatter:e}=_e();return(i,r)=>{const n=bs("Content");return R(),N("div",Rw,[M(i.$slots,"home-hero-before",{},void 0,!0),V(iw,null,{"home-hero-info-before":B(()=>[M(i.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":B(()=>[M(i.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":B(()=>[M(i.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":B(()=>[M(i.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":B(()=>[M(i.$slots,"home-hero-image",{},void 0,!0)]),_:3}),M(i.$slots,"home-hero-after",{},void 0,!0),M(i.$slots,"home-features-before",{},void 0,!0),V(gw),M(i.$slots,"home-features-after",{},void 0,!0),A(e).markdownStyles!==!1?(R(),q(yw,{key:0},{default:B(()=>[V(n)]),_:1})):(R(),q(n,{key:1}))])}}}),Aw=J(ww,[["__scopeId","data-v-4e8c7aa8"]]),bw={},Sw={class:"VPPage"};function Pw(t,e){const i=bs("Content");return R(),N("div",Sw,[M(t.$slots,"page-top"),V(i),M(t.$slots,"page-bottom")])}const Cw=J(bw,[["render",Pw]]),Mw=W({__name:"VPContent",setup(t){const{page:e,frontmatter:i}=_e(),{hasSidebar:r}=gr();return(n,s)=>(R(),N("div",{class:be(["VPContent",{"has-sidebar":A(r),"is-home":A(i).layout==="home"}]),id:"VPContent"},[A(e).isNotFound?M(n.$slots,"not-found",{key:0},()=>[V(xy)],!0):A(i).layout==="page"?(R(),q(Cw,{key:1},{"page-top":B(()=>[M(n.$slots,"page-top",{},void 0,!0)]),"page-bottom":B(()=>[M(n.$slots,"page-bottom",{},void 0,!0)]),_:3})):A(i).layout==="home"?(R(),q(Aw,{key:2},{"home-hero-before":B(()=>[M(n.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":B(()=>[M(n.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":B(()=>[M(n.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":B(()=>[M(n.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":B(()=>[M(n.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":B(()=>[M(n.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":B(()=>[M(n.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":B(()=>[M(n.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":B(()=>[M(n.$slots,"home-features-after",{},void 0,!0)]),_:3})):A(i).layout&&A(i).layout!=="doc"?(R(),q(ca(A(i).layout),{key:3})):(R(),q(kR,{key:4},{"doc-top":B(()=>[M(n.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":B(()=>[M(n.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":B(()=>[M(n.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":B(()=>[M(n.$slots,"doc-before",{},void 0,!0)]),"doc-after":B(()=>[M(n.$slots,"doc-after",{},void 0,!0)]),"aside-top":B(()=>[M(n.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":B(()=>[M(n.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":B(()=>[M(n.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":B(()=>[M(n.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":B(()=>[M(n.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":B(()=>[M(n.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),Nw=J(Mw,[["__scopeId","data-v-0cb0c127"]]),Bw={class:"container"},Iw=["innerHTML"],Fw=["innerHTML"],Ow=W({__name:"VPFooter",setup(t){const{theme:e,frontmatter:i}=_e(),{hasSidebar:r}=gr();return(n,s)=>A(e).footer&&A(i).footer!==!1?(R(),N("footer",{key:0,class:be(["VPFooter",{"has-sidebar":A(r)}])},[I("div",Bw,[A(e).footer.message?(R(),N("p",{key:0,class:"message",innerHTML:A(e).footer.message},null,8,Iw)):$("",!0),A(e).footer.copyright?(R(),N("p",{key:1,class:"copyright",innerHTML:A(e).footer.copyright},null,8,Fw)):$("",!0)])],2)):$("",!0)}}),xw=J(Ow,[["__scopeId","data-v-c5e5a023"]]);function Dw(){const{theme:t,frontmatter:e}=_e(),i=m_([]),r=te(()=>i.value.length>0);return qu(()=>{i.value=Nf(e.value.outline??t.value.outline)}),{headers:i,hasLocalNav:r}}const Uw=t=>(nt("data-v-ffaeac27"),t=t(),st(),t),kw=Uw(()=>I("span",{class:"vpi-chevron-right icon"},null,-1)),$w={class:"header"},Ww={class:"outline"},Lw=W({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(t){const e=t,{theme:i}=_e(),r=we(!1),n=we(0),s=we(),o=we();ov(s,()=>{r.value=!1}),av("Escape",()=>{r.value=!1}),qu(()=>{r.value=!1});function a(){r.value=!r.value,n.value=window.innerHeight+Math.min(window.scrollY-e.navHeight,0)}function l(h){h.target.classList.contains("outline-link")&&(o.value&&(o.value.style.transition="none"),lv(()=>{r.value=!1}))}function c(){r.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(h,u)=>(R(),N("div",{class:"VPLocalNavOutlineDropdown",style:T_({"--vp-vh":n.value+"px"}),ref_key:"main",ref:s},[h.headers.length>0?(R(),N("button",{key:0,onClick:a,class:be({open:r.value})},[Ci(ye(A(ME)(A(i)))+" ",1),kw],2)):(R(),N("button",{key:1,onClick:c},ye(A(i).returnToTopLabel||"Return to top"),1)),V(uf,{name:"flyout"},{default:B(()=>[r.value?(R(),N("div",{key:0,ref_key:"items",ref:o,class:"items",onClick:l},[I("div",$w,[I("a",{class:"top-link",href:"#",onClick:c},ye(A(i).returnToTopLabel||"Return to top"),1)]),I("div",Ww,[V(NE,{headers:h.headers},null,8,["headers"])])],512)):$("",!0)]),_:1})],4))}}),Xw=J(Lw,[["__scopeId","data-v-ffaeac27"]]),Vw=t=>(nt("data-v-7f7e4bcd"),t=t(),st(),t),Hw={class:"container"},Yw=["aria-expanded"],zw=Vw(()=>I("span",{class:"vpi-align-left menu-icon"},null,-1)),jw={class:"menu-text"},Gw=W({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(t){const{theme:e,frontmatter:i}=_e(),{hasSidebar:r}=gr(),{headers:n}=Dw(),{y:s}=y_(),o=we(0);Jr(()=>{o.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),qu(()=>{n.value=Nf(i.value.outline??e.value.outline)});const a=te(()=>n.value.length===0),l=te(()=>a.value&&!r.value),c=te(()=>({VPLocalNav:!0,"has-sidebar":r.value,empty:a.value,fixed:l.value}));return(h,u)=>A(i).layout!=="home"&&(!l.value||A(s)>=o.value)?(R(),N("div",{key:0,class:be(c.value)},[I("div",Hw,[A(r)?(R(),N("button",{key:0,class:"menu","aria-expanded":h.open,"aria-controls":"VPSidebarNav",onClick:u[0]||(u[0]=d=>h.$emit("open-menu"))},[zw,I("span",jw,ye(A(e).sidebarMenuLabel||"Menu"),1)],8,Yw)):$("",!0),V(Xw,{headers:A(n),navHeight:o.value},null,8,["headers","navHeight"])])],2)):$("",!0)}}),Kw=J(Gw,[["__scopeId","data-v-7f7e4bcd"]]);function Zw(){const t=we(!1);function e(){t.value=!0,window.addEventListener("resize",n)}function i(){t.value=!1,window.removeEventListener("resize",n)}function r(){t.value?i():e()}function n(){window.outerWidth>=768&&i()}const s=ih();return en(()=>s.path,i),{isScreenOpen:t,openScreen:e,closeScreen:i,toggleScreen:r}}const qw={},Qw={class:"VPSwitch",type:"button",role:"switch"},Jw={class:"check"},eA={key:0,class:"icon"};function tA(t,e){return R(),N("button",Qw,[I("span",Jw,[t.$slots.default?(R(),N("span",eA,[M(t.$slots,"default",{},void 0,!0)])):$("",!0)])])}const iA=J(qw,[["render",tA],["__scopeId","data-v-3b63cc18"]]),BE=t=>(nt("data-v-b4da0f76"),t=t(),st(),t),rA=BE(()=>I("span",{class:"vpi-sun sun"},null,-1)),nA=BE(()=>I("span",{class:"vpi-moon moon"},null,-1)),sA=W({__name:"VPSwitchAppearance",setup(t){const{isDark:e,theme:i}=_e(),r=Qu("toggle-appearance",()=>{e.value=!e.value}),n=te(()=>e.value?i.value.lightModeSwitchTitle||"Switch to light theme":i.value.darkModeSwitchTitle||"Switch to dark theme");return(s,o)=>(R(),q(iA,{title:n.value,class:"VPSwitchAppearance","aria-checked":A(e),onClick:A(r)},{default:B(()=>[rA,nA]),_:1},8,["title","aria-checked","onClick"]))}}),Bf=J(sA,[["__scopeId","data-v-b4da0f76"]]),oA={key:0,class:"VPNavBarAppearance"},aA=W({__name:"VPNavBarAppearance",setup(t){const{site:e}=_e();return(i,r)=>A(e).appearance&&A(e).appearance!=="force-dark"?(R(),N("div",oA,[V(Bf)])):$("",!0)}}),lA=J(aA,[["__scopeId","data-v-2927a357"]]),If=we();let IE=!1,wd=0;function cA(t){const e=we(!1);if(Ta){!IE&&hA(),wd++;const i=en(If,r=>{var n,s,o;r===t.el.value||(n=t.el.value)!=null&&n.contains(r)?(e.value=!0,(s=t.onFocus)==null||s.call(t)):(e.value=!1,(o=t.onBlur)==null||o.call(t))});Zu(()=>{i(),wd--,wd||uA()})}return cv(e)}function hA(){document.addEventListener("focusin",FE),IE=!0,If.value=document.activeElement}function uA(){document.removeEventListener("focusin",FE)}function FE(){If.value=document.activeElement}const dA={class:"VPMenuLink"},fA=W({__name:"VPMenuLink",props:{item:{}},setup(t){const{page:e}=_e();return(i,r)=>(R(),N("div",dA,[V(qi,{class:be({active:A(gs)(A(e).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,target:i.item.target,rel:i.item.rel},{default:B(()=>[Ci(ye(i.item.text),1)]),_:1},8,["class","href","target","rel"])]))}}),od=J(fA,[["__scopeId","data-v-a7ea448f"]]),pA={class:"VPMenuGroup"},_A={key:0,class:"title"},EA=W({__name:"VPMenuGroup",props:{text:{},items:{}},setup(t){return(e,i)=>(R(),N("div",pA,[e.text?(R(),N("p",_A,ye(e.text),1)):$("",!0),(R(!0),N(xe,null,Bt(e.items,r=>(R(),N(xe,null,["link"in r?(R(),q(od,{key:0,item:r},null,8,["item"])):$("",!0)],64))),256))]))}}),vA=J(EA,[["__scopeId","data-v-c04ee8b6"]]),mA={class:"VPMenu"},gA={key:0,class:"items"},TA=W({__name:"VPMenu",props:{items:{}},setup(t){return(e,i)=>(R(),N("div",mA,[e.items?(R(),N("div",gA,[(R(!0),N(xe,null,Bt(e.items,r=>(R(),N(xe,{key:r.text},["link"in r?(R(),q(od,{key:0,item:r},null,8,["item"])):(R(),q(vA,{key:1,text:r.text,items:r.items},null,8,["text","items"]))],64))),128))])):$("",!0),M(e.$slots,"default",{},void 0,!0)]))}}),yA=J(TA,[["__scopeId","data-v-3e266115"]]),RA=t=>(nt("data-v-2e89991f"),t=t(),st(),t),wA=["aria-expanded","aria-label"],AA={key:0,class:"text"},bA=["innerHTML"],SA=RA(()=>I("span",{class:"vpi-chevron-down text-icon"},null,-1)),PA={key:1,class:"vpi-more-horizontal icon"},CA={class:"menu"},MA=W({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(t){const e=we(!1),i=we();cA({el:i,onBlur:r});function r(){e.value=!1}return(n,s)=>(R(),N("div",{class:"VPFlyout",ref_key:"el",ref:i,onMouseenter:s[1]||(s[1]=o=>e.value=!0),onMouseleave:s[2]||(s[2]=o=>e.value=!1)},[I("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":e.value,"aria-label":n.label,onClick:s[0]||(s[0]=o=>e.value=!e.value)},[n.button||n.icon?(R(),N("span",AA,[n.icon?(R(),N("span",{key:0,class:be([n.icon,"option-icon"])},null,2)):$("",!0),n.button?(R(),N("span",{key:1,innerHTML:n.button},null,8,bA)):$("",!0),SA])):(R(),N("span",PA))],8,wA),I("div",CA,[V(yA,{items:n.items},{default:B(()=>[M(n.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),Ff=J(MA,[["__scopeId","data-v-2e89991f"]]),NA=["href","aria-label","innerHTML"],BA=W({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(t){const e=t,i=te(()=>typeof e.icon=="object"?e.icon.svg:`<span class="vpi-social-${e.icon}" />`);return(r,n)=>(R(),N("a",{class:"VPSocialLink no-icon",href:r.link,"aria-label":r.ariaLabel??(typeof r.icon=="string"?r.icon:""),target:"_blank",rel:"noopener",innerHTML:i.value},null,8,NA))}}),IA=J(BA,[["__scopeId","data-v-796eb262"]]),FA={class:"VPSocialLinks"},OA=W({__name:"VPSocialLinks",props:{links:{}},setup(t){return(e,i)=>(R(),N("div",FA,[(R(!0),N(xe,null,Bt(e.links,({link:r,icon:n,ariaLabel:s})=>(R(),q(IA,{key:r,icon:n,link:r,ariaLabel:s},null,8,["icon","link","ariaLabel"]))),128))]))}}),Of=J(OA,[["__scopeId","data-v-6f446feb"]]),xA={key:0,class:"group translations"},DA={class:"trans-title"},UA={key:1,class:"group"},kA={class:"item appearance"},$A={class:"label"},WA={class:"appearance-action"},LA={key:2,class:"group"},XA={class:"item social-links"},VA=W({__name:"VPNavBarExtra",setup(t){const{site:e,theme:i}=_e(),{localeLinks:r,currentLang:n}=uh({correspondingLink:!0}),s=te(()=>r.value.length&&n.value.label||e.value.appearance||i.value.socialLinks);return(o,a)=>s.value?(R(),q(Ff,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:B(()=>[A(r).length&&A(n).label?(R(),N("div",xA,[I("p",DA,ye(A(n).label),1),(R(!0),N(xe,null,Bt(A(r),l=>(R(),q(od,{key:l.link,item:l},null,8,["item"]))),128))])):$("",!0),A(e).appearance&&A(e).appearance!=="force-dark"?(R(),N("div",UA,[I("div",kA,[I("p",$A,ye(A(i).darkModeSwitchLabel||"Appearance"),1),I("div",WA,[V(Bf)])])])):$("",!0),A(i).socialLinks?(R(),N("div",LA,[I("div",XA,[V(Of,{class:"social-links-list",links:A(i).socialLinks},null,8,["links"])])])):$("",!0)]),_:1})):$("",!0)}}),HA=J(VA,[["__scopeId","data-v-d6c8c203"]]),YA=t=>(nt("data-v-3aec2904"),t=t(),st(),t),zA=["aria-expanded"],jA=YA(()=>I("span",{class:"container"},[I("span",{class:"top"}),I("span",{class:"middle"}),I("span",{class:"bottom"})],-1)),GA=[jA],KA=W({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(t){return(e,i)=>(R(),N("button",{type:"button",class:be(["VPNavBarHamburger",{active:e.active}]),"aria-label":"mobile navigation","aria-expanded":e.active,"aria-controls":"VPNavScreen",onClick:i[0]||(i[0]=r=>e.$emit("click"))},GA,10,zA))}}),ZA=J(KA,[["__scopeId","data-v-3aec2904"]]),qA=["innerHTML"],QA=W({__name:"VPNavBarMenuLink",props:{item:{}},setup(t){const{page:e}=_e();return(i,r)=>(R(),q(qi,{class:be({VPNavBarMenuLink:!0,active:A(gs)(A(e).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,noIcon:i.item.noIcon,target:i.item.target,rel:i.item.rel,tabindex:"0"},{default:B(()=>[I("span",{innerHTML:i.item.text},null,8,qA)]),_:1},8,["class","href","noIcon","target","rel"]))}}),JA=J(QA,[["__scopeId","data-v-8dbc1075"]]),e0=W({__name:"VPNavBarMenuGroup",props:{item:{}},setup(t){const e=t,{page:i}=_e(),r=s=>"link"in s?gs(i.value.relativePath,s.link,!!e.item.activeMatch):s.items.some(r),n=te(()=>r(e.item));return(s,o)=>(R(),q(Ff,{class:be({VPNavBarMenuGroup:!0,active:A(gs)(A(i).relativePath,s.item.activeMatch,!!s.item.activeMatch)||n.value}),button:s.item.text,items:s.item.items},null,8,["class","button","items"]))}}),t0=t=>(nt("data-v-30f53b37"),t=t(),st(),t),i0={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},r0=t0(()=>I("span",{id:"main-nav-aria-label",class:"visually-hidden"},"Main Navigation",-1)),n0=W({__name:"VPNavBarMenu",setup(t){const{theme:e}=_e();return(i,r)=>A(e).nav?(R(),N("nav",i0,[r0,(R(!0),N(xe,null,Bt(A(e).nav,n=>(R(),N(xe,{key:n.text},["link"in n?(R(),q(JA,{key:0,item:n},null,8,["item"])):(R(),q(e0,{key:1,item:n},null,8,["item"]))],64))),128))])):$("",!0)}}),s0=J(n0,[["__scopeId","data-v-30f53b37"]]);function o0(t){const{localeIndex:e,theme:i}=_e();function r(n){var E,g,p;const s=n.split("."),o=(E=i.value.search)==null?void 0:E.options,a=o&&typeof o=="object",l=a&&((p=(g=o.locales)==null?void 0:g[e.value])==null?void 0:p.translations)||null,c=a&&o.translations||null;let h=l,u=c,d=t;const f=s.pop();for(const y of s){let T=null;const w=d==null?void 0:d[y];w&&(T=d=w);const _=u==null?void 0:u[y];_&&(T=u=_);const b=h==null?void 0:h[y];b&&(T=h=b),w||(d=T),_||(u=T),b||(h=T)}return(h==null?void 0:h[f])??(u==null?void 0:u[f])??(d==null?void 0:d[f])??""}return r}const a0=["aria-label"],l0={class:"DocSearch-Button-Container"},c0=I("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1),h0={class:"DocSearch-Button-Placeholder"},u0=I("span",{class:"DocSearch-Button-Keys"},[I("kbd",{class:"DocSearch-Button-Key"}),I("kbd",{class:"DocSearch-Button-Key"},"K")],-1),Kp=W({__name:"VPNavBarSearchButton",setup(t){const i=o0({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(r,n)=>(R(),N("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":A(i)("button.buttonAriaLabel")},[I("span",l0,[c0,I("span",h0,ye(A(i)("button.buttonText")),1)]),u0],8,a0))}}),d0={class:"VPNavBarSearch"},f0={id:"local-search"},p0={key:1,id:"docsearch"},_0=W({__name:"VPNavBarSearch",setup(t){const e=()=>null,i=hv(()=>Cu(()=>import("./VPAlgoliaSearchBox.4F1Jlr1R.js"),__vite__mapDeps([0,1]))),{theme:r}=_e(),n=we(!1),s=we(!1),o=()=>{const d="VPAlgoliaPreconnect";(window.requestIdleCallback||setTimeout)(()=>{var g;const E=document.createElement("link");E.id=d,E.rel="preconnect",E.href=`https://${(((g=r.value.search)==null?void 0:g.options)??r.value.algolia).appId}-dsn.algolia.net`,E.crossOrigin="",document.head.appendChild(E)})};Jr(()=>{o();const d=E=>{(E.key.toLowerCase()==="k"&&(E.metaKey||E.ctrlKey)||!c(E)&&E.key==="/")&&(E.preventDefault(),a(),f())},f=()=>{window.removeEventListener("keydown",d)};window.addEventListener("keydown",d),Zu(f)});function a(){n.value||(n.value=!0,setTimeout(l,16))}function l(){const d=new Event("keydown");d.key="k",d.metaKey=!0,window.dispatchEvent(d),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||l()},16)}function c(d){const f=d.target,E=f.tagName;return f.isContentEditable||E==="INPUT"||E==="SELECT"||E==="TEXTAREA"}const h=we(!1),u="algolia";return(d,f)=>{var E;return R(),N("div",d0,[A(u)==="local"?(R(),N(xe,{key:0},[h.value?(R(),q(A(e),{key:0,onClose:f[0]||(f[0]=g=>h.value=!1)})):$("",!0),I("div",f0,[V(Kp,{onClick:f[1]||(f[1]=g=>h.value=!0)})])],64)):A(u)==="algolia"?(R(),N(xe,{key:1},[n.value?(R(),q(A(i),{key:0,algolia:((E=A(r).search)==null?void 0:E.options)??A(r).algolia,onVnodeBeforeMount:f[2]||(f[2]=g=>s.value=!0)},null,8,["algolia"])):$("",!0),s.value?$("",!0):(R(),N("div",p0,[V(Kp,{onClick:a})]))],64)):$("",!0)])}}}),E0=W({__name:"VPNavBarSocialLinks",setup(t){const{theme:e}=_e();return(i,r)=>A(e).socialLinks?(R(),q(Of,{key:0,class:"VPNavBarSocialLinks",links:A(e).socialLinks},null,8,["links"])):$("",!0)}}),v0=J(E0,[["__scopeId","data-v-1367adad"]]),m0=["href","rel","target"],g0={key:1},T0={key:2},y0=W({__name:"VPNavBarTitle",setup(t){const{site:e,theme:i}=_e(),{hasSidebar:r}=gr(),{currentLang:n}=uh(),s=te(()=>{var l;return typeof i.value.logoLink=="string"?i.value.logoLink:(l=i.value.logoLink)==null?void 0:l.link}),o=te(()=>{var l;return typeof i.value.logoLink=="string"||(l=i.value.logoLink)==null?void 0:l.rel}),a=te(()=>{var l;return typeof i.value.logoLink=="string"||(l=i.value.logoLink)==null?void 0:l.target});return(l,c)=>(R(),N("div",{class:be(["VPNavBarTitle",{"has-sidebar":A(r)}])},[I("a",{class:"title",href:s.value??A(Cf)(A(n).link),rel:o.value,target:a.value},[M(l.$slots,"nav-bar-title-before",{},void 0,!0),A(i).logo?(R(),q(Yu,{key:0,class:"logo",image:A(i).logo},null,8,["image"])):$("",!0),A(i).siteTitle?(R(),N("span",g0,ye(A(i).siteTitle),1)):A(i).siteTitle===void 0?(R(),N("span",T0,ye(A(e).title),1)):$("",!0),M(l.$slots,"nav-bar-title-after",{},void 0,!0)],8,m0)],2))}}),R0=J(y0,[["__scopeId","data-v-ae49f6fe"]]),w0={class:"items"},A0={class:"title"},b0=W({__name:"VPNavBarTranslations",setup(t){const{theme:e}=_e(),{localeLinks:i,currentLang:r}=uh({correspondingLink:!0});return(n,s)=>A(i).length&&A(r).label?(R(),q(Ff,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:A(e).langMenuLabel||"Change language"},{default:B(()=>[I("div",w0,[I("p",A0,ye(A(r).label),1),(R(!0),N(xe,null,Bt(A(i),o=>(R(),q(od,{key:o.link,item:o},null,8,["item"]))),128))])]),_:1},8,["label"])):$("",!0)}}),S0=J(b0,[["__scopeId","data-v-549697cc"]]),P0=t=>(nt("data-v-5c4aa7f8"),t=t(),st(),t),C0={class:"wrapper"},M0={class:"container"},N0={class:"title"},B0={class:"content"},I0={class:"content-body"},F0=P0(()=>I("div",{class:"divider"},[I("div",{class:"divider-line"})],-1)),O0=W({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(t){const{y:e}=y_(),{hasSidebar:i}=gr(),{frontmatter:r}=_e(),n=we({});return v_(()=>{n.value={"has-sidebar":i.value,home:r.value.layout==="home",top:e.value===0}}),(s,o)=>(R(),N("div",{class:be(["VPNavBar",n.value])},[I("div",C0,[I("div",M0,[I("div",N0,[V(R0,null,{"nav-bar-title-before":B(()=>[M(s.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":B(()=>[M(s.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),I("div",B0,[I("div",I0,[M(s.$slots,"nav-bar-content-before",{},void 0,!0),V(_0,{class:"search"}),V(s0,{class:"menu"}),V(S0,{class:"translations"}),V(lA,{class:"appearance"}),V(v0,{class:"social-links"}),V(HA,{class:"extra"}),M(s.$slots,"nav-bar-content-after",{},void 0,!0),V(ZA,{class:"hamburger",active:s.isScreenOpen,onClick:o[0]||(o[0]=a=>s.$emit("toggle-screen"))},null,8,["active"])])])])]),F0],2))}}),x0=J(O0,[["__scopeId","data-v-5c4aa7f8"]]),D0={key:0,class:"VPNavScreenAppearance"},U0={class:"text"},k0=W({__name:"VPNavScreenAppearance",setup(t){const{site:e,theme:i}=_e();return(r,n)=>A(e).appearance&&A(e).appearance!=="force-dark"?(R(),N("div",D0,[I("p",U0,ye(A(i).darkModeSwitchLabel||"Appearance"),1),V(Bf)])):$("",!0)}}),$0=J(k0,[["__scopeId","data-v-f76e90c5"]]),W0=W({__name:"VPNavScreenMenuLink",props:{item:{}},setup(t){const e=Qu("close-screen");return(i,r)=>(R(),q(qi,{class:"VPNavScreenMenuLink",href:i.item.link,target:i.item.target,rel:i.item.rel,onClick:A(e)},{default:B(()=>[Ci(ye(i.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),L0=J(W0,[["__scopeId","data-v-268958ae"]]),X0=W({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(t){const e=Qu("close-screen");return(i,r)=>(R(),q(qi,{class:"VPNavScreenMenuGroupLink",href:i.item.link,target:i.item.target,rel:i.item.rel,onClick:A(e)},{default:B(()=>[Ci(ye(i.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),OE=J(X0,[["__scopeId","data-v-d71e8155"]]),V0={class:"VPNavScreenMenuGroupSection"},H0={key:0,class:"title"},Y0=W({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(t){return(e,i)=>(R(),N("div",V0,[e.text?(R(),N("p",H0,ye(e.text),1)):$("",!0),(R(!0),N(xe,null,Bt(e.items,r=>(R(),q(OE,{key:r.text,item:r},null,8,["item"]))),128))]))}}),z0=J(Y0,[["__scopeId","data-v-a55f62f0"]]),j0=t=>(nt("data-v-0cfb03e3"),t=t(),st(),t),G0=["aria-controls","aria-expanded"],K0=["innerHTML"],Z0=j0(()=>I("span",{class:"vpi-plus button-icon"},null,-1)),q0=["id"],Q0={key:1,class:"group"},J0=W({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(t){const e=t,i=we(!1),r=te(()=>`NavScreenGroup-${e.text.replace(" ","-").toLowerCase()}`);function n(){i.value=!i.value}return(s,o)=>(R(),N("div",{class:be(["VPNavScreenMenuGroup",{open:i.value}])},[I("button",{class:"button","aria-controls":r.value,"aria-expanded":i.value,onClick:n},[I("span",{class:"button-text",innerHTML:s.text},null,8,K0),Z0],8,G0),I("div",{id:r.value,class:"items"},[(R(!0),N(xe,null,Bt(s.items,a=>(R(),N(xe,{key:a.text},["link"in a?(R(),N("div",{key:a.text,class:"item"},[V(OE,{item:a},null,8,["item"])])):(R(),N("div",Q0,[V(z0,{text:a.text,items:a.items},null,8,["text","items"])]))],64))),128))],8,q0)],2))}}),eb=J(J0,[["__scopeId","data-v-0cfb03e3"]]),tb={key:0,class:"VPNavScreenMenu"},ib=W({__name:"VPNavScreenMenu",setup(t){const{theme:e}=_e();return(i,r)=>A(e).nav?(R(),N("nav",tb,[(R(!0),N(xe,null,Bt(A(e).nav,n=>(R(),N(xe,{key:n.text},["link"in n?(R(),q(L0,{key:0,item:n},null,8,["item"])):(R(),q(eb,{key:1,text:n.text||"",items:n.items},null,8,["text","items"]))],64))),128))])):$("",!0)}}),rb=W({__name:"VPNavScreenSocialLinks",setup(t){const{theme:e}=_e();return(i,r)=>A(e).socialLinks?(R(),q(Of,{key:0,class:"VPNavScreenSocialLinks",links:A(e).socialLinks},null,8,["links"])):$("",!0)}}),xE=t=>(nt("data-v-88808785"),t=t(),st(),t),nb=xE(()=>I("span",{class:"vpi-languages icon lang"},null,-1)),sb=xE(()=>I("span",{class:"vpi-chevron-down icon chevron"},null,-1)),ob={class:"list"},ab=W({__name:"VPNavScreenTranslations",setup(t){const{localeLinks:e,currentLang:i}=uh({correspondingLink:!0}),r=we(!1);function n(){r.value=!r.value}return(s,o)=>A(e).length&&A(i).label?(R(),N("div",{key:0,class:be(["VPNavScreenTranslations",{open:r.value}])},[I("button",{class:"title",onClick:n},[nb,Ci(" "+ye(A(i).label)+" ",1),sb]),I("ul",ob,[(R(!0),N(xe,null,Bt(A(e),a=>(R(),N("li",{key:a.link,class:"item"},[V(qi,{class:"link",href:a.link},{default:B(()=>[Ci(ye(a.text),1)]),_:2},1032,["href"])]))),128))])],2)):$("",!0)}}),lb=J(ab,[["__scopeId","data-v-88808785"]]),cb={class:"container"},hb=W({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(t){const e=we(null),i=R_(Ta?document.body:null);return(r,n)=>(R(),q(uf,{name:"fade",onEnter:n[0]||(n[0]=s=>i.value=!0),onAfterLeave:n[1]||(n[1]=s=>i.value=!1)},{default:B(()=>[r.open?(R(),N("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:e,id:"VPNavScreen"},[I("div",cb,[M(r.$slots,"nav-screen-content-before",{},void 0,!0),V(ib,{class:"menu"}),V(lb,{class:"translations"}),V($0,{class:"appearance"}),V(rb,{class:"social-links"}),M(r.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):$("",!0)]),_:3}))}}),ub=J(hb,[["__scopeId","data-v-9e3cc42a"]]),db={key:0,class:"VPNav"},fb=W({__name:"VPNav",setup(t){const{isScreenOpen:e,closeScreen:i,toggleScreen:r}=Zw(),{frontmatter:n}=_e(),s=te(()=>n.value.navbar!==!1);return w_("close-screen",i),Ku(()=>{Ta&&document.documentElement.classList.toggle("hide-nav",!s.value)}),(o,a)=>s.value?(R(),N("header",db,[V(x0,{"is-screen-open":A(e),onToggleScreen:A(r)},{"nav-bar-title-before":B(()=>[M(o.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":B(()=>[M(o.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":B(()=>[M(o.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":B(()=>[M(o.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),V(ub,{open:A(e)},{"nav-screen-content-before":B(()=>[M(o.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":B(()=>[M(o.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):$("",!0)}}),pb=J(fb,[["__scopeId","data-v-5bcea1dc"]]),DE=t=>(nt("data-v-c6127b2f"),t=t(),st(),t),_b=["role","tabindex"],Eb=DE(()=>I("div",{class:"indicator"},null,-1)),vb=DE(()=>I("span",{class:"vpi-chevron-right caret-icon"},null,-1)),mb=[vb],gb={key:1,class:"items"},Tb=W({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(t){const e=t,{collapsed:i,collapsible:r,isLink:n,isActiveLink:s,hasActiveLink:o,hasChildren:a,toggle:l}=$y(te(()=>e.item)),c=te(()=>a.value?"section":"div"),h=te(()=>n.value?"a":"div"),u=te(()=>a.value?e.depth+2===7?"p":`h${e.depth+2}`:"p"),d=te(()=>n.value?void 0:"button"),f=te(()=>[[`level-${e.depth}`],{collapsible:r.value},{collapsed:i.value},{"is-link":n.value},{"is-active":s.value},{"has-active":o.value}]);function E(p){"key"in p&&p.key!=="Enter"||!e.item.link&&l()}function g(){e.item.link&&l()}return(p,y)=>{const T=bs("VPSidebarItem",!0);return R(),q(ca(c.value),{class:be(["VPSidebarItem",f.value])},{default:B(()=>[p.item.text?(R(),N("div",Bh({key:0,class:"item",role:d.value},dv(p.item.items?{click:E,keydown:E}:{},!0),{tabindex:p.item.items&&0}),[Eb,p.item.link?(R(),q(qi,{key:0,tag:h.value,class:"link",href:p.item.link,rel:p.item.rel,target:p.item.target},{default:B(()=>[(R(),q(ca(u.value),{class:"text",innerHTML:p.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(R(),q(ca(u.value),{key:1,class:"text",innerHTML:p.item.text},null,8,["innerHTML"])),p.item.collapsed!=null&&p.item.items&&p.item.items.length?(R(),N("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:g,onKeydown:uv(g,["enter"]),tabindex:"0"},mb,32)):$("",!0)],16,_b)):$("",!0),p.item.items&&p.item.items.length?(R(),N("div",gb,[p.depth<5?(R(!0),N(xe,{key:0},Bt(p.item.items,w=>(R(),q(T,{key:w.text,item:w,depth:p.depth+1},null,8,["item","depth"]))),128)):$("",!0)])):$("",!0)]),_:1},8,["class"])}}}),yb=J(Tb,[["__scopeId","data-v-c6127b2f"]]),UE=t=>(nt("data-v-8a9cfce6"),t=t(),st(),t),Rb=UE(()=>I("div",{class:"curtain"},null,-1)),wb={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},Ab=UE(()=>I("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),bb=W({__name:"VPSidebar",props:{open:{type:Boolean}},setup(t){const{sidebarGroups:e,hasSidebar:i}=gr(),r=t,n=we(null),s=R_(Ta?document.body:null);return en([r,n],()=>{var o;r.open?(s.value=!0,(o=n.value)==null||o.focus()):s.value=!1},{immediate:!0,flush:"post"}),(o,a)=>A(i)?(R(),N("aside",{key:0,class:be(["VPSidebar",{open:o.open}]),ref_key:"navEl",ref:n,onClick:a[0]||(a[0]=fv(()=>{},["stop"]))},[Rb,I("nav",wb,[Ab,M(o.$slots,"sidebar-nav-before",{},void 0,!0),(R(!0),N(xe,null,Bt(A(e),l=>(R(),N("div",{key:l.text,class:"group"},[V(yb,{item:l,depth:0},null,8,["item"])]))),128)),M(o.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):$("",!0)}}),Sb=J(bb,[["__scopeId","data-v-8a9cfce6"]]),Pb=W({__name:"VPSkipLink",setup(t){const e=ih(),i=we();en(()=>e.path,()=>i.value.focus());function r({target:n}){const s=document.getElementById(decodeURIComponent(n.hash).slice(1));if(s){const o=()=>{s.removeAttribute("tabindex"),s.removeEventListener("blur",o)};s.setAttribute("tabindex","-1"),s.addEventListener("blur",o),s.focus(),window.scrollTo(0,0)}}return(n,s)=>(R(),N(xe,null,[I("span",{ref_key:"backToTop",ref:i,tabindex:"-1"},null,512),I("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:r}," Skip to content ")],64))}}),Cb=J(Pb,[["__scopeId","data-v-5f4035cb"]]),Mb=W({__name:"Layout",setup(t){const{isOpen:e,open:i,close:r}=gr(),n=ih();en(()=>n.path,r),ky(e,r);const{frontmatter:s}=_e(),o=pv(),a=te(()=>!!o["home-hero-image"]);return w_("hero-image-slot-exists",a),(l,c)=>{const h=bs("Content");return A(s).layout!==!1?(R(),N("div",{key:0,class:be(["Layout",A(s).pageClass])},[M(l.$slots,"layout-top",{},void 0,!0),V(Cb),V(wy,{class:"backdrop",show:A(e),onClick:A(r)},null,8,["show","onClick"]),V(pb,null,{"nav-bar-title-before":B(()=>[M(l.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":B(()=>[M(l.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":B(()=>[M(l.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":B(()=>[M(l.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":B(()=>[M(l.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":B(()=>[M(l.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),V(Kw,{open:A(e),onOpenMenu:A(i)},null,8,["open","onOpenMenu"]),V(Sb,{open:A(e)},{"sidebar-nav-before":B(()=>[M(l.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":B(()=>[M(l.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),V(Nw,null,{"page-top":B(()=>[M(l.$slots,"page-top",{},void 0,!0)]),"page-bottom":B(()=>[M(l.$slots,"page-bottom",{},void 0,!0)]),"not-found":B(()=>[M(l.$slots,"not-found",{},void 0,!0)]),"home-hero-before":B(()=>[M(l.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":B(()=>[M(l.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":B(()=>[M(l.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":B(()=>[M(l.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":B(()=>[M(l.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":B(()=>[M(l.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":B(()=>[M(l.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":B(()=>[M(l.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":B(()=>[M(l.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":B(()=>[M(l.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":B(()=>[M(l.$slots,"doc-before",{},void 0,!0)]),"doc-after":B(()=>[M(l.$slots,"doc-after",{},void 0,!0)]),"doc-top":B(()=>[M(l.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":B(()=>[M(l.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":B(()=>[M(l.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":B(()=>[M(l.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":B(()=>[M(l.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":B(()=>[M(l.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":B(()=>[M(l.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":B(()=>[M(l.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),V(xw),M(l.$slots,"layout-bottom",{},void 0,!0)],2)):(R(),q(h,{key:1}))}}}),Nb=J(Mb,[["__scopeId","data-v-ad30af8e"]]),kE={Layout:Nb,enhanceApp:({app:t})=>{t.component("Badge",Ty)}};function Bb({library:t,transform:e}){const i=ih(),{isDark:r,site:n}=E_();let s;const o=()=>setTimeout(()=>s.render(),20);Jr(()=>{Cu(()=>import("./index.1cbDv2Hd.js"),__vite__mapDeps([2,1])).then(({Page:a})=>{s=new a({library:t,transform:e,isDark:r.value,path:i.path}),o()})}),en(()=>i.path,()=>o()),_v(()=>{s.dispose()})}const Ib={__name:"Layout",props:["transform","library","Theme"],setup(t){const{transform:e={},library:i={},Theme:r}=t;return Bb({transform:e,library:i}),(n,s)=>(R(),q(A(t.Theme).Layout))}};var Fb=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Zp=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Sh=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Jh,co;let Ob=class{constructor(){Jh.set(this,void 0),co.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o}=e;i.initAsync.tapPromise(()=>Fb(this,void 0,void 0,function*(){let a;n==="webgl"?a=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(u){}}):a=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:l,height:c}=r,h=yield a.createSwapChain(r);h.configureSwapChain(l,c),Zp(this,Jh,h,"f"),Zp(this,co,h.getDevice(),"f")})),i.resize.tap((a,l)=>{Sh(this,Jh,"f").configureSwapChain(a*o,l*o)}),i.destroy.tap(()=>{Sh(this,co,"f").destroy()}),i.beginFrame.tap(()=>{Sh(this,co,"f").beginFrame()}),i.endFrame.tap(()=>{Sh(this,co,"f").endFrame()})}};Jh=new WeakMap,co=new WeakMap;var Ad=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Dl;let xb=class{constructor(){Dl.set(this,[])}getCallbacksNum(){return Ad(this,Dl,"f").length}tapPromise(e){Ad(this,Dl,"f").push(e)}promise(...e){return Promise.all(Ad(this,Dl,"f").map(i=>i(...e)))}};Dl=new WeakMap;var qp=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},eu;let xa=class{constructor(){eu.set(this,[])}tap(e){qp(this,eu,"f").push(e)}call(...e){qp(this,eu,"f").forEach(function(i){i.apply(void 0,e)})}};eu=new WeakMap;const Db=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};var Ub=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Qp=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},cn=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},tu,lr;let kb=class{constructor(e){tu.set(this,void 0),lr.set(this,void 0);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=Db();Qp(this,lr,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:s??o.devicePixelRatio,hooks:{init:new xa,initAsync:new xb,beginFrame:new xa,endFrame:new xa,destroy:new xa,resize:new xa}},"f"),Qp(this,tu,Ub(this,void 0,void 0,function*(){const{hooks:a}=cn(this,lr,"f");return[new Ob].forEach(l=>{l.apply(cn(this,lr,"f"))}),a.init.call(),yield a.initAsync.promise(),this}),"f")}get initialized(){return cn(this,tu,"f").then(()=>this)}render(){const{hooks:e}=cn(this,lr,"f");e.beginFrame.call(),e.endFrame.call()}resize(e,i){const{hooks:r}=cn(this,lr,"f");r.resize.call(e,i)}destroy(){const{hooks:e}=cn(this,lr,"f");e.destroy.call()}getDOM(){return cn(this,lr,"f").canvas}};tu=new WeakMap,lr=new WeakMap;const $b=Object.freeze(Object.defineProperty({__proto__:null,Canvas:kb},Symbol.toStringTag,{value:"Module"}));var Wb=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Os=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Me=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ho,Pt,xr,uo,fo;let Lb=class{constructor(){ho.set(this,void 0),Pt.set(this,void 0),xr.set(this,void 0),uo.set(this,void 0),fo.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o}=e;i.initAsync.tapPromise(()=>Wb(this,void 0,void 0,function*(){let a;n==="webgl"?a=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(u){}}):a=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:l,height:c}=r,h=yield a.createSwapChain(r);h.configureSwapChain(l,c),Os(this,ho,h,"f"),Os(this,Pt,h.getDevice(),"f"),Os(this,xr,Me(this,Pt,"f").createRenderTargetFromTexture(Me(this,Pt,"f").createTexture({format:v.U8_RGBA_RT,width:l,height:c,usage:Ae.RENDER_TARGET})),"f"),Os(this,fo,Me(this,Pt,"f").createBuffer({viewOrSize:new Float32Array([l/o,c/o]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f")})),i.resize.tap((a,l)=>{Me(this,ho,"f").configureSwapChain(a*o,l*o),Me(this,xr,"f")&&(Me(this,xr,"f").destroy(),Os(this,xr,Me(this,Pt,"f").createRenderTargetFromTexture(Me(this,Pt,"f").createTexture({format:v.U8_RGBA_RT,width:a*o,height:l*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{Me(this,xr,"f").destroy(),Me(this,fo,"f").destroy(),Me(this,Pt,"f").destroy(),Me(this,Pt,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:a,height:l}=Me(this,ho,"f").getCanvas(),c=Me(this,ho,"f").getOnscreenTexture();Me(this,fo,"f").setSubData(0,new Uint8Array(new Float32Array([a/o,l/o]).buffer)),Me(this,Pt,"f").beginFrame(),Os(this,uo,Me(this,Pt,"f").createRenderPass({colorAttachment:[Me(this,xr,"f")],colorResolveTo:[c],colorClearColor:[rn]}),"f"),Me(this,uo,"f").setViewport(0,0,a,l)}),i.endFrame.tap(()=>{Me(this,Pt,"f").submitPass(Me(this,uo,"f")),Me(this,Pt,"f").endFrame()}),i.render.tap(a=>{a.render(Me(this,Pt,"f"),Me(this,uo,"f"),Me(this,fo,"f"))})}};ho=new WeakMap,Pt=new WeakMap,xr=new WeakMap,uo=new WeakMap,fo=new WeakMap;var bd=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Ul;let Xb=class{constructor(){Ul.set(this,[])}getCallbacksNum(){return bd(this,Ul,"f").length}tapPromise(e){bd(this,Ul,"f").push(e)}promise(...e){return Promise.all(bd(this,Ul,"f").map(i=>i(...e)))}};Ul=new WeakMap;var Jp=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},iu;let xs=class{constructor(){iu.set(this,[])}tap(e){Jp(this,iu,"f").push(e)}call(...e){Jp(this,iu,"f").forEach(function(i){i.apply(void 0,e)})}};iu=new WeakMap;const Vb=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};var Hb=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},e_=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Jt=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ru,cr,xn;let Yb=class{constructor(e){ru.set(this,void 0),cr.set(this,void 0),xn.set(this,[]);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=Vb();e_(this,cr,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:s??o.devicePixelRatio,hooks:{init:new xs,initAsync:new Xb,beginFrame:new xs,render:new xs,endFrame:new xs,destroy:new xs,resize:new xs}},"f"),e_(this,ru,Hb(this,void 0,void 0,function*(){const{hooks:a}=Jt(this,cr,"f");return[new Lb].forEach(l=>{l.apply(Jt(this,cr,"f"))}),a.init.call(),yield a.initAsync.promise(),this}),"f")}get initialized(){return Jt(this,ru,"f").then(()=>this)}render(){const{hooks:e}=Jt(this,cr,"f");e.beginFrame.call(),Jt(this,xn,"f").forEach(i=>{e.render.call(i)}),e.endFrame.call()}resize(e,i){const{hooks:r}=Jt(this,cr,"f");r.resize.call(e,i)}destroy(){const{hooks:e}=Jt(this,cr,"f");Jt(this,xn,"f").forEach(i=>i.destroy()),e.destroy.call()}getDOM(){return Jt(this,cr,"f").canvas}appendChild(e){Jt(this,xn,"f").push(e)}removeChild(e){const i=Jt(this,xn,"f").indexOf(e);i!==-1&&Jt(this,xn,"f").splice(i,1)}};ru=new WeakMap,cr=new WeakMap,xn=new WeakMap;let $E=class{constructor(){this.renderDirtyFlag=!0}};const zb=`
layout(std140) uniform SceneUniforms {
  vec2 u_Resolution;
};

layout(std140) uniform ShapeUniforms {
  float u_AntiAliasingType;
};

layout(location = 0) in vec2 a_FragCoord;
layout(location = 1) in vec2 a_Position;
layout(location = 2) in vec2 a_Size;
layout(location = 3) in vec4 a_FillColor;

out vec2 v_FragCoord;
out vec4 v_FillColor;

void main() {
  v_FragCoord = a_FragCoord;
  v_FillColor = a_FillColor;

  // Pixel space to [0, 1] (Screen space)
  vec2 zeroToOne = (a_Position + a_Size * a_FragCoord) / u_Resolution;

  // Convert from [0, 1] to [0, 2]
  vec2 zeroToTwo = zeroToOne * 2.0;

  // Convert from [0, 2] to [-1, 1] (NDC/clip space)
  vec2 clipSpace = zeroToTwo - 1.0;

  // Flip Y axis
  gl_Position = vec4(clipSpace * vec2(1, -1), 0.0, 1.0);
}
`,jb=`
layout(std140) uniform SceneUniforms {
  vec2 u_Resolution;
};

layout(std140) uniform ShapeUniforms {
  float u_AntiAliasingType;
};

out vec4 outputColor;

in vec2 v_FragCoord;
in vec4 v_FillColor;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float distance = sdf_circle(v_FragCoord, 1.0);

  if (distance > 0.0) {
    discard;
  }

  int antiAliasingType = int(floor(u_AntiAliasingType + 0.5));
  
  float alpha;
  if (antiAliasingType == 0) {
    // Non Anti-aliasing
    alpha = 1.0;
  } else if (antiAliasingType == 1) {
    // Use Smoothstep
    alpha = smoothstep(0.0, 0.01, -distance);
  } else if (antiAliasingType == 2) {
    // Use Divide Fixed
    alpha = clamp(-distance / 0.01, 0.0, 1.0);
  } else if (antiAliasingType == 3) {
    // Use fwidth
    alpha = clamp(-distance / fwidth(-distance), 0.0, 1.0);
  }

  outputColor = v_FillColor;
  outputColor.a *= alpha;
}
`;var Ot=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},he=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Dn,kl,po,$l,_o,Eo,Wl,vo,mo,Un,Ll,kn,nu,Xl,zu;(function(t){t[t.NONE=0]="NONE",t[t.SMOOTHSTEP=1]="SMOOTHSTEP",t[t.DIVIDE=2]="DIVIDE",t[t.FWIDTH=3]="FWIDTH"})(zu||(zu={}));let Gb=class extends $E{constructor(e={}){super(),Dn.set(this,void 0),kl.set(this,void 0),po.set(this,void 0),$l.set(this,void 0),_o.set(this,void 0),Eo.set(this,void 0),Wl.set(this,void 0),vo.set(this,void 0),mo.set(this,void 0),Un.set(this,void 0),Ll.set(this,void 0),kn.set(this,void 0),nu.set(this,zu.NONE),Xl.set(this,void 0);const{cx:i,cy:r,r:n,fill:s,antiAliasingType:o}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black",Ot(this,nu,o,"f")}get cx(){return he(this,vo,"f")}set cx(e){he(this,vo,"f")!==e&&(Ot(this,vo,e,"f"),this.renderDirtyFlag=!0)}get cy(){return he(this,mo,"f")}set cy(e){he(this,mo,"f")!==e&&(Ot(this,mo,e,"f"),this.renderDirtyFlag=!0)}get r(){return he(this,Un,"f")}set r(e){he(this,Un,"f")!==e&&(Ot(this,Un,e,"f"),this.renderDirtyFlag=!0)}get fill(){return he(this,Ll,"f")}set fill(e){he(this,Ll,"f")!==e&&(Ot(this,Ll,e,"f"),Ot(this,kn,Mi(e),"f"),this.renderDirtyFlag=!0)}render(e,i,r){he(this,Dn,"f")||(Ot(this,Xl,e.createBuffer({viewOrSize:new Float32Array([he(this,nu,"f")]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),Ot(this,Dn,e.createProgram({vertex:{glsl:zb},fragment:{glsl:jb}}),"f"),Ot(this,po,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*8,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),Ot(this,kl,e.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),Ot(this,$l,e.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f"),Ot(this,Eo,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]},{arrayStride:4*8,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RG},{shaderLocation:2,offset:4*2,format:v.F32_RG},{shaderLocation:3,offset:4*4,format:v.F32_RGBA}]}],indexBufferFormat:v.U32_R,program:he(this,Dn,"f")}),"f"),Ot(this,_o,e.createRenderPipeline({inputLayout:he(this,Eo,"f"),program:he(this,Dn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}]}}),"f"),Ot(this,Wl,e.createBindings({pipeline:he(this,_o,"f"),uniformBufferBindings:[{buffer:r},{buffer:he(this,Xl,"f")}]}),"f")),this.renderDirtyFlag&&he(this,po,"f").setSubData(0,new Uint8Array(new Float32Array([he(this,vo,"f"),he(this,mo,"f"),he(this,Un,"f"),he(this,Un,"f"),he(this,kn,"f").r/255,he(this,kn,"f").g/255,he(this,kn,"f").b/255,he(this,kn,"f").opacity]).buffer)),i.setPipeline(he(this,_o,"f")),i.setVertexInput(he(this,Eo,"f"),[{buffer:he(this,kl,"f")},{buffer:he(this,po,"f")}],{buffer:he(this,$l,"f")}),i.setBindings(he(this,Wl,"f")),i.drawIndexed(6,1),this.renderDirtyFlag=!1}destroy(){he(this,Dn,"f").destroy(),he(this,po,"f").destroy(),he(this,kl,"f").destroy(),he(this,$l,"f").destroy(),he(this,Xl,"f").destroy(),he(this,_o,"f").destroy(),he(this,Eo,"f").destroy(),he(this,Wl,"f").destroy()}};Dn=new WeakMap,kl=new WeakMap,po=new WeakMap,$l=new WeakMap,_o=new WeakMap,Eo=new WeakMap,Wl=new WeakMap,vo=new WeakMap,mo=new WeakMap,Un=new WeakMap,Ll=new WeakMap,kn=new WeakMap,nu=new WeakMap,Xl=new WeakMap;const Kb=Object.freeze(Object.defineProperty({__proto__:null,get AntiAliasingType(){return zu},Canvas:Yb,Circle:Gb,Shape:$E},Symbol.toStringTag,{value:"Module"})),WE=new Qt,su=0;let xf=class{constructor(){this.renderDirtyFlag=!0,this.transform=new Qt,this.children=[]}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*ya}set angle(e){this.transform.rotation=e*Ra}appendChild(e){return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),e}removeChild(e){const i=this.children.indexOf(e);return i===-1?null:(e.parent=void 0,e.transform._parentID=-1,this.children.splice(i,1),e)}};const Zb=`
layout(std140) uniform SceneUniforms {
  vec2 u_Resolution;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

layout(location = 0) in vec2 a_FragCoord;
layout(location = 1) in vec2 a_Position;
layout(location = 2) in vec2 a_Size;
layout(location = 3) in vec4 a_FillColor;

out vec2 v_FragCoord;
out vec4 v_FillColor;

void main() {
  v_FragCoord = a_FragCoord;
  v_FillColor = a_FillColor;

  vec2 position = (u_ModelMatrix * vec3(a_Position + a_Size * a_FragCoord, 1)).xy;

  // Pixel space to [0, 1] (Screen space)
  vec2 zeroToOne = position / u_Resolution;

  // Convert from [0, 1] to [0, 2]
  vec2 zeroToTwo = zeroToOne * 2.0;

  // Convert from [0, 2] to [-1, 1] (NDC/clip space)
  vec2 clipSpace = zeroToTwo - 1.0;

  // Flip Y axis
  gl_Position = vec4(clipSpace * vec2(1, -1), 0.0, 1.0);
}
`,qb=`
layout(std140) uniform SceneUniforms {
  vec2 u_Resolution;
};

out vec4 outputColor;

in vec2 v_FragCoord;
in vec4 v_FillColor;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float distance = sdf_circle(v_FragCoord, 1.0);

  if (distance > 0.0) {
    discard;
  }
  
  float alpha = clamp(-distance / fwidth(-distance), 0.0, 1.0);

  outputColor = v_FillColor;
  outputColor.a *= alpha;
}
`;var ue=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Yt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},go,To,$n,Vl,Wn,Ln,Hl,yo,Yl,Ro,wo,Ao,zl;let Qb=class extends xf{constructor(e={}){super(),go.set(this,void 0),To.set(this,void 0),$n.set(this,void 0),Vl.set(this,void 0),Wn.set(this,void 0),Ln.set(this,void 0),Hl.set(this,void 0),yo.set(this,void 0),Yl.set(this,void 0),Ro.set(this,void 0),wo.set(this,void 0),Ao.set(this,void 0),zl.set(this,void 0);const{cx:i,cy:r,r:n,fill:s}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black"}get cx(){return ue(this,go,"f")}set cx(e){ue(this,go,"f")!==e&&(Yt(this,go,e,"f"),this.renderDirtyFlag=!0)}get cy(){return ue(this,To,"f")}set cy(e){ue(this,To,"f")!==e&&(Yt(this,To,e,"f"),this.renderDirtyFlag=!0)}get r(){return ue(this,$n,"f")}set r(e){ue(this,$n,"f")!==e&&(Yt(this,$n,e,"f"),this.renderDirtyFlag=!0)}get fill(){return ue(this,Vl,"f")}set fill(e){ue(this,Vl,"f")!==e&&(Yt(this,Vl,e,"f"),Yt(this,Wn,Mi(e),"f"),this.renderDirtyFlag=!0)}render(e,i,r){ue(this,Ln,"f")||(Yt(this,Ln,e.createProgram({vertex:{glsl:Zb},fragment:{glsl:qb}}),"f"),Yt(this,Ro,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*12,usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),Yt(this,yo,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*8,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),Yt(this,Hl,e.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),Yt(this,Yl,e.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f"),Yt(this,Ao,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]},{arrayStride:4*8,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RG},{shaderLocation:2,offset:4*2,format:v.F32_RG},{shaderLocation:3,offset:4*4,format:v.F32_RGBA}]}],indexBufferFormat:v.U32_R,program:ue(this,Ln,"f")}),"f"),Yt(this,wo,e.createRenderPipeline({inputLayout:ue(this,Ao,"f"),program:ue(this,Ln,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}]}}),"f"),Yt(this,zl,e.createBindings({pipeline:ue(this,wo,"f"),uniformBufferBindings:[{buffer:r},{buffer:ue(this,Ro,"f")}]}),"f"));const{a:n,b:s,c:o,d:a,tx:l,ty:c}=this.worldTransform;ue(this,Ro,"f").setSubData(0,new Uint8Array(new Float32Array([n,s,0,su,o,a,0,su,l,c,1,su]).buffer)),this.renderDirtyFlag&&ue(this,yo,"f").setSubData(0,new Uint8Array(new Float32Array([ue(this,go,"f"),ue(this,To,"f"),ue(this,$n,"f"),ue(this,$n,"f"),ue(this,Wn,"f").r/255,ue(this,Wn,"f").g/255,ue(this,Wn,"f").b/255,ue(this,Wn,"f").opacity]).buffer)),i.setPipeline(ue(this,wo,"f")),i.setVertexInput(ue(this,Ao,"f"),[{buffer:ue(this,Hl,"f")},{buffer:ue(this,yo,"f")}],{buffer:ue(this,Yl,"f")}),i.setBindings(ue(this,zl,"f")),i.drawIndexed(6,1),this.renderDirtyFlag=!1}destroy(){ue(this,Ln,"f").destroy(),ue(this,yo,"f").destroy(),ue(this,Hl,"f").destroy(),ue(this,Yl,"f").destroy(),ue(this,Ro,"f").destroy(),ue(this,wo,"f").destroy(),ue(this,Ao,"f").destroy(),ue(this,zl,"f").destroy()}};go=new WeakMap,To=new WeakMap,$n=new WeakMap,Vl=new WeakMap,Wn=new WeakMap,Ln=new WeakMap,Hl=new WeakMap,yo=new WeakMap,Yl=new WeakMap,Ro=new WeakMap,wo=new WeakMap,Ao=new WeakMap,zl=new WeakMap;let Jb=class extends xf{render(e,i,r){}destroy(){}};var eS=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Ds=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Ne=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},bo,Ct,Dr,So,Po;let tS=class{constructor(){bo.set(this,void 0),Ct.set(this,void 0),Dr.set(this,void 0),So.set(this,void 0),Po.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o}=e;i.initAsync.tapPromise(()=>eS(this,void 0,void 0,function*(){let a;n==="webgl"?a=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(u){}}):a=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:l,height:c}=r,h=yield a.createSwapChain(r);h.configureSwapChain(l,c),Ds(this,bo,h,"f"),Ds(this,Ct,h.getDevice(),"f"),Ds(this,Dr,Ne(this,Ct,"f").createRenderTargetFromTexture(Ne(this,Ct,"f").createTexture({format:v.U8_RGBA_RT,width:l,height:c,usage:Ae.RENDER_TARGET})),"f"),Ds(this,Po,Ne(this,Ct,"f").createBuffer({viewOrSize:new Float32Array([l/o,c/o]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f")})),i.resize.tap((a,l)=>{Ne(this,bo,"f").configureSwapChain(a*o,l*o),Ne(this,Dr,"f")&&(Ne(this,Dr,"f").destroy(),Ds(this,Dr,Ne(this,Ct,"f").createRenderTargetFromTexture(Ne(this,Ct,"f").createTexture({format:v.U8_RGBA_RT,width:a*o,height:l*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{Ne(this,Dr,"f").destroy(),Ne(this,Po,"f").destroy(),Ne(this,Ct,"f").destroy(),Ne(this,Ct,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:a,height:l}=Ne(this,bo,"f").getCanvas(),c=Ne(this,bo,"f").getOnscreenTexture();Ne(this,Po,"f").setSubData(0,new Uint8Array(new Float32Array([a/o,l/o]).buffer)),Ne(this,Ct,"f").beginFrame(),Ds(this,So,Ne(this,Ct,"f").createRenderPass({colorAttachment:[Ne(this,Dr,"f")],colorResolveTo:[c],colorClearColor:[rn]}),"f"),Ne(this,So,"f").setViewport(0,0,a,l)}),i.endFrame.tap(()=>{Ne(this,Ct,"f").submitPass(Ne(this,So,"f")),Ne(this,Ct,"f").endFrame()}),i.render.tap(a=>{a.transform.updateTransform(a.parent?a.parent.transform:WE),a.render(Ne(this,Ct,"f"),Ne(this,So,"f"),Ne(this,Po,"f"))})}};bo=new WeakMap,Ct=new WeakMap,Dr=new WeakMap,So=new WeakMap,Po=new WeakMap;var Sd=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},jl;let iS=class{constructor(){jl.set(this,[])}getCallbacksNum(){return Sd(this,jl,"f").length}tapPromise(e){Sd(this,jl,"f").push(e)}promise(...e){return Promise.all(Sd(this,jl,"f").map(i=>i(...e)))}};jl=new WeakMap;var t_=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},ou;let Us=class{constructor(){ou.set(this,[])}tap(e){t_(this,ou,"f").push(e)}call(...e){t_(this,ou,"f").forEach(function(i){i.apply(void 0,e)})}};ou=new WeakMap;const rS=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};function tf(t,e){e(t),t.children.forEach(i=>{tf(i,e)})}var nS=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},i_=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},ei=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},au,hr,Xn;let sS=class{constructor(e){au.set(this,void 0),hr.set(this,void 0),Xn.set(this,[]);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=rS();i_(this,hr,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:s??o.devicePixelRatio,hooks:{init:new Us,initAsync:new iS,beginFrame:new Us,render:new Us,endFrame:new Us,destroy:new Us,resize:new Us}},"f"),i_(this,au,nS(this,void 0,void 0,function*(){const{hooks:a}=ei(this,hr,"f");return[new tS].forEach(l=>{l.apply(ei(this,hr,"f"))}),a.init.call(),yield a.initAsync.promise(),this}),"f")}get initialized(){return ei(this,au,"f").then(()=>this)}render(){const{hooks:e}=ei(this,hr,"f");e.beginFrame.call(),ei(this,Xn,"f").forEach(i=>{tf(i,r=>{e.render.call(r)})}),e.endFrame.call()}resize(e,i){const{hooks:r}=ei(this,hr,"f");r.resize.call(e,i)}destroy(){const{hooks:e}=ei(this,hr,"f");ei(this,Xn,"f").forEach(i=>{tf(i,r=>{r.destroy()})}),e.destroy.call()}getDOM(){return ei(this,hr,"f").canvas}appendChild(e){ei(this,Xn,"f").push(e)}removeChild(e){const i=ei(this,Xn,"f").indexOf(e);i!==-1&&ei(this,Xn,"f").splice(i,1)}};au=new WeakMap,hr=new WeakMap,Xn=new WeakMap;const oS=Object.freeze(Object.defineProperty({__proto__:null,Canvas:sS,Circle:Qb,Group:Jb,IDENTITY_TRANSFORM:WE,PADDING:su,Shape:xf},Symbol.toStringTag,{value:"Module"}));var Pd=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Gl;let aS=class{constructor(){Gl.set(this,[])}getCallbacksNum(){return Pd(this,Gl,"f").length}tapPromise(e){Pd(this,Gl,"f").push(e)}promise(...e){return Promise.all(Pd(this,Gl,"f").map(i=>i(...e)))}};Gl=new WeakMap;var r_=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},lu;let ks=class{constructor(){lu.set(this,[])}tap(e){r_(this,lu,"f").push(e)}call(...e){r_(this,lu,"f").forEach(function(i){i.apply(void 0,e)})}};lu=new WeakMap;const lS=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};function rf(t,e){e(t),t.children.forEach(i=>{rf(i,e)})}const Cd=0;function Kl(t){return[t[0],t[1],t[2],Cd,t[3],t[4],t[5],Cd,t[6],t[7],t[8],Cd]}const cS={linear:Oe(0,0,1,1),ease:Oe(.25,.1,.25,1),"ease-in":Oe(.42,0,1,1),"ease-out":Oe(0,0,.58,1),"ease-in-out":Oe(.42,0,.58,1)};var le=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},zt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},ur,Wi,Li,Xi,Ti,Zl,ql,Ql,cu,Jl;const hS=.01;let LE=class{constructor(e,i){this.clipSpaceNearZ=er.NEGATIVE_ONE,ur.set(this,1),Wi.set(this,0),Li.set(this,0),Xi.set(this,0),Ti.set(this,me()),Zl.set(this,me()),ql.set(this,me()),Ql.set(this,me()),cu.set(this,me()),Jl.set(this,void 0),this.projection(e,i),this.updateMatrix()}projection(e,i){oh(le(this,Zl,"f"),e,i),this.updateViewProjectionMatrix()}updateMatrix(){const e=1/le(this,ur,"f");nh(le(this,Ti,"f")),Nt(le(this,Ti,"f"),le(this,Ti,"f"),[le(this,Wi,"f"),le(this,Li,"f")]),ir(le(this,Ti,"f"),le(this,Ti,"f"),le(this,Xi,"f")),sh(le(this,Ti,"f"),le(this,Ti,"f"),[e,e]),Qi(le(this,ql,"f"),le(this,Ti,"f")),this.updateViewProjectionMatrix()}updateViewProjectionMatrix(){tr(le(this,Ql,"f"),le(this,Zl,"f"),le(this,ql,"f")),Qi(le(this,cu,"f"),le(this,Ql,"f"))}get projectionMatrix(){return le(this,Zl,"f")}get viewMatrix(){return le(this,ql,"f")}get viewProjectionMatrix(){return le(this,Ql,"f")}get viewProjectionMatrixInv(){return le(this,cu,"f")}get matrix(){return le(this,Ti,"f")}get zoom(){return le(this,ur,"f")}set zoom(e){le(this,ur,"f")!==e&&(zt(this,ur,e,"f"),this.updateMatrix())}get x(){return le(this,Wi,"f")}set x(e){le(this,Wi,"f")!==e&&(zt(this,Wi,e,"f"),this.updateMatrix())}get y(){return le(this,Li,"f")}set y(e){le(this,Li,"f")!==e&&(zt(this,Li,e,"f"),this.updateMatrix())}get rotation(){return le(this,Xi,"f")}set rotation(e){le(this,Xi,"f")!==e&&(zt(this,Xi,e,"f"),this.updateMatrix())}createLandmark(e={}){return Object.assign({zoom:le(this,ur,"f"),x:le(this,Wi,"f"),y:le(this,Li,"f"),rotation:le(this,Xi,"f")},e)}gotoLandmark(e,i={}){const{easing:r="linear",duration:n=100,onframe:s=void 0,onfinish:o=void 0}=i,{zoom:a,x:l,y:c,rotation:h}=e,u=()=>{zt(this,ur,a,"f"),zt(this,Wi,l,"f"),zt(this,Li,c,"f"),zt(this,Xi,h,"f"),this.updateMatrix(),o&&o()};if(n===0){u();return}this.cancelLandmarkAnimation();let d;const f=[l,c],E=[a,h],g=p=>{d===void 0&&(d=p);const y=p-d;if(y>n){u();return}const T=cS[r](y/n),w=Re(),_=ah(1,0);if(Ji(w,[le(this,Wi,"f"),le(this,Li,"f")],f,T),Ji(_,[this.zoom,le(this,Xi,"f")],E,T),zt(this,Wi,w[0],"f"),zt(this,Li,w[1],"f"),zt(this,ur,_[0],"f"),zt(this,Xi,_[1],"f"),this.updateMatrix(),Ts(w,f)<=hS){u();return}y<n&&(s&&s(T),zt(this,Jl,requestAnimationFrame(g),"f"))};requestAnimationFrame(g)}cancelLandmarkAnimation(){le(this,Jl,"f")!==void 0&&cancelAnimationFrame(le(this,Jl,"f"))}};ur=new WeakMap,Wi=new WeakMap,Li=new WeakMap,Xi=new WeakMap,Ti=new WeakMap,Zl=new WeakMap,ql=new WeakMap,Ql=new WeakMap,cu=new WeakMap,Jl=new WeakMap;const XE=new Qt;let Df=class{constructor(){this.renderDirtyFlag=!0,this.transform=new Qt,this.children=[]}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*ya}set angle(e){this.transform.rotation=e*Ra}appendChild(e){return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),e}removeChild(e){const i=this.children.indexOf(e);return i===-1?null:(e.parent=void 0,e.transform._parentID=-1,this.children.splice(i,1),e)}};const uS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

layout(location = 0) in vec2 a_FragCoord;
layout(location = 1) in vec2 a_Position;
layout(location = 2) in vec2 a_Size;
layout(location = 3) in vec4 a_FillColor;

out vec2 v_FragCoord;
out vec4 v_FillColor;

void main() {
  v_FragCoord = a_FragCoord;
  v_FillColor = a_FillColor;

  gl_Position = vec4((u_ProjectionMatrix 
    * u_ViewMatrix
    * u_ModelMatrix 
    * vec3(a_Position + a_Size * a_FragCoord, 1)).xy, 0, 1);
}
`,dS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

out vec4 outputColor;

in vec2 v_FragCoord;
in vec4 v_FillColor;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float distance = sdf_circle(v_FragCoord, 1.0);

  if (distance > 0.0) {
    discard;
  }
  
  float alpha = clamp(-distance / fwidth(-distance), 0.0, 1.0);

  outputColor = v_FillColor;
  outputColor.a *= alpha;
}
`;var de=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},jt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Co,Mo,Vn,ec,Hn,Yn,tc,No,ic,Bo,Io,Fo,rc;let fS=class extends Df{constructor(e={}){super(),Co.set(this,void 0),Mo.set(this,void 0),Vn.set(this,void 0),ec.set(this,void 0),Hn.set(this,void 0),Yn.set(this,void 0),tc.set(this,void 0),No.set(this,void 0),ic.set(this,void 0),Bo.set(this,void 0),Io.set(this,void 0),Fo.set(this,void 0),rc.set(this,void 0);const{cx:i,cy:r,r:n,fill:s}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black"}get cx(){return de(this,Co,"f")}set cx(e){de(this,Co,"f")!==e&&(jt(this,Co,e,"f"),this.renderDirtyFlag=!0)}get cy(){return de(this,Mo,"f")}set cy(e){de(this,Mo,"f")!==e&&(jt(this,Mo,e,"f"),this.renderDirtyFlag=!0)}get r(){return de(this,Vn,"f")}set r(e){de(this,Vn,"f")!==e&&(jt(this,Vn,e,"f"),this.renderDirtyFlag=!0)}get fill(){return de(this,ec,"f")}set fill(e){de(this,ec,"f")!==e&&(jt(this,ec,e,"f"),jt(this,Hn,Mi(e),"f"),this.renderDirtyFlag=!0)}render(e,i,r){de(this,Yn,"f")||(jt(this,Yn,e.createProgram({vertex:{glsl:uS},fragment:{glsl:dS}}),"f"),jt(this,Bo,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*16,usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),jt(this,No,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*8,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),jt(this,tc,e.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),jt(this,ic,e.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f"),jt(this,Fo,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]},{arrayStride:4*8,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RG},{shaderLocation:2,offset:4*2,format:v.F32_RG},{shaderLocation:3,offset:4*4,format:v.F32_RGBA}]}],indexBufferFormat:v.U32_R,program:de(this,Yn,"f")}),"f"),jt(this,Io,e.createRenderPipeline({inputLayout:de(this,Fo,"f"),program:de(this,Yn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}]}}),"f"),jt(this,rc,e.createBindings({pipeline:de(this,Io,"f"),uniformBufferBindings:[{buffer:r},{buffer:de(this,Bo,"f")}]}),"f")),de(this,Bo,"f").setSubData(0,new Uint8Array(new Float32Array(Kl(this.worldTransform.toArray(!0))).buffer)),this.renderDirtyFlag&&de(this,No,"f").setSubData(0,new Uint8Array(new Float32Array([de(this,Co,"f"),de(this,Mo,"f"),de(this,Vn,"f"),de(this,Vn,"f"),de(this,Hn,"f").r/255,de(this,Hn,"f").g/255,de(this,Hn,"f").b/255,de(this,Hn,"f").opacity]).buffer)),i.setPipeline(de(this,Io,"f")),i.setVertexInput(de(this,Fo,"f"),[{buffer:de(this,tc,"f")},{buffer:de(this,No,"f")}],{buffer:de(this,ic,"f")}),i.setBindings(de(this,rc,"f")),i.drawIndexed(6,1),this.renderDirtyFlag=!1}destroy(){de(this,Yn,"f").destroy(),de(this,No,"f").destroy(),de(this,tc,"f").destroy(),de(this,ic,"f").destroy(),de(this,Bo,"f").destroy(),de(this,Io,"f").destroy(),de(this,Fo,"f").destroy(),de(this,rc,"f").destroy()}};Co=new WeakMap,Mo=new WeakMap,Vn=new WeakMap,ec=new WeakMap,Hn=new WeakMap,Yn=new WeakMap,tc=new WeakMap,No=new WeakMap,ic=new WeakMap,Bo=new WeakMap,Io=new WeakMap,Fo=new WeakMap,rc=new WeakMap;let pS=class extends Df{render(e,i,r){}destroy(){}};var _S=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},$s=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Be=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Oo,Mt,Ur,xo,Do;let ES=class{constructor(){Oo.set(this,void 0),Mt.set(this,void 0),Ur.set(this,void 0),xo.set(this,void 0),Do.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o,camera:a}=e;i.initAsync.tapPromise(()=>_S(this,void 0,void 0,function*(){let l;n==="webgl"?l=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(d){}}):l=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:c,height:h}=r,u=yield l.createSwapChain(r);u.configureSwapChain(c,h),$s(this,Oo,u,"f"),$s(this,Mt,u.getDevice(),"f"),$s(this,Ur,Be(this,Mt,"f").createRenderTargetFromTexture(Be(this,Mt,"f").createTexture({format:v.U8_RGBA_RT,width:c,height:h,usage:Ae.RENDER_TARGET})),"f"),$s(this,Do,Be(this,Mt,"f").createBuffer({viewOrSize:new Float32Array([...Kl(a.projectionMatrix),...Kl(a.viewMatrix),c/o,h/o]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f")})),i.resize.tap((l,c)=>{Be(this,Oo,"f").configureSwapChain(l*o,c*o),Be(this,Ur,"f")&&(Be(this,Ur,"f").destroy(),$s(this,Ur,Be(this,Mt,"f").createRenderTargetFromTexture(Be(this,Mt,"f").createTexture({format:v.U8_RGBA_RT,width:l*o,height:c*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{Be(this,Ur,"f").destroy(),Be(this,Do,"f").destroy(),Be(this,Mt,"f").destroy(),Be(this,Mt,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:l,height:c}=Be(this,Oo,"f").getCanvas(),h=Be(this,Oo,"f").getOnscreenTexture();Be(this,Do,"f").setSubData(0,new Uint8Array(new Float32Array([...Kl(a.projectionMatrix),...Kl(a.viewMatrix),l/o,c/o]).buffer)),Be(this,Mt,"f").beginFrame(),$s(this,xo,Be(this,Mt,"f").createRenderPass({colorAttachment:[Be(this,Ur,"f")],colorResolveTo:[h],colorClearColor:[rn]}),"f"),Be(this,xo,"f").setViewport(0,0,l,c)}),i.endFrame.tap(()=>{Be(this,Mt,"f").submitPass(Be(this,xo,"f")),Be(this,Mt,"f").endFrame()}),i.render.tap(l=>{l.transform.updateTransform(l.parent?l.parent.transform:XE),l.render(Be(this,Mt,"f"),Be(this,xo,"f"),Be(this,Do,"f"))})}};Oo=new WeakMap,Mt=new WeakMap,Ur=new WeakMap,xo=new WeakMap,Do=new WeakMap;const vS=.02,mS=100;let gS=class{apply(e){const{canvas:i,camera:r}=e,n=me();let s,o,a;const l=Re();let c,h=!1;function u(p){const y=i.getBoundingClientRect(),T=p.clientX-y.left,w=p.clientY-y.top,_=T/i.clientWidth,b=w/i.clientHeight,S=_*2-1,P=b*-2+1;return[S,P]}function d(p){const y=je(Re(),u(p),n);r.x=s+l[0]-y[0],r.y=o+l[1]-y[1]}function f(p){const y=(p.clientX-c[0])/100,T=me();Nt(T,T,[l[0],l[1]]),ir(T,T,y),Nt(T,T,[-l[0],-l[1]]),r.x=s,r.y=o,r.rotation=a,tr(T,T,r.matrix),r.rotation=a+y,r.x=T[6],r.y=T[7]}function E(p){h?f(p):d(p)}function g(p){h=!1,window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",g)}i.addEventListener("mousedown",p=>{p.preventDefault(),window.addEventListener("mousemove",E),window.addEventListener("mouseup",g),h=p.shiftKey,rh(n,r.viewProjectionMatrixInv),s=r.x,o=r.y,a=r.rotation,je(l,u(p),n),c=[p.clientX,p.clientY]}),i.addEventListener("wheel",p=>{p.preventDefault();const y=u(p),[T,w]=je(Re(),y,r.viewProjectionMatrixInv),_=r.zoom*Math.pow(2,p.deltaY*-.01);r.zoom=Math.max(vS,Math.min(mS,_));const[b,S]=je(Re(),y,r.viewProjectionMatrixInv);r.x+=T-b,r.y+=w-S})}};var TS=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},xt=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Md=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},hu,dr,zn,nc;let yS=class{get camera(){return xt(this,nc,"f")}constructor(e){hu.set(this,void 0),dr.set(this,void 0),zn.set(this,[]),nc.set(this,void 0);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=lS(),a=s??o.devicePixelRatio,{width:l,height:c}=i,h=new LE(l/a,c/a);Md(this,nc,h,"f"),Md(this,dr,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:a,hooks:{init:new ks,initAsync:new aS,beginFrame:new ks,render:new ks,endFrame:new ks,destroy:new ks,resize:new ks},camera:h},"f"),Md(this,hu,TS(this,void 0,void 0,function*(){const{hooks:u}=xt(this,dr,"f");return[new gS,new ES].forEach(d=>{d.apply(xt(this,dr,"f"))}),u.init.call(),yield u.initAsync.promise(),this}),"f")}get initialized(){return xt(this,hu,"f").then(()=>this)}render(){const{hooks:e}=xt(this,dr,"f");e.beginFrame.call(),xt(this,zn,"f").forEach(i=>{rf(i,r=>{e.render.call(r)})}),e.endFrame.call()}resize(e,i){const{hooks:r}=xt(this,dr,"f");xt(this,nc,"f").projection(e,i),r.resize.call(e,i)}destroy(){const{hooks:e}=xt(this,dr,"f");xt(this,zn,"f").forEach(i=>{rf(i,r=>{r.destroy()})}),e.destroy.call()}getDOM(){return xt(this,dr,"f").canvas}appendChild(e){xt(this,zn,"f").push(e)}removeChild(e){const i=xt(this,zn,"f").indexOf(e);i!==-1&&xt(this,zn,"f").splice(i,1)}};hu=new WeakMap,dr=new WeakMap,zn=new WeakMap,nc=new WeakMap;const RS=Object.freeze(Object.defineProperty({__proto__:null,Camera:LE,Canvas:yS,Circle:fS,Group:pS,IDENTITY_TRANSFORM:XE,Shape:Df},Symbol.toStringTag,{value:"Module"}));var Nd=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},sc;let wS=class{constructor(){sc.set(this,[])}getCallbacksNum(){return Nd(this,sc,"f").length}tapPromise(e){Nd(this,sc,"f").push(e)}promise(...e){return Promise.all(Nd(this,sc,"f").map(i=>i(...e)))}};sc=new WeakMap;var n_=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},uu;let Ws=class{constructor(){uu.set(this,[])}tap(e){n_(this,uu,"f").push(e)}call(...e){n_(this,uu,"f").forEach(function(i){i.apply(void 0,e)})}};uu=new WeakMap;const AS=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};function nf(t,e){e(t),t.children.forEach(i=>{nf(i,e)})}const Bd=0;function jn(t){return[t[0],t[1],t[2],Bd,t[3],t[4],t[5],Bd,t[6],t[7],t[8],Bd]}const bS={linear:Oe(0,0,1,1),ease:Oe(.25,.1,.25,1),"ease-in":Oe(.42,0,1,1),"ease-out":Oe(0,0,.58,1),"ease-in-out":Oe(.42,0,.58,1)};var jr;(function(t){t._bytes4=new Uint8Array(4),t._float=new Float32Array(t._bytes4.buffer),t._int=new Int32Array(t._bytes4.buffer),t._bytes2=new Uint8Array(2),t._short=new Int16Array(t._bytes2.buffer);function e(c){return t._float[0]=c,t._int[0]}t.floatToInt=e;function i(c){return t._int[0]=c,t._float[0]}t.intToFloat=i;function r(c){return t._float[0]=c,t._bytes4}t.floatToBytes=r;function n(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._float[0]}t.bytesToFloat=n;function s(c){return t._int[0]=c,t._bytes4}t.intToBytes=s;function o(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._int[0]}t.bytesToInt=o;function a(c){return t._short[0]=c,t._bytes2}t.shortToBytes=a;function l(c,h){return t._bytes2[0]=c,t._bytes2[1]=h,t._short[0]}t.bytesToShort=l})(jr||(jr={}));const s_=256;let VE=class{constructor(e=new Uint8Array(s_)){this._bytes=e,this.count=0,this.readOffset=0,this.capacity=s_,this.count=this.capacity=e.length}clear(){this.count=0,this.readOffset=0}byteCount(){return this.count}bytes(){return this._bytes.subarray(0,this.count)}grow(){this.capacity*=2;const e=new Uint8Array(this.capacity);e.set(this._bytes),this._bytes=e}hasMoreToRead(){return this.readOffset<this.count}seekTo(e){this.readOffset=e}skipBytes(e){this.readOffset+=e}appendBytes(e){const i=e.length;return this.count+i>this.capacity&&this.grow(),this._bytes.set(e,this.count),this.count+=i,this}byteAt(e){return this._bytes[e]}appendByte(e){return this.count+1>this.capacity&&this.grow(),this._bytes[this.count]=e,this.count++,this}readByte(){const e=this.byteAt(this.readOffset);return this.readOffset++,e}shortAt(e){return jr.bytesToShort(this._bytes[e],this._bytes[e+1])}appendShort(e){return this.appendBytes(jr.shortToBytes(e)),this}appendShorts(e){for(const i of e)this.appendShort(i);return this}readShort(){const e=this.shortAt(this.readOffset);return this.readOffset+=2,e}intAt(e){return jr.bytesToInt(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendInt(e){return this.appendBytes(jr.intToBytes(e)),this}appendInts(e){for(const i of e)this.appendInt(i);return this}readInt(){const e=this.intAt(this.readOffset);return this.readOffset+=4,e}floatAt(e){return jr.bytesToFloat(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendFloat(e){return this.appendBytes(jr.floatToBytes(e)),this}appendFloats(e){for(const i of e)this.appendFloat(i);return this}readFloat(){const e=this.floatAt(this.readOffset);return this.readOffset+=4,e}isEmpty(){return this.count==0}};var bt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},ne=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},fr,Vi,Hi,Yi,du,fu,yi,oc,ac,lc,pu,cc;const SS=.01;let HE=class{constructor(e,i){this.clipSpaceNearZ=er.NEGATIVE_ONE,fr.set(this,1),Vi.set(this,0),Hi.set(this,0),Yi.set(this,0),du.set(this,0),fu.set(this,0),yi.set(this,me()),oc.set(this,me()),ac.set(this,me()),lc.set(this,me()),pu.set(this,me()),cc.set(this,void 0),this.projection(e,i),this.updateMatrix()}projection(e,i){bt(this,du,e,"f"),bt(this,fu,i,"f"),oh(ne(this,oc,"f"),e,i),this.updateViewProjectionMatrix()}updateMatrix(){const e=1/ne(this,fr,"f");nh(ne(this,yi,"f")),Nt(ne(this,yi,"f"),ne(this,yi,"f"),[ne(this,Vi,"f"),ne(this,Hi,"f")]),ir(ne(this,yi,"f"),ne(this,yi,"f"),ne(this,Yi,"f")),sh(ne(this,yi,"f"),ne(this,yi,"f"),[e,e]),Qi(ne(this,ac,"f"),ne(this,yi,"f")),this.updateViewProjectionMatrix()}updateViewProjectionMatrix(){tr(ne(this,lc,"f"),ne(this,oc,"f"),ne(this,ac,"f")),Qi(ne(this,pu,"f"),ne(this,lc,"f"))}get projectionMatrix(){return ne(this,oc,"f")}get viewMatrix(){return ne(this,ac,"f")}get viewProjectionMatrix(){return ne(this,lc,"f")}get viewProjectionMatrixInv(){return ne(this,pu,"f")}get matrix(){return ne(this,yi,"f")}get zoom(){return ne(this,fr,"f")}set zoom(e){ne(this,fr,"f")!==e&&(bt(this,fr,e,"f"),this.updateMatrix())}get x(){return ne(this,Vi,"f")}set x(e){ne(this,Vi,"f")!==e&&(bt(this,Vi,e,"f"),this.updateMatrix())}get y(){return ne(this,Hi,"f")}set y(e){ne(this,Hi,"f")!==e&&(bt(this,Hi,e,"f"),this.updateMatrix())}get rotation(){return ne(this,Yi,"f")}set rotation(e){ne(this,Yi,"f")!==e&&(bt(this,Yi,e,"f"),this.updateMatrix())}get width(){return ne(this,du,"f")}get height(){return ne(this,fu,"f")}createLandmark(e={}){return Object.assign({zoom:ne(this,fr,"f"),x:ne(this,Vi,"f"),y:ne(this,Hi,"f"),rotation:ne(this,Yi,"f")},e)}gotoLandmark(e,i={}){const{easing:r="linear",duration:n=100,onframe:s=void 0,onfinish:o=void 0}=i,{zoom:a,x:l,y:c,rotation:h}=e,u=()=>{bt(this,fr,a,"f"),bt(this,Vi,l,"f"),bt(this,Hi,c,"f"),bt(this,Yi,h,"f"),this.updateMatrix(),o&&o()};if(n===0){u();return}this.cancelLandmarkAnimation();let d;const f=[l,c],E=[a,h],g=p=>{d===void 0&&(d=p);const y=p-d;if(y>n){u();return}const T=bS[r](y/n),w=Re(),_=ah(1,0);if(Ji(w,[ne(this,Vi,"f"),ne(this,Hi,"f")],f,T),Ji(_,[this.zoom,ne(this,Yi,"f")],E,T),bt(this,Vi,w[0],"f"),bt(this,Hi,w[1],"f"),bt(this,fr,_[0],"f"),bt(this,Yi,_[1],"f"),this.updateMatrix(),Ts(w,f)<=SS){u();return}y<n&&(s&&s(T),bt(this,cc,requestAnimationFrame(g),"f"))};requestAnimationFrame(g)}cancelLandmarkAnimation(){ne(this,cc,"f")!==void 0&&cancelAnimationFrame(ne(this,cc,"f"))}};fr=new WeakMap,Vi=new WeakMap,Hi=new WeakMap,Yi=new WeakMap,du=new WeakMap,fu=new WeakMap,yi=new WeakMap,oc=new WeakMap,ac=new WeakMap,lc=new WeakMap,pu=new WeakMap,cc=new WeakMap;const YE=new Qt;let Uf=class{constructor(){this.renderDirtyFlag=!0,this.transform=new Qt,this.children=[]}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*ya}set angle(e){this.transform.rotation=e*Ra}appendChild(e){return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),e}removeChild(e){const i=this.children.indexOf(e);return i===-1?null:(e.parent=void 0,e.transform._parentID=-1,this.children.splice(i,1),e)}};const PS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

layout(location = 0) in vec2 a_FragCoord;
layout(location = 1) in vec2 a_Position;
layout(location = 2) in vec2 a_Size;
layout(location = 3) in vec4 a_FillColor;

out vec2 v_FragCoord;
out vec4 v_FillColor;

void main() {
  v_FragCoord = a_FragCoord;
  v_FillColor = a_FillColor;

  gl_Position = vec4((u_ProjectionMatrix 
    * u_ViewMatrix
    * u_ModelMatrix 
    * vec3(a_Position + a_Size * a_FragCoord, 1)).xy, 0, 1);
}
`,CS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

out vec4 outputColor;

in vec2 v_FragCoord;
in vec4 v_FillColor;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float distance = sdf_circle(v_FragCoord, 1.0);

  if (distance > 0.0) {
    discard;
  }
  
  float alpha = clamp(-distance / fwidth(-distance), 0.0, 1.0);

  outputColor = v_FillColor;
  outputColor.a *= alpha;
}
`;var fe=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Gt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Uo,ko,Gn,hc,Kn,Zn,uc,$o,dc,Wo,Lo,Xo,fc;let MS=class extends Uf{constructor(e={}){super(),Uo.set(this,void 0),ko.set(this,void 0),Gn.set(this,void 0),hc.set(this,void 0),Kn.set(this,void 0),Zn.set(this,void 0),uc.set(this,void 0),$o.set(this,void 0),dc.set(this,void 0),Wo.set(this,void 0),Lo.set(this,void 0),Xo.set(this,void 0),fc.set(this,void 0);const{cx:i,cy:r,r:n,fill:s}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black"}get cx(){return fe(this,Uo,"f")}set cx(e){fe(this,Uo,"f")!==e&&(Gt(this,Uo,e,"f"),this.renderDirtyFlag=!0)}get cy(){return fe(this,ko,"f")}set cy(e){fe(this,ko,"f")!==e&&(Gt(this,ko,e,"f"),this.renderDirtyFlag=!0)}get r(){return fe(this,Gn,"f")}set r(e){fe(this,Gn,"f")!==e&&(Gt(this,Gn,e,"f"),this.renderDirtyFlag=!0)}get fill(){return fe(this,hc,"f")}set fill(e){fe(this,hc,"f")!==e&&(Gt(this,hc,e,"f"),Gt(this,Kn,Mi(e),"f"),this.renderDirtyFlag=!0)}render(e,i,r){fe(this,Zn,"f")||(Gt(this,Zn,e.createProgram({vertex:{glsl:PS},fragment:{glsl:CS}}),"f"),Gt(this,Wo,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*16,usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),Gt(this,$o,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*8,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),Gt(this,uc,e.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),Gt(this,dc,e.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f"),Gt(this,Xo,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]},{arrayStride:4*8,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RG},{shaderLocation:2,offset:4*2,format:v.F32_RG},{shaderLocation:3,offset:4*4,format:v.F32_RGBA}]}],indexBufferFormat:v.U32_R,program:fe(this,Zn,"f")}),"f"),Gt(this,Lo,e.createRenderPipeline({inputLayout:fe(this,Xo,"f"),program:fe(this,Zn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}]}}),"f"),Gt(this,fc,e.createBindings({pipeline:fe(this,Lo,"f"),uniformBufferBindings:[{buffer:r},{buffer:fe(this,Wo,"f")}]}),"f")),fe(this,Wo,"f").setSubData(0,new Uint8Array(new Float32Array(jn(this.worldTransform.toArray(!0))).buffer)),this.renderDirtyFlag&&fe(this,$o,"f").setSubData(0,new Uint8Array(new Float32Array([fe(this,Uo,"f"),fe(this,ko,"f"),fe(this,Gn,"f"),fe(this,Gn,"f"),fe(this,Kn,"f").r/255,fe(this,Kn,"f").g/255,fe(this,Kn,"f").b/255,fe(this,Kn,"f").opacity]).buffer)),i.setPipeline(fe(this,Lo,"f")),i.setVertexInput(fe(this,Xo,"f"),[{buffer:fe(this,uc,"f")},{buffer:fe(this,$o,"f")}],{buffer:fe(this,dc,"f")}),i.setBindings(fe(this,fc,"f")),i.drawIndexed(6,1),this.renderDirtyFlag=!1}destroy(){fe(this,Zn,"f").destroy(),fe(this,$o,"f").destroy(),fe(this,uc,"f").destroy(),fe(this,dc,"f").destroy(),fe(this,Wo,"f").destroy(),fe(this,Lo,"f").destroy(),fe(this,Xo,"f").destroy(),fe(this,fc,"f").destroy()}};Uo=new WeakMap,ko=new WeakMap,Gn=new WeakMap,hc=new WeakMap,Kn=new WeakMap,Zn=new WeakMap,uc=new WeakMap,$o=new WeakMap,dc=new WeakMap,Wo=new WeakMap,Lo=new WeakMap,Xo=new WeakMap,fc=new WeakMap;let NS=class extends Uf{render(e,i,r){}destroy(){}};var Vc;(function(t){t.TRANSPARENT=0,t.BLACK=0|255<<24,t.WHITE=65535|255<<16|255<<24,t.RED=255|255<<24;function e(r){return r&255|(r>>8&255)<<8|(r>>16&255)<<16|255<<24}t.opaque=e;function i(r){const n=(r>>>24)/255;return Ph((r&255)/255*n)|Ph((r>>8&255)/255*n)<<8|Ph((r>>16&255)/255*n)<<16|Ph(n)<<24}t.premultiplied=i})(Vc||(Vc={}));function Ph(t){return t<0?0:t>=1?255:t*256|0}const BS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
};

layout(location = 0) in vec4 a_Position;
layout(location = 1) in vec4 a_Color;

out vec2 v_Uv;
out vec4 v_Color;

void main() {
  v_Uv = a_Position.zw;
  v_Color = a_Color;
  vec2 position = (u_ProjectionMatrix * vec3(a_Position.xy, 1)).xy;
  gl_Position = vec4(position, 0, 1);
}
`,IS=`
out vec4 outputColor;

in vec2 v_Uv;
in vec4 v_Color;

void main() {
  outputColor = v_Color * min(1.0, min(v_Uv.x, v_Uv.y));
}
`;var We=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Fi=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},qn,Vo,Ho,pc,Yo,_c,_u,Eu,vu,mu,gu;const Da=[Re(),Re()];let o_=class{constructor(e){this.pixelScale=e,qn.set(this,void 0),Vo.set(this,void 0),Ho.set(this,void 0),pc.set(this,void 0),Yo.set(this,void 0),_c.set(this,new VE),_u.set(this,Vc.TRANSPARENT),Eu.set(this,0),vu.set(this,0),mu.set(this,0),gu.set(this,0)}render(e,i,r,n){We(this,qn,"f")||(Fi(this,qn,e.createProgram({vertex:{glsl:BS},fragment:{glsl:IS}}),"f"),Fi(this,Ho,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*5,stepMode:Se.VERTEX,attributes:[{format:v.F32_RGBA,offset:0,shaderLocation:0},{format:v.U8_RGBA_NORM,offset:4*4,shaderLocation:1}]}],indexBufferFormat:null,program:We(this,qn,"f")}),"f"),Fi(this,Vo,e.createRenderPipeline({inputLayout:We(this,Ho,"f"),program:We(this,qn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],topology:qe.TRIANGLE_STRIP}),"f"));const{height:s,width:o,zoom:a}=n,[l,c]=je(Re(),[0,0],n.viewMatrix),h=Math.pow(10,Math.round(Math.log(a/32)/Math.log(10))),u=h/a,d=Math.ceil(-l*u),f=Math.ceil((s-c)*-u),E=Math.ceil((o-l)*u),g=Math.ceil(-c*-u);for(let T=d;T<E;T++){const w=l+T*a/h;this.strokeLine(w,0,w,s,T==0?Vc.BLACK:T%10==0?0|127<<24:0|31<<24,T==0?2:1)}for(let T=f;T<g;T++){const w=c-T*a/h;this.strokeLine(0,w,o,w,T==0?Vc.BLACK:T%10==0?0|127<<24:0|31<<24,T==0?2:1)}const p=We(this,_c,"f").bytes();We(this,Yo,"f")&&We(this,Yo,"f").destroy();const y=e.createBuffer({viewOrSize:p.byteLength,usage:U.VERTEX,hint:Q.DYNAMIC});Fi(this,Yo,y,"f"),y.setSubData(0,p),Fi(this,pc,e.createBindings({pipeline:We(this,Vo,"f"),uniformBufferBindings:[{buffer:r}]}),"f"),i.setBindings(We(this,pc,"f")),i.setPipeline(We(this,Vo,"f")),i.setVertexInput(We(this,Ho,"f"),[{buffer:y}],null),i.draw(p.length/20)}reset(){We(this,_c,"f").clear()}destroy(){We(this,qn,"f").destroy(),We(this,Yo,"f").destroy(),We(this,Vo,"f").destroy(),We(this,Ho,"f").destroy(),We(this,pc,"f").destroy()}appendVertex(e,i,r,n,s){Fi(this,mu,e,"f"),Fi(this,gu,i,"f"),Fi(this,Eu,r,"f"),Fi(this,vu,n,"f"),Fi(this,_u,s,"f"),We(this,_c,"f").appendFloat(e).appendFloat(i).appendFloat(r).appendFloat(n).appendByte(s&255).appendByte(s>>8&255).appendByte(s>>16&255).appendByte(s>>>24)}appendPreviousVertex(){this.appendVertex(We(this,mu,"f"),We(this,gu,"f"),We(this,Eu,"f"),We(this,vu,"f"),We(this,_u,"f"))}strokeLine(e,i,r,n,s,o){Da[0][0]=e,Da[0][1]=i,Da[1][0]=r,Da[1][1]=n,this.strokeNonOverlappingPolyline(Da,s,o)}strokeNonOverlappingPolyline(e,i,r){const n=(r+this.pixelScale)/this.pixelScale,s=(r+this.pixelScale)/2,o=e.length;if(o<2)return;const a=e[0],l=e[1],c=l[0]-a[0],h=l[1]-a[1],u=Wf([c,h]),d=s/u,f=-h*d,E=c*d;this.appendVertex(a[0]-f,a[1]-E,0,n,i),this.appendPreviousVertex(),this.appendVertex(a[0]+f,a[1]+E,n,0,i);const g=e[o-2|0],p=e[o-1|0],y=p[0]-g[0],T=p[1]-g[1],w=Wf([y,T]),_=s/w,b=-T*_,S=y*_;this.appendVertex(p[0]-b,p[1]-S,0,n,i),this.appendVertex(p[0]+b,p[1]+S,n,0,i),this.appendPreviousVertex()}};qn=new WeakMap,Vo=new WeakMap,Ho=new WeakMap,pc=new WeakMap,Yo=new WeakMap,_c=new WeakMap,_u=new WeakMap,Eu=new WeakMap,vu=new WeakMap,mu=new WeakMap,gu=new WeakMap;const FS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

layout(location = 0) in vec2 a_Position;

out vec2 v_Position;

vec2 project_clipspace_to_world(vec2 p) {
  return (u_ViewProjectionInvMatrix * vec3(p, 1)).xy;
}

void main() {
  v_Position = project_clipspace_to_world(a_Position);
  gl_Position = vec4(a_Position, 0, 1);
}
`,OS=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

out vec4 outputColor;

in vec2 v_Position;

const vec4 GRID_COLOR = vec4(0.87, 0.87, 0.87, 1.0);
const vec4 PAGE_COLOR = vec4(0.986, 0.986, 0.986, 1.0);
const int CHECKERBOARD_STYLE_NONE = 0;
const int CHECKERBOARD_STYLE_GRID = 1;
const int CHECKERBOARD_STYLE_DOTS = 2;
const float BASE_GRID_PIXEL_SIZE = 100.0;
const float BASE_DOT_SIZE = 8.0;

vec2 scale_grid_size(float zoom) {
  if (zoom < 0.125) return vec2(BASE_GRID_PIXEL_SIZE * 125.0, 0.125);
  else if (zoom < 0.25) return vec2(BASE_GRID_PIXEL_SIZE * 25.0, 0.25);
  else if (zoom < 0.5) return vec2(BASE_GRID_PIXEL_SIZE * 5.0, 0.5);
  return vec2(BASE_GRID_PIXEL_SIZE, 4.0);
}

vec4 render_grid_checkerboard(vec2 coord) {
  float alpha = 0.0;

  vec2 size = scale_grid_size(u_ZoomScale);
  float gridSize1 = size.x;
  float gridSize2 = gridSize1 / 10.0;
  float zoomStep = size.y;
  int checkboardStyle = int(floor(u_CheckboardStyle + 0.5));

  if (checkboardStyle == CHECKERBOARD_STYLE_GRID) {
    vec2 grid1 = abs(fract(coord / gridSize1 - 0.5) - 0.5) / fwidth(coord) * gridSize1 / 2.0;
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    float v1 = 1.0 - min(min(grid1.x, grid1.y), 1.0);
    float v2 = 1.0 - min(min(grid2.x, grid2.y), 1.0);

    if (v1 > 0.0) {
      alpha = v1;
    } else {
      alpha = v2 * clamp(u_ZoomScale / zoomStep, 0.0, 1.0);
    }
  } else if (checkboardStyle == CHECKERBOARD_STYLE_DOTS) {
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    alpha = smoothstep(1.0, 0.0, length(grid2) - BASE_DOT_SIZE * u_ZoomScale / zoomStep);
  }

  return mix(PAGE_COLOR, GRID_COLOR, alpha);
}

void main() {
  outputColor = render_grid_checkerboard(v_Position);
}
`;var et=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Ua=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Qn,zo,jo,Ec,Jn,vc;class xS{constructor(){Qn.set(this,void 0),zo.set(this,void 0),jo.set(this,void 0),Ec.set(this,void 0),Jn.set(this,void 0),vc.set(this,new VE)}appendVertex(e,i){et(this,vc,"f").appendFloat(e).appendFloat(i)}render(e,i,r){if(!et(this,Qn,"f")){Ua(this,Qn,e.createProgram({vertex:{glsl:FS},fragment:{glsl:OS}}),"f"),Ua(this,jo,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{format:v.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:et(this,Qn,"f")}),"f"),Ua(this,zo,e.createRenderPipeline({inputLayout:et(this,jo,"f"),program:et(this,Qn,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],topology:qe.TRIANGLE_STRIP}),"f"),Ua(this,Ec,e.createBindings({pipeline:et(this,zo,"f"),uniformBufferBindings:[{buffer:r}]}),"f"),et(this,vc,"f").clear(),this.appendVertex(-1,-1),this.appendVertex(-1,1),this.appendVertex(1,-1),this.appendVertex(1,1);const n=et(this,vc,"f").bytes();et(this,Jn,"f")&&et(this,Jn,"f").destroy();const s=e.createBuffer({viewOrSize:n.byteLength,usage:U.VERTEX,hint:Q.DYNAMIC});Ua(this,Jn,s,"f"),s.setSubData(0,n)}i.setBindings(et(this,Ec,"f")),i.setPipeline(et(this,zo,"f")),i.setVertexInput(et(this,jo,"f"),[{buffer:et(this,Jn,"f")}],null),i.draw(4)}destroy(){et(this,Qn,"f").destroy(),et(this,Jn,"f").destroy(),et(this,zo,"f").destroy(),et(this,jo,"f").destroy(),et(this,Ec,"f").destroy()}}Qn=new WeakMap,zo=new WeakMap,jo=new WeakMap,Ec=new WeakMap,Jn=new WeakMap,vc=new WeakMap;var DS=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},hi=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},se=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Go,ft,kr,$r,Wr,es,mc,Lr,gc,fs;(function(t){t[t.LINE_GEOMETRY=0]="LINE_GEOMETRY",t[t.SCREEN_SPACE=1]="SCREEN_SPACE"})(fs||(fs={}));var sf;(function(t){t[t.NONE=0]="NONE",t[t.GRID=1]="GRID",t[t.DOTS=2]="DOTS"})(sf||(sf={}));let US=class{constructor(){Go.set(this,void 0),ft.set(this,void 0),kr.set(this,void 0),$r.set(this,void 0),Wr.set(this,void 0),es.set(this,fs.SCREEN_SPACE),mc.set(this,sf.GRID),Lr.set(this,void 0),gc.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o,camera:a}=e;i.initAsync.tapPromise(()=>DS(this,void 0,void 0,function*(){let l;n==="webgl"?l=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(d){}}):l=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:c,height:h}=r,u=yield l.createSwapChain(r);u.configureSwapChain(c,h),hi(this,Go,u,"f"),hi(this,ft,u.getDevice(),"f"),hi(this,kr,se(this,ft,"f").createRenderTargetFromTexture(se(this,ft,"f").createTexture({format:v.U8_RGBA_RT,width:c,height:h,usage:Ae.RENDER_TARGET})),"f"),hi(this,Wr,se(this,ft,"f").createBuffer({viewOrSize:new Float32Array([...jn(a.projectionMatrix),...jn(a.viewMatrix),...jn(a.viewProjectionMatrixInv),a.zoom,se(this,mc,"f"),0,0]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),se(this,es,"f")===fs.LINE_GEOMETRY?hi(this,Lr,new o_(1/o),"f"):hi(this,gc,new xS,"f")})),i.resize.tap((l,c)=>{se(this,Go,"f").configureSwapChain(l*o,c*o),se(this,kr,"f")&&(se(this,kr,"f").destroy(),hi(this,kr,se(this,ft,"f").createRenderTargetFromTexture(se(this,ft,"f").createTexture({format:v.U8_RGBA_RT,width:l*o,height:c*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{se(this,es,"f")===fs.LINE_GEOMETRY?se(this,Lr,"f").destroy():se(this,gc,"f").destroy(),se(this,kr,"f").destroy(),se(this,Wr,"f").destroy(),se(this,ft,"f").destroy(),se(this,ft,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:l,height:c}=se(this,Go,"f").getCanvas(),h=se(this,Go,"f").getOnscreenTexture();se(this,Wr,"f").setSubData(0,new Uint8Array(new Float32Array([...jn(a.projectionMatrix),...jn(a.viewMatrix),...jn(a.viewProjectionMatrixInv),a.zoom,se(this,mc,"f"),0,0]).buffer)),se(this,ft,"f").beginFrame(),hi(this,$r,se(this,ft,"f").createRenderPass({colorAttachment:[se(this,kr,"f")],colorResolveTo:[h],colorClearColor:[rn]}),"f"),se(this,$r,"f").setViewport(0,0,l,c),se(this,es,"f")===fs.LINE_GEOMETRY?(se(this,Lr,"f")||hi(this,Lr,new o_(1/o),"f"),se(this,Lr,"f").render(se(this,ft,"f"),se(this,$r,"f"),se(this,Wr,"f"),a)):se(this,gc,"f").render(se(this,ft,"f"),se(this,$r,"f"),se(this,Wr,"f"))}),i.endFrame.tap(()=>{se(this,ft,"f").submitPass(se(this,$r,"f")),se(this,ft,"f").endFrame(),se(this,es,"f")===fs.LINE_GEOMETRY&&se(this,Lr,"f").reset()}),i.render.tap(l=>{l.transform.updateTransform(l.parent?l.parent.transform:YE),l.render(se(this,ft,"f"),se(this,$r,"f"),se(this,Wr,"f"))})}setGridImplementation(e){hi(this,es,e,"f")}setCheckboardStyle(e){hi(this,mc,e,"f")}};Go=new WeakMap,ft=new WeakMap,kr=new WeakMap,$r=new WeakMap,Wr=new WeakMap,es=new WeakMap,mc=new WeakMap,Lr=new WeakMap,gc=new WeakMap;const kS=.02,$S=4;let WS=class{apply(e){const{canvas:i,camera:r}=e,n=me();let s,o,a;const l=Re();let c,h=!1;function u(p){const y=i.getBoundingClientRect(),T=p.clientX-y.left,w=p.clientY-y.top,_=T/i.clientWidth,b=w/i.clientHeight,S=_*2-1,P=b*-2+1;return[S,P]}function d(p){const y=je(Re(),u(p),n);r.x=s+l[0]-y[0],r.y=o+l[1]-y[1]}function f(p){const y=(p.clientX-c[0])/100,T=me();Nt(T,T,[l[0],l[1]]),ir(T,T,y),Nt(T,T,[-l[0],-l[1]]),r.x=s,r.y=o,r.rotation=a,tr(T,T,r.matrix),r.rotation=a+y,r.x=T[6],r.y=T[7]}function E(p){h?f(p):d(p)}function g(p){h=!1,window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",g)}i.addEventListener("mousedown",p=>{p.preventDefault(),window.addEventListener("mousemove",E),window.addEventListener("mouseup",g),h=p.shiftKey,rh(n,r.viewProjectionMatrixInv),s=r.x,o=r.y,a=r.rotation,je(l,u(p),n),c=[p.clientX,p.clientY]}),i.addEventListener("wheel",p=>{p.preventDefault();const y=u(p),[T,w]=je(Re(),y,r.viewProjectionMatrixInv),_=r.zoom*Math.pow(2,p.deltaY*-.01);r.zoom=Math.max(kS,Math.min($S,_));const[b,S]=je(Re(),y,r.viewProjectionMatrixInv);r.x+=T-b,r.y+=w-S})}};var LS=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},ut=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Ch=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Tu,pr,Ko,ts,Tc;let XS=class{get camera(){return ut(this,Tc,"f")}constructor(e){Tu.set(this,void 0),pr.set(this,void 0),Ko.set(this,void 0),ts.set(this,[]),Tc.set(this,void 0);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=AS(),a=s??o.devicePixelRatio,{width:l,height:c}=i,h=new HE(l/a,c/a);Ch(this,Tc,h,"f"),Ch(this,pr,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:a,hooks:{init:new Ws,initAsync:new wS,beginFrame:new Ws,render:new Ws,endFrame:new Ws,destroy:new Ws,resize:new Ws},camera:h},"f"),Ch(this,Tu,LS(this,void 0,void 0,function*(){const{hooks:u}=ut(this,pr,"f");return Ch(this,Ko,new US,"f"),[new WS,ut(this,Ko,"f")].forEach(d=>{d.apply(ut(this,pr,"f"))}),u.init.call(),yield u.initAsync.promise(),this}),"f")}get initialized(){return ut(this,Tu,"f").then(()=>this)}render(){const{hooks:e}=ut(this,pr,"f");e.beginFrame.call(),ut(this,ts,"f").forEach(i=>{nf(i,r=>{e.render.call(r)})}),e.endFrame.call()}resize(e,i){const{hooks:r}=ut(this,pr,"f");ut(this,Tc,"f").projection(e,i),r.resize.call(e,i)}destroy(){const{hooks:e}=ut(this,pr,"f");ut(this,ts,"f").forEach(i=>{nf(i,r=>{r.destroy()})}),e.destroy.call()}getDOM(){return ut(this,pr,"f").canvas}appendChild(e){ut(this,ts,"f").push(e)}removeChild(e){const i=ut(this,ts,"f").indexOf(e);i!==-1&&ut(this,ts,"f").splice(i,1)}setGridImplementation(e){ut(this,Ko,"f").setGridImplementation(e)}setCheckboardStyle(e){ut(this,Ko,"f").setCheckboardStyle(e)}};Tu=new WeakMap,pr=new WeakMap,Ko=new WeakMap,ts=new WeakMap,Tc=new WeakMap;const VS=Object.freeze(Object.defineProperty({__proto__:null,Camera:HE,Canvas:XS,Circle:MS,Group:NS,IDENTITY_TRANSFORM:YE,Shape:Uf},Symbol.toStringTag,{value:"Module"}));var Id=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},yc;class HS{constructor(){yc.set(this,[])}getCallbacksNum(){return Id(this,yc,"f").length}tapPromise(e){Id(this,yc,"f").push(e)}promise(...e){return Promise.all(Id(this,yc,"f").map(i=>i(...e)))}}yc=new WeakMap;var a_=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},yu;class Kt{constructor(){yu.set(this,[])}tap(e){a_(this,yu,"f").push(e)}call(...e){a_(this,yu,"f").forEach(function(i){i.apply(void 0,e)})}}yu=new WeakMap;var ka=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},is;class YS{constructor(){is.set(this,[])}tap(e){ka(this,is,"f").push(e)}call(...e){if(ka(this,is,"f").length){let i=ka(this,is,"f")[0].apply(void 0,e);for(let r=0;r<ka(this,is,"f").length-1;r++){const n=ka(this,is,"f")[r];i=n(...i)}return i}return null}}is=new WeakMap;const zS=()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};function ju(t,e){e(t)||t.children.forEach(i=>{ju(i,e)})}const Fd=0;function rs(t){return[t[0],t[1],t[2],Fd,t[3],t[4],t[5],Fd,t[6],t[7],t[8],Fd]}function zE(t,e,i,r){return Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2))}const jS={linear:Oe(0,0,1,1),ease:Oe(.25,.1,.25,1),"ease-in":Oe(.42,0,1,1),"ease-out":Oe(0,0,.58,1),"ease-in-out":Oe(.42,0,.58,1)};var Gr;(function(t){t._bytes4=new Uint8Array(4),t._float=new Float32Array(t._bytes4.buffer),t._int=new Int32Array(t._bytes4.buffer),t._bytes2=new Uint8Array(2),t._short=new Int16Array(t._bytes2.buffer);function e(c){return t._float[0]=c,t._int[0]}t.floatToInt=e;function i(c){return t._int[0]=c,t._float[0]}t.intToFloat=i;function r(c){return t._float[0]=c,t._bytes4}t.floatToBytes=r;function n(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._float[0]}t.bytesToFloat=n;function s(c){return t._int[0]=c,t._bytes4}t.intToBytes=s;function o(c,h,u,d){return t._bytes4[0]=c,t._bytes4[1]=h,t._bytes4[2]=u,t._bytes4[3]=d,t._int[0]}t.bytesToInt=o;function a(c){return t._short[0]=c,t._bytes2}t.shortToBytes=a;function l(c,h){return t._bytes2[0]=c,t._bytes2[1]=h,t._short[0]}t.bytesToShort=l})(Gr||(Gr={}));const l_=256;class GS{constructor(e=new Uint8Array(l_)){this._bytes=e,this.count=0,this.readOffset=0,this.capacity=l_,this.count=this.capacity=e.length}clear(){this.count=0,this.readOffset=0}byteCount(){return this.count}bytes(){return this._bytes.subarray(0,this.count)}grow(){this.capacity*=2;const e=new Uint8Array(this.capacity);e.set(this._bytes),this._bytes=e}hasMoreToRead(){return this.readOffset<this.count}seekTo(e){this.readOffset=e}skipBytes(e){this.readOffset+=e}appendBytes(e){const i=e.length;return this.count+i>this.capacity&&this.grow(),this._bytes.set(e,this.count),this.count+=i,this}byteAt(e){return this._bytes[e]}appendByte(e){return this.count+1>this.capacity&&this.grow(),this._bytes[this.count]=e,this.count++,this}readByte(){const e=this.byteAt(this.readOffset);return this.readOffset++,e}shortAt(e){return Gr.bytesToShort(this._bytes[e],this._bytes[e+1])}appendShort(e){return this.appendBytes(Gr.shortToBytes(e)),this}appendShorts(e){for(const i of e)this.appendShort(i);return this}readShort(){const e=this.shortAt(this.readOffset);return this.readOffset+=2,e}intAt(e){return Gr.bytesToInt(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendInt(e){return this.appendBytes(Gr.intToBytes(e)),this}appendInts(e){for(const i of e)this.appendInt(i);return this}readInt(){const e=this.intAt(this.readOffset);return this.readOffset+=4,e}floatAt(e){return Gr.bytesToFloat(this._bytes[e],this._bytes[e+1],this._bytes[e+2],this._bytes[e+3])}appendFloat(e){return this.appendBytes(Gr.floatToBytes(e)),this}appendFloats(e){for(const i of e)this.appendFloat(i);return this}readFloat(){const e=this.floatAt(this.readOffset);return this.readOffset+=4,e}isEmpty(){return this.count==0}}const Mh=t=>t instanceof Object,c_=t=>t===!!t,Nh=t=>typeof t=="function",Ye=t=>t===void 0,h_=t=>t==null;var St=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},oe=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},_r,zi,ji,Gi,Ru,wu,Ri,Rc,wc,Ac,Au,bc;const KS=.01;class jE{constructor(e,i){this.clipSpaceNearZ=er.NEGATIVE_ONE,_r.set(this,1),zi.set(this,0),ji.set(this,0),Gi.set(this,0),Ru.set(this,0),wu.set(this,0),Ri.set(this,me()),Rc.set(this,me()),wc.set(this,me()),Ac.set(this,me()),Au.set(this,me()),bc.set(this,void 0),this.projection(e,i),this.updateMatrix()}projection(e,i){St(this,Ru,e,"f"),St(this,wu,i,"f"),oh(oe(this,Rc,"f"),e,i),this.updateViewProjectionMatrix()}updateMatrix(){const e=1/oe(this,_r,"f");nh(oe(this,Ri,"f")),Nt(oe(this,Ri,"f"),oe(this,Ri,"f"),[oe(this,zi,"f"),oe(this,ji,"f")]),ir(oe(this,Ri,"f"),oe(this,Ri,"f"),oe(this,Gi,"f")),sh(oe(this,Ri,"f"),oe(this,Ri,"f"),[e,e]),Qi(oe(this,wc,"f"),oe(this,Ri,"f")),this.updateViewProjectionMatrix()}updateViewProjectionMatrix(){tr(oe(this,Ac,"f"),oe(this,Rc,"f"),oe(this,wc,"f")),Qi(oe(this,Au,"f"),oe(this,Ac,"f"))}get projectionMatrix(){return oe(this,Rc,"f")}get viewMatrix(){return oe(this,wc,"f")}get viewProjectionMatrix(){return oe(this,Ac,"f")}get viewProjectionMatrixInv(){return oe(this,Au,"f")}get matrix(){return oe(this,Ri,"f")}get zoom(){return oe(this,_r,"f")}set zoom(e){oe(this,_r,"f")!==e&&(St(this,_r,e,"f"),this.updateMatrix())}get x(){return oe(this,zi,"f")}set x(e){oe(this,zi,"f")!==e&&(St(this,zi,e,"f"),this.updateMatrix())}get y(){return oe(this,ji,"f")}set y(e){oe(this,ji,"f")!==e&&(St(this,ji,e,"f"),this.updateMatrix())}get rotation(){return oe(this,Gi,"f")}set rotation(e){oe(this,Gi,"f")!==e&&(St(this,Gi,e,"f"),this.updateMatrix())}get width(){return oe(this,Ru,"f")}get height(){return oe(this,wu,"f")}createLandmark(e={}){return Object.assign({zoom:oe(this,_r,"f"),x:oe(this,zi,"f"),y:oe(this,ji,"f"),rotation:oe(this,Gi,"f")},e)}gotoLandmark(e,i={}){const{easing:r="linear",duration:n=100,onframe:s=void 0,onfinish:o=void 0}=i,{zoom:a,x:l,y:c,rotation:h}=e,u=()=>{St(this,_r,a,"f"),St(this,zi,l,"f"),St(this,ji,c,"f"),St(this,Gi,h,"f"),this.updateMatrix(),o&&o()};if(n===0){u();return}this.cancelLandmarkAnimation();let d;const f=[l,c],E=[a,h],g=p=>{d===void 0&&(d=p);const y=p-d;if(y>n){u();return}const T=jS[r](y/n),w=Re(),_=ah(1,0);if(Ji(w,[oe(this,zi,"f"),oe(this,ji,"f")],f,T),Ji(_,[this.zoom,oe(this,Gi,"f")],E,T),St(this,zi,w[0],"f"),St(this,ji,w[1],"f"),St(this,_r,_[0],"f"),St(this,Gi,_[1],"f"),this.updateMatrix(),Ts(w,f)<=KS){u();return}y<n&&(s&&s(T),St(this,bc,requestAnimationFrame(g),"f"))};requestAnimationFrame(g)}cancelLandmarkAnimation(){oe(this,bc,"f")!==void 0&&cancelAnimationFrame(oe(this,bc,"f"))}}_r=new WeakMap,zi=new WeakMap,ji=new WeakMap,Gi=new WeakMap,Ru=new WeakMap,wu=new WeakMap,Ri=new WeakMap,Rc=new WeakMap,wc=new WeakMap,Ac=new WeakMap,Au=new WeakMap,bc=new WeakMap;class ad{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ad.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ve,this.page=new ve,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,r,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Gu extends ad{constructor(){super(...arguments),this.client=new ve,this.movement=new ve,this.offset=new ve,this.global=new ve,this.screen=new ve}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,i,r,n,s,o,a,l,c,h,u,d,f,E,g){throw new Error("Method not implemented.")}}class wi extends Gu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class of extends Gu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}var ZS=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},qS=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},bu;const QS=2048;class JS{constructor(e){this.dispatch=new tn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,bu.set(this,void 0),this.rootTarget=e,this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}setPickHandler(e){ZS(this,bu,e,"f")}addEventMapping(e,i){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:i,priority:0}),this.mappingTable[e].sort((r,n)=>r.priority-n.priority)}dispatchEvent(e,i){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,i),this.dispatch.emit(i||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const i=this.mappingTable[e.type];if(i)for(let r=0,n=i.length;r<n;r++)i[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,i){return qS(this,bu,"f").call(this,e,i)}propagate(e,i){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=r.length-1;n<s;n++)if(e.currentTarget=r[n],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,i),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(e.currentTarget=r[n],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,i,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let s=r.length-1;s>=0;s--)n.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const i=[e];for(let r=0;r<QS&&e!==this.rootTarget&&e.parent;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(e.parent),e=e.parent}return i.reverse(),i}notifyTarget(e,i){i=i??e.type;const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${i}capture`:i;this._notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,i)}mapPointerDown(e){if(!(e instanceof wi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(e){var i,r,n;if(!(e instanceof wi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const s=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const o=s.pointerType==="mouse"||s.pointerType==="pen",a=this.trackingData(e.pointerId),l=this.findMountedTarget(a.overTargets);if(((i=a.overTargets)===null||i===void 0?void 0:i.length)>0&&l!==s.target){const u=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,u,l);if(this.dispatchEvent(d,"pointerout"),o&&this.dispatchEvent(d,"mouseout"),!s.composedPath().includes(l)){const f=this.createPointerEvent(e,"pointerleave",l);for(f.eventPhase=f.AT_TARGET;f.target&&!s.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),o&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}if(l!==s.target){const u=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(s,u);this.dispatchEvent(d,"pointerover"),o&&this.dispatchEvent(d,"mouseover");let f=l==null?void 0:l.parent;for(;f&&f!==this.rootTarget.parent&&f!==s.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const g=this.clonePointerEvent(s,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),o&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(d)}const c=[],h=(r=this.enableGlobalMoveEvents)!==null&&r!==void 0?r:!0;this.moveOnAll?c.push("pointermove"):this.dispatchEvent(s,"pointermove"),h&&c.push("globalpointermove"),s.pointerType==="touch"&&(this.moveOnAll?c.splice(1,0,"touchmove"):this.dispatchEvent(s,"touchmove"),h&&c.push("globaltouchmove")),o&&(this.moveOnAll?c.splice(1,0,"mousemove"):this.dispatchEvent(s,"mousemove"),h&&c.push("globalmousemove"),this.cursor=(n=s.target)===null||n===void 0?void 0:n.cursor),c.length>0&&this.all(s,c),this._allInteractiveElements.length=0,this._hitElements.length=0,a.overTargets=s.composedPath(),this.freeEvent(s)}mapPointerOver(e){var i;if(!(e instanceof wi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(i=n.target)===null||i===void 0?void 0:i.cursor);const o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof wi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId);if(i.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){var i;if(!(e instanceof wi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.dispatchEvent(n,l?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),o=this.findMountedTarget(s.pressTargetsByButton[e.button]);let a=o;if(o&&!n.composedPath().includes(o)){let l=o;for(;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}l=l.parent}delete s.pressTargetsByButton[e.button],a=l}if(a){const l=this.clonePointerEvent(n,"click");l.target=a,l.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:r});const c=s.clicksByButton[e.button];if(c.target===l.target&&r-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=l.target,c.timeStamp=r,l.detail=c.clickCount,!(!((i=n.detail)===null||i===void 0)&&i.preventClick)){if(l.pointerType==="mouse"){const h=l.button===2;this.dispatchEvent(l,h?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap")}this.freeEvent(l)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof wi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(r){let s=r;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof of)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(e);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(e){if(!e)return null;let i=e[0];for(let r=1;r<e.length&&e[r].parent===i;r++)i=e[r];return i}createPointerEvent(e,i,r){var n;const s=this.allocateEvent(wi);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=(n=r??this.hitTest(s.global.x,s.global.y))!==null&&n!==void 0?n:this._hitElements[0],typeof i=="string"&&(s.type=i),s}createWheelEvent(e){const i=this.allocateEvent(of);return this.copyWheelData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(e,i){const r=this.allocateEvent(wi);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=i??r.type,r}copyWheelData(e,i){i.deltaMode=e.deltaMode,i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ}copyPointerData(e,i){e instanceof wi&&i instanceof wi&&(i.pointerId=e.pointerId,i.width=e.width,i.height=e.height,i.isPrimary=e.isPrimary,i.pointerType=e.pointerType,i.pressure=e.pressure,i.tangentialPressure=e.tangentialPressure,i.tiltX=e.tiltX,i.tiltY=e.tiltY,i.twist=e.twist)}copyMouseData(e,i){e instanceof Gu&&i instanceof Gu&&(i.altKey=e.altKey,i.button=e.button,i.buttons=e.buttons,i.client.copyFrom(e.client),i.ctrlKey=e.ctrlKey,i.metaKey=e.metaKey,i.movement.copyFrom(e.movement),i.screen.copyFrom(e.screen),i.shiftKey=e.shiftKey,i.global.copyFrom(e.global))}copyData(e,i){i.isTrusted=e.isTrusted,i.srcElement=e.srcElement,i.timeStamp=performance.now(),i.type=e.type,i.detail=e.detail,i.view=e.view,i.which=e.which,i.layer.copyFrom(e.layer),i.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const i=this.eventPool.get(e).pop()||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(e)}_notifyListeners(e,i){const r=e.currentTarget._events[i];if(r)if("fn"in r)r.once&&e.currentTarget.removeListener(i,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let n=0,s=r.length;n<s&&!e.propagationImmediatelyStopped;n++)r[n].once&&e.currentTarget.removeListener(i,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,e)}}bu=new WeakMap;const GE=new Qt;class kf extends tn{constructor(e={}){var i,r,n,s,o,a;super(),this.renderDirtyFlag=!0,this.transform=new Qt,this.children=[],this.cursor=(i=e.cursor)!==null&&i!==void 0?i:"default",this.hitArea=e.hitArea,this.pointerEvents=(r=e.pointerEvents)!==null&&r!==void 0?r:"auto",this.visible=(n=e.visible)!==null&&n!==void 0?n:!0,this.renderable=(s=e.renderable)!==null&&s!==void 0?s:!0,this.draggable=(o=e.draggable)!==null&&o!==void 0?o:!1,this.droppable=(a=e.droppable)!==null&&a!==void 0?a:!1}addEventListener(e,i,r){const n=c_(r)&&r||Mh(r)&&r.capture,s=Mh(r)?r.signal:void 0,o=Mh(r)&&r.once,a=Nh(i)?void 0:i;e=n?`${e}capture`:e;const l=Nh(i)?i:i.handleEvent;s&&s.addEventListener("abort",()=>{this.off(e,l,a)}),o?this.once(e,l,a):this.on(e,l,a)}removeEventListener(e,i,r){const n=c_(r)&&r||Mh(r)&&r.capture,s=Nh(i)?void 0:i;e=n?`${e}capture`:e,i=Nh(i)?i:i==null?void 0:i.handleEvent,this.off(e,i,s)}dispatchEvent(e){if(!(e instanceof ad))throw new Error("Container cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*ya}set angle(e){this.transform.rotation=e*Ra}appendChild(e){return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),e}removeChild(e){const i=this.children.indexOf(e);return i===-1?null:(e.parent=void 0,e.transform._parentID=-1,this.children.splice(i,1),e)}}function KE(t,e,i){let r=!1,n=!1;const s=!!e&&e!=="none",o=!!i&&i!=="none";return t==="visiblepainted"||t==="painted"||t==="auto"?(r=s,n=o):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?n=!0:(t==="visible"||t==="all")&&(r=!0,n=!0),[r,n]}const eP=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

layout(location = 0) in vec2 a_FragCoord;
layout(location = 1) in vec2 a_Position;
layout(location = 2) in vec2 a_Size;
layout(location = 3) in vec4 a_FillColor;

out vec2 v_FragCoord;
out vec4 v_FillColor;

void main() {
  v_FragCoord = a_FragCoord;
  v_FillColor = a_FillColor;

  gl_Position = vec4((u_ProjectionMatrix 
    * u_ViewMatrix
    * u_ModelMatrix 
    * vec3(a_Position + a_Size * a_FragCoord, 1)).xy, 0, 1);
}
`,tP=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
};

layout(std140) uniform ShapeUniforms {
  mat3 u_ModelMatrix;
};

out vec4 outputColor;

in vec2 v_FragCoord;
in vec4 v_FillColor;

float sdf_circle(vec2 p, float r) {
  return length(p) - r;
}

void main() {
  float distance = sdf_circle(v_FragCoord, 1.0);

  if (distance > 0.0) {
    discard;
  }
  
  float alpha = clamp(-distance / fwidth(-distance), 0.0, 1.0);

  outputColor = v_FillColor;
  outputColor.a *= alpha;
}
`;var K=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},mt=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},ns,ss,Ki,Zo,os,qo,af,Qo,as,Sc,Jo,Pc,ea,ta,ia,Cc;class iP extends kf{constructor(e={}){super(e),ns.set(this,void 0),ss.set(this,void 0),Ki.set(this,void 0),Zo.set(this,void 0),os.set(this,void 0),qo.set(this,void 0),af.set(this,void 0),Qo.set(this,void 0),as.set(this,void 0),Sc.set(this,void 0),Jo.set(this,void 0),Pc.set(this,void 0),ea.set(this,void 0),ta.set(this,void 0),ia.set(this,void 0),Cc.set(this,void 0);const{cx:i,cy:r,r:n,fill:s,stroke:o,strokeWidth:a}=e;this.cx=i??0,this.cy=r??0,this.r=n??0,this.fill=s??"black",this.stroke=o??"black",this.strokeWidth=a??0}get cx(){return K(this,ns,"f")}set cx(e){K(this,ns,"f")!==e&&(mt(this,ns,e,"f"),this.renderDirtyFlag=!0)}get cy(){return K(this,ss,"f")}set cy(e){K(this,ss,"f")!==e&&(mt(this,ss,e,"f"),this.renderDirtyFlag=!0)}get r(){return K(this,Ki,"f")}set r(e){K(this,Ki,"f")!==e&&(mt(this,Ki,e,"f"),this.renderDirtyFlag=!0)}get fill(){return K(this,Zo,"f")}set fill(e){K(this,Zo,"f")!==e&&(mt(this,Zo,e,"f"),mt(this,os,Mi(e),"f"),this.renderDirtyFlag=!0)}get stroke(){return K(this,qo,"f")}set stroke(e){K(this,qo,"f")!==e&&(mt(this,qo,e,"f"),mt(this,af,Mi(e),"f"),this.renderDirtyFlag=!0)}get strokeWidth(){return K(this,Qo,"f")}set strokeWidth(e){K(this,Qo,"f")!==e&&(mt(this,Qo,e,"f"),this.renderDirtyFlag=!0)}render(e,i,r){K(this,as,"f")||(mt(this,as,e.createProgram({vertex:{glsl:eP},fragment:{glsl:tP}}),"f"),mt(this,ea,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*16,usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),mt(this,Jo,e.createBuffer({viewOrSize:Float32Array.BYTES_PER_ELEMENT*8,usage:U.VERTEX,hint:Q.DYNAMIC}),"f"),mt(this,Sc,e.createBuffer({viewOrSize:new Float32Array([-1,-1,1,-1,1,1,-1,1]),usage:U.VERTEX,hint:Q.STATIC}),"f"),mt(this,Pc,e.createBuffer({viewOrSize:new Uint32Array([0,1,2,0,2,3]),usage:U.INDEX,hint:Q.STATIC}),"f"),mt(this,ia,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{shaderLocation:0,offset:0,format:v.F32_RG}]},{arrayStride:4*8,stepMode:Se.INSTANCE,attributes:[{shaderLocation:1,offset:0,format:v.F32_RG},{shaderLocation:2,offset:4*2,format:v.F32_RG},{shaderLocation:3,offset:4*4,format:v.F32_RGBA}]}],indexBufferFormat:v.U32_R,program:K(this,as,"f")}),"f"),mt(this,ta,e.createRenderPipeline({inputLayout:K(this,ia,"f"),program:K(this,as,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],megaStateDescriptor:{attachmentsState:[{channelWriteMask:Le.ALL,rgbBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.SRC_ALPHA,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:$e.ADD,blendSrcFactor:Z.ONE,blendDstFactor:Z.ONE_MINUS_SRC_ALPHA}}]}}),"f"),mt(this,Cc,e.createBindings({pipeline:K(this,ta,"f"),uniformBufferBindings:[{buffer:r},{buffer:K(this,ea,"f")}]}),"f")),K(this,ea,"f").setSubData(0,new Uint8Array(new Float32Array(rs(this.worldTransform.toArray(!0))).buffer)),this.renderDirtyFlag&&K(this,Jo,"f").setSubData(0,new Uint8Array(new Float32Array([K(this,ns,"f"),K(this,ss,"f"),K(this,Ki,"f"),K(this,Ki,"f"),K(this,os,"f").r/255,K(this,os,"f").g/255,K(this,os,"f").b/255,K(this,os,"f").opacity]).buffer)),i.setPipeline(K(this,ta,"f")),i.setVertexInput(K(this,ia,"f"),[{buffer:K(this,Sc,"f")},{buffer:K(this,Jo,"f")}],{buffer:K(this,Pc,"f")}),i.setBindings(K(this,Cc,"f")),i.drawIndexed(6,1),this.renderDirtyFlag=!1}destroy(){K(this,as,"f").destroy(),K(this,Jo,"f").destroy(),K(this,Sc,"f").destroy(),K(this,Pc,"f").destroy(),K(this,ea,"f").destroy(),K(this,ta,"f").destroy(),K(this,ia,"f").destroy(),K(this,Cc,"f").destroy()}containsPoint(e,i){const r=K(this,Qo,"f")/2,n=zE(K(this,ns,"f"),K(this,ss,"f"),e,i),[s,o]=KE(this.pointerEvents,K(this,Zo,"f"),K(this,qo,"f"));return s?n<=K(this,Ki,"f"):o?n>=K(this,Ki,"f")-r&&n<=K(this,Ki,"f")+r:!1}}ns=new WeakMap,ss=new WeakMap,Ki=new WeakMap,Zo=new WeakMap,os=new WeakMap,qo=new WeakMap,af=new WeakMap,Qo=new WeakMap,as=new WeakMap,Sc=new WeakMap,Jo=new WeakMap,Pc=new WeakMap,ea=new WeakMap,ta=new WeakMap,ia=new WeakMap,Cc=new WeakMap;const rP=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

layout(location = 0) in vec2 a_Position;

out vec2 v_Position;

vec2 project_clipspace_to_world(vec2 p) {
  return (u_ViewProjectionInvMatrix * vec3(p, 1)).xy;
}

void main() {
  v_Position = project_clipspace_to_world(a_Position);
  gl_Position = vec4(a_Position, 0, 1);
}
`,nP=`
layout(std140) uniform SceneUniforms {
  mat3 u_ProjectionMatrix;
  mat3 u_ViewMatrix;
  mat3 u_ViewProjectionInvMatrix;
  float u_ZoomScale;
  float u_CheckboardStyle;
};

out vec4 outputColor;

in vec2 v_Position;

const vec4 GRID_COLOR = vec4(0.87, 0.87, 0.87, 1.0);
const vec4 PAGE_COLOR = vec4(0.986, 0.986, 0.986, 1.0);
const int CHECKERBOARD_STYLE_NONE = 0;
const int CHECKERBOARD_STYLE_GRID = 1;
const int CHECKERBOARD_STYLE_DOTS = 2;
const float BASE_GRID_PIXEL_SIZE = 100.0;
const float BASE_DOT_SIZE = 8.0;

vec2 scale_grid_size(float zoom) {
  if (zoom < 0.125) return vec2(BASE_GRID_PIXEL_SIZE * 125.0, 0.125);
  else if (zoom < 0.25) return vec2(BASE_GRID_PIXEL_SIZE * 25.0, 0.25);
  else if (zoom < 0.5) return vec2(BASE_GRID_PIXEL_SIZE * 5.0, 0.5);
  return vec2(BASE_GRID_PIXEL_SIZE, 4.0);
}

vec4 render_grid_checkerboard(vec2 coord) {
  float alpha = 0.0;

  vec2 size = scale_grid_size(u_ZoomScale);
  float gridSize1 = size.x;
  float gridSize2 = gridSize1 / 10.0;
  float zoomStep = size.y;
  int checkboardStyle = int(floor(u_CheckboardStyle + 0.5));

  if (checkboardStyle == CHECKERBOARD_STYLE_GRID) {
    vec2 grid1 = abs(fract(coord / gridSize1 - 0.5) - 0.5) / fwidth(coord) * gridSize1 / 2.0;
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    float v1 = 1.0 - min(min(grid1.x, grid1.y), 1.0);
    float v2 = 1.0 - min(min(grid2.x, grid2.y), 1.0);

    if (v1 > 0.0) {
      alpha = v1;
    } else {
      alpha = v2 * clamp(u_ZoomScale / zoomStep, 0.0, 1.0);
    }
  } else if (checkboardStyle == CHECKERBOARD_STYLE_DOTS) {
    vec2 grid2 = abs(fract(coord / gridSize2 - 0.5) - 0.5) / fwidth(coord) * gridSize2;
    alpha = smoothstep(1.0, 0.0, length(grid2) - BASE_DOT_SIZE * u_ZoomScale / zoomStep);
  }

  return mix(PAGE_COLOR, GRID_COLOR, alpha);
}

void main() {
  outputColor = render_grid_checkerboard(v_Position);
}
`;var dt=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},$a=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},ls,ra,na,Mc,Nc,Bc;class ZE{constructor(){ls.set(this,void 0),ra.set(this,void 0),na.set(this,void 0),Mc.set(this,void 0),Nc.set(this,void 0),Bc.set(this,new GS)}appendVertex(e,i){dt(this,Bc,"f").appendFloat(e).appendFloat(i)}render(e,i,r){if(!dt(this,ls,"f")){$a(this,ls,e.createProgram({vertex:{glsl:rP},fragment:{glsl:nP}}),"f"),$a(this,na,e.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Se.VERTEX,attributes:[{format:v.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:dt(this,ls,"f")}),"f"),$a(this,ra,e.createRenderPipeline({inputLayout:dt(this,na,"f"),program:dt(this,ls,"f"),colorAttachmentFormats:[v.U8_RGBA_RT],topology:qe.TRIANGLE_STRIP}),"f"),dt(this,Bc,"f").clear(),this.appendVertex(-1,-1),this.appendVertex(-1,1),this.appendVertex(1,-1),this.appendVertex(1,1);const n=dt(this,Bc,"f").bytes(),s=e.createBuffer({viewOrSize:n.byteLength,usage:U.VERTEX,hint:Q.DYNAMIC});$a(this,Nc,s,"f"),s.setSubData(0,n),$a(this,Mc,e.createBindings({pipeline:dt(this,ra,"f"),uniformBufferBindings:[{buffer:r}]}),"f")}i.setBindings(dt(this,Mc,"f")),i.setPipeline(dt(this,ra,"f")),i.setVertexInput(dt(this,na,"f"),[{buffer:dt(this,Nc,"f")}],null),i.draw(4)}destroy(){dt(this,ls,"f").destroy(),dt(this,Nc,"f").destroy(),dt(this,ra,"f").destroy(),dt(this,na,"f").destroy(),dt(this,Mc,"f").destroy()}}ls=new WeakMap,ra=new WeakMap,na=new WeakMap,Mc=new WeakMap,Nc=new WeakMap,Bc=new WeakMap;class qE extends kf{constructor(){super(...arguments),this.renderable=!1}containsPoint(e,i){throw new Error("Method not implemented.")}render(e,i,r){}destroy(){}}var sP=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},wr=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Te=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},sa,Rt,Xr,cs,hs,Ic,Fc,lf;(function(t){t[t.NONE=0]="NONE",t[t.GRID=1]="GRID",t[t.DOTS=2]="DOTS"})(lf||(lf={}));class oP{constructor(){sa.set(this,void 0),Rt.set(this,void 0),Xr.set(this,void 0),cs.set(this,void 0),hs.set(this,void 0),Ic.set(this,lf.GRID),Fc.set(this,void 0)}apply(e){const{hooks:i,canvas:r,renderer:n,shaderCompilerPath:s,devicePixelRatio:o,camera:a}=e;i.initAsync.tapPromise(()=>sP(this,void 0,void 0,function*(){let l;n==="webgl"?l=new nn({targets:["webgl2","webgl1"],shaderDebug:!0,trackResources:!0,onContextCreationError:()=>{},onContextLost:()=>{},onContextRestored(d){}}):l=new sn({shaderCompilerPath:s,onContextLost:()=>{}});const{width:c,height:h}=r,u=yield l.createSwapChain(r);u.configureSwapChain(c,h),wr(this,sa,u,"f"),wr(this,Rt,u.getDevice(),"f"),wr(this,Xr,Te(this,Rt,"f").createRenderTargetFromTexture(Te(this,Rt,"f").createTexture({format:v.U8_RGBA_RT,width:c,height:h,usage:Ae.RENDER_TARGET})),"f"),wr(this,hs,Te(this,Rt,"f").createBuffer({viewOrSize:new Float32Array([...rs(a.projectionMatrix),...rs(a.viewMatrix),...rs(a.viewProjectionMatrixInv),a.zoom,Te(this,Ic,"f"),0,0]),usage:U.UNIFORM,hint:Q.DYNAMIC}),"f"),wr(this,Fc,new ZE,"f")})),i.resize.tap((l,c)=>{Te(this,sa,"f").configureSwapChain(l*o,c*o),Te(this,Xr,"f")&&(Te(this,Xr,"f").destroy(),wr(this,Xr,Te(this,Rt,"f").createRenderTargetFromTexture(Te(this,Rt,"f").createTexture({format:v.U8_RGBA_RT,width:l*o,height:c*o,usage:Ae.RENDER_TARGET})),"f"))}),i.destroy.tap(()=>{Te(this,Fc,"f").destroy(),Te(this,Xr,"f").destroy(),Te(this,hs,"f").destroy(),Te(this,Rt,"f").destroy(),Te(this,Rt,"f").checkForLeaks()}),i.beginFrame.tap(()=>{const{width:l,height:c}=Te(this,sa,"f").getCanvas(),h=Te(this,sa,"f").getOnscreenTexture();Te(this,hs,"f").setSubData(0,new Uint8Array(new Float32Array([...rs(a.projectionMatrix),...rs(a.viewMatrix),...rs(a.viewProjectionMatrixInv),a.zoom,Te(this,Ic,"f"),0,0]).buffer)),Te(this,Rt,"f").beginFrame(),wr(this,cs,Te(this,Rt,"f").createRenderPass({colorAttachment:[Te(this,Xr,"f")],colorResolveTo:[h],colorClearColor:[rn]}),"f"),Te(this,cs,"f").setViewport(0,0,l,c),Te(this,Fc,"f").render(Te(this,Rt,"f"),Te(this,cs,"f"),Te(this,hs,"f"))}),i.endFrame.tap(()=>{Te(this,Rt,"f").submitPass(Te(this,cs,"f")),Te(this,Rt,"f").endFrame()}),i.render.tap(l=>{l.transform.updateTransform(l.parent?l.parent.transform:GE),l.render(Te(this,Rt,"f"),Te(this,cs,"f"),Te(this,hs,"f"))})}setCheckboardStyle(e){wr(this,Ic,e,"f")}}sa=new WeakMap,Rt=new WeakMap,Xr=new WeakMap,cs=new WeakMap,hs=new WeakMap,Ic=new WeakMap,Fc=new WeakMap;var ui=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},hn=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Oc,us,Vr,oa;const aP=.02,lP=4,cP=100;class hP{constructor(){Oc.set(this,void 0),us.set(this,{}),Vr.set(this,void 0),oa.set(this,!1)}apply(e){const{canvas:i,camera:r,root:n,api:{client2Viewport:s,viewport2Canvas:o}}=e;n.hitArea=new mr(-Number.MAX_VALUE,-Number.MAX_VALUE,1/0,1/0),n.draggable=!0;const a=me();let l,c,h;const u=Re();let d,f=!1;function E(b){const S=i.getBoundingClientRect(),P=b.nativeEvent.clientX-S.left,O=b.nativeEvent.clientY-S.top,Y=P/i.clientWidth,ce=O/i.clientHeight,H=Y*2-1,ee=ce*-2+1;return[H,ee]}function g(b){const S=je(Re(),E(b),a);r.x=l+u[0]-S[0],r.y=c+u[1]-S[1]}function p(b){const S=(b.nativeEvent.clientX-d[0])/100,P=me();Nt(P,P,[u[0],u[1]]),ir(P,P,S),Nt(P,P,[-u[0],-u[1]]),r.x=l,r.y=c,r.rotation=h,tr(P,P,r.matrix),r.rotation=h+S,r.x=P[6],r.y=P[7]}n.addEventListener("dragstart",b=>{ui(this,Vr,"f")||(f=b.shiftKey,rh(a,r.viewProjectionMatrixInv),l=r.x,c=r.y,h=r.rotation,je(u,E(b),a),d=[b.nativeEvent.clientX,b.nativeEvent.clientY])}),n.addEventListener("drag",b=>{ui(this,Vr,"f")||(f?p(b):g(b))}),n.addEventListener("dragend",b=>{ui(this,Vr,"f")||(f=!1)});const y=(b,S,P)=>{const{x:O,y:Y}=o(s({x:b,y:S})),ce=r.zoom*Math.pow(2,P*-.01);r.zoom=Math.max(aP,Math.min(lP,ce));const{x:H,y:ee}=o(s({x:b,y:S}));r.x+=O-H,r.y+=Y-ee};n.addEventListener("wheel",b=>{b.preventDefault(),y(b.nativeEvent.clientX,b.nativeEvent.clientY,b.deltaY)});const T=b=>{b.pointerType==="mouse"?hn(this,Oc,!0,"f"):ui(this,us,"f")[b.pointerId]||(ui(this,us,"f")[b.pointerId]={last:null}),this.touchCount>=2?hn(this,Vr,!0,"f"):hn(this,Vr,!1,"f")},w=b=>{if(b.pointerType==="mouse"&&hn(this,Oc,!1,"f"),b.pointerType!=="mouse"&&delete ui(this,us,"f")[b.pointerId],ui(this,oa,"f")&&this.touchCount<=1)return hn(this,oa,!1,"f"),hn(this,Vr,!1,"f"),!0},_=b=>{if(this.touchCount>=2){const S=b.global.x,P=b.global.y,O=ui(this,us,"f"),Y=Object.keys(O),ce=Number(Y[0]),H=Number(Y[1]),ee=O[ce],Pe=O[H],Xt=ee.last&&Pe.last?Math.sqrt(Math.pow(Pe.last.x-ee.last.x,2)+Math.pow(Pe.last.y-ee.last.y,2)):null;if(ce===b.pointerId?ee.last={x:S,y:P}:H===b.pointerId&&(Pe.last={x:S,y:P}),Xt){const _t=new ve(ee.last.x+(Pe.last.x-ee.last.x)/2,ee.last.y+(Pe.last.y-ee.last.y)/2),nr=Math.sqrt(Math.pow(Pe.last.x-ee.last.x,2)+Math.pow(Pe.last.y-ee.last.y,2));y(_t.x,_t.y,(Xt/nr-1)*cP)}else ui(this,oa,"f")||hn(this,oa,!0,"f")}};n.addEventListener("pointerdown",T),n.addEventListener("pointermove",_),n.addEventListener("pointerup",w),n.addEventListener("pointerupoutside",w),n.addEventListener("pointercancel",w)}get touchCount(){return(ui(this,Oc,"f")?1:0)+Object.keys(ui(this,us,"f")).length}}Oc=new WeakMap,us=new WeakMap,Vr=new WeakMap,oa=new WeakMap;class uP{apply(e){const{canvas:i,hooks:r,globalThis:n,supportsPointerEvents:s,supportsTouchEvents:o}=e,a=_=>{_.preventDefault(),r.pointerMove.call(_)},l=_=>{r.pointerUp.call(_)},c=_=>{r.pointerDown.call(_)},h=_=>{r.pointerOver.call(_)},u=_=>{r.pointerOut.call(_)},d=_=>{r.pointerCancel.call(_)},f=_=>{r.pointerWheel.call(_)},E=_=>{n.document.addEventListener("pointermove",a,!0),_.addEventListener("pointerdown",c,!0),_.addEventListener("pointerleave",u,!0),_.addEventListener("pointerover",h,!0),n.addEventListener("pointerup",l,!0),n.addEventListener("pointercancel",d,!0)},g=_=>{_.addEventListener("touchstart",c,!0),_.addEventListener("touchend",l,!0),_.addEventListener("touchmove",a,!0),_.addEventListener("touchcancel",d,!0)},p=_=>{n.document.addEventListener("mousemove",a,!0),_.addEventListener("mousedown",c,!0),_.addEventListener("mouseout",u,!0),_.addEventListener("mouseover",h,!0),n.addEventListener("mouseup",l,!0)},y=_=>{n.document.removeEventListener("pointermove",a,!0),_.removeEventListener("pointerdown",c,!0),_.removeEventListener("pointerleave",u,!0),_.removeEventListener("pointerover",h,!0),n.removeEventListener("pointerup",l,!0)},T=_=>{_.removeEventListener("touchstart",c,!0),_.removeEventListener("touchend",l,!0),_.removeEventListener("touchmove",a,!0),_.removeEventListener("touchcancel",d,!0)},w=_=>{n.document.removeEventListener("mousemove",a,!0),_.removeEventListener("mousedown",c,!0),_.removeEventListener("mouseout",u,!0),_.removeEventListener("mouseover",h,!0),n.removeEventListener("mouseup",l,!0)};r.init.tap(()=>{s?E(i):(p(i),o&&g(i)),i.addEventListener("wheel",f,{capture:!0})}),r.destroy.tap(()=>{s?y(i):(w(i),o&&T(i)),i.removeEventListener("wheel",f,!0)})}}var u_=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},tt=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},cf,xc,hf,Ai,Er;const dP=1,fP={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};let pP=class{constructor(){cf.set(this,!0),xc.set(this,new wi(null)),hf.set(this,new of(null)),Ai.set(this,void 0),Er.set(this,void 0),this.onPointerMove=e=>{const i=this.normalizeToPointerEvent(e);for(const r of i){const n=this.bootstrapEvent(tt(this,xc,"f"),r);tt(this,Ai,"f").mapEvent(n)}this.setCursor(tt(this,Ai,"f").cursor)}}apply(e){const{hooks:i,root:r}=e;u_(this,Er,e,"f"),u_(this,Ai,new JS(r),"f"),tt(this,Ai,"f").setPickHandler((n,s)=>{const{picked:o}=i.pickSync.call({position:{x:n,y:s},picked:[],topmost:!0});return o[0]||null}),i.pointerWheel.tap(n=>{const s=this.normalizeWheelEvent(n);tt(this,Ai,"f").mapEvent(s)}),i.pointerDown.tap(n=>{const s=this.normalizeToPointerEvent(n);tt(this,cf,"f")&&s[0].isNormalized&&(n.cancelable||!("cancelable"in n))&&n.preventDefault();for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this.bootstrapEvent(tt(this,xc,"f"),l);tt(this,Ai,"f").mapEvent(c)}this.setCursor(tt(this,Ai,"f").cursor)}),i.pointerUp.tap(n=>{let s=n.target;n.composedPath&&n.composedPath().length>0&&(s=n.composedPath()[0]);const o=s!==tt(this,Er,"f").canvas?"outside":"",a=this.normalizeToPointerEvent(n);for(let l=0,c=a.length;l<c;l++){const h=this.bootstrapEvent(tt(this,xc,"f"),a[l]);h.type+=o,tt(this,Ai,"f").mapEvent(h)}this.setCursor(tt(this,Ai,"f").cursor)}),i.pointerMove.tap(this.onPointerMove),i.pointerOver.tap(this.onPointerMove),i.pointerOut.tap(this.onPointerMove),i.pointerCancel.tap(this.onPointerMove)}normalizeWheelEvent(e){const i=tt(this,hf,"f");this.transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode;const{x:r,y:n}=this.getViewportXY(e);i.client.x=r,i.client.y=n;const{x:s,y:o}=tt(this,Er,"f").api.viewport2Canvas(i.client);return i.screen.x=s,i.screen.y=o,i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.metaKey=i.metaKey,e.shiftKey=i.shiftKey,e.ctrlKey=i.ctrlKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.screen.x=i.screenX,e.screen.y=i.screenY,e.relatedTarget=null}setCursor(e){tt(this,Er,"f").canvas.style.cursor=e}normalizeToPointerEvent(e){const{supportsTouchEvents:i,supportsPointerEvents:r}=tt(this,Er,"f"),n=[];if(i&&e instanceof TouchEvent)for(let s=0;s<e.changedTouches.length;s++){const o=e.changedTouches[s];Ye(o.button)&&(o.button=0),Ye(o.buttons)&&(o.buttons=1),Ye(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),Ye(o.width)&&(o.width=o.radiusX||1),Ye(o.height)&&(o.height=o.radiusY||1),Ye(o.tiltX)&&(o.tiltX=0),Ye(o.tiltY)&&(o.tiltY=0),Ye(o.pointerType)&&(o.pointerType="touch"),Ye(o.pointerId)&&(o.pointerId=o.identifier||0),Ye(o.pressure)&&(o.pressure=o.force||.5),Ye(o.twist)&&(o.twist=0),Ye(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,n.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!r||!(e instanceof globalThis.PointerEvent))){const s=e;Ye(s.isPrimary)&&(s.isPrimary=!0),Ye(s.width)&&(s.width=1),Ye(s.height)&&(s.height=1),Ye(s.tiltX)&&(s.tiltX=0),Ye(s.tiltY)&&(s.tiltY=0),Ye(s.pointerType)&&(s.pointerType="mouse"),Ye(s.pointerId)&&(s.pointerId=dP),Ye(s.pressure)&&(s.pressure=.5),Ye(s.twist)&&(s.twist=0),Ye(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(e);return n}bootstrapEvent(e,i){e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this.transferMouseData(e,i);const{x:r,y:n}=this.getViewportXY(i);e.client.x=r,e.client.y=n;const{x:s,y:o}=tt(this,Er,"f").api.viewport2Canvas(e.client);return e.screen.x=s,e.screen.y=o,e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=fP[e.type]||e.type),e}getViewportXY(e){let i,r;const{offsetX:n,offsetY:s,clientX:o,clientY:a}=e;if(!h_(n)&&!h_(s))i=n,r=s;else{const l=tt(this,Er,"f").api.client2Viewport({x:o,y:a});i=l.x,r=l.y}return{x:i,y:r}}};cf=new WeakMap,xc=new WeakMap,hf=new WeakMap,Ai=new WeakMap,Er=new WeakMap;const d_=new ve;class _P{apply(e){const{hooks:i,root:r}=e;i.pickSync.tap(n=>this.pick(n,r))}pick(e,i){const{position:{x:r,y:n}}=e,s=[];return ju(i,o=>{this.hitTest(o,r,n)&&s.unshift(o)}),e.picked=s,e}hitTest(e,i,r){if(e.pointerEvents==="none")return!1;if(e.hitArea||e.renderable){e.worldTransform.applyInverse({x:i,y:r},d_);const{x:n,y:s}=d_;return e.hitArea?e.hitArea.contains(n,s):e.containsPoint(n,s)}return!1}}var EP=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},f_=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Dc;function p_(t,e){do{if(t&&e(t))return t;t=t.parent}while(t!==void 0);return null}class vP{constructor(e={}){Dc.set(this,void 0),EP(this,Dc,Object.assign({overlap:"pointer",dragstartTimeThreshold:0,dragstartDistanceThreshold:0},e),"f")}apply(e){const{root:i,hooks:r,api:{elementsFromPoint:n}}=e,s=o=>{const a=o.target,l=p_(a,c=>c.draggable===!0);if(l){let c=!1;const h=o.timeStamp,u=[o.clientX,o.clientY];let d=null,f=[o.clientX,o.clientY];const E=p=>{if(!c){const _=p.timeStamp-h,b=zE(p.clientX,p.clientY,...u);if(_<=f_(this,Dc,"f").dragstartTimeThreshold||b<=f_(this,Dc,"f").dragstartDistanceThreshold)return;p.type="dragstart",l.dispatchEvent(p),c=!0}p.type="drag",p.dx=p.clientX-f[0],p.dy=p.clientY-f[1],l.dispatchEvent(p),f=[p.clientX,p.clientY];const y=[p.globalX,p.globalY],T=n(y[0],y[1]),w=T[T.indexOf(a)+1];if(w){const _=p_(w,b=>b.droppable===!0);d!==_&&(d&&(p.type="dragleave",p.target=d,d.dispatchEvent(p)),_&&(p.type="dragenter",p.target=_,_.dispatchEvent(p)),d=_,d&&(p.type="dragover",p.target=d,d.dispatchEvent(p)))}};i.addEventListener("pointermove",E);const g=function(p){if(c){p.detail={preventClick:!0};const y=p;d&&(y.type="drop",y.target=d,d.dispatchEvent(y)),y.type="dragend",l.dispatchEvent(y),c=!1}i.removeEventListener("pointermove",E)};a.addEventListener("pointerup",g,{once:!0}),a.addEventListener("pointerupoutside",g,{once:!0})}};r.init.tap(()=>{i.addEventListener("pointerdown",s)}),r.destroy.tap(()=>{i.removeEventListener("pointerdown",s)})}}Dc=new WeakMap;var mP=function(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(u){o(u)}}function l(h){try{c(r.throw(h))}catch(u){o(u)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},ke=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},Wa=function(t,e,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,i):n?n.value=i:e.set(t,i),i},Su,qt,Uc,Pu,Hr,ds;class gP{get root(){return ke(this,Hr,"f")}get camera(){return ke(this,ds,"f")}constructor(e){Su.set(this,void 0),qt.set(this,void 0),Uc.set(this,void 0),Pu.set(this,void 0),Hr.set(this,new qE),ds.set(this,void 0);const{canvas:i,renderer:r="webgl",shaderCompilerPath:n="",devicePixelRatio:s}=e,o=zS(),a=s??o.devicePixelRatio,l=!!o.PointerEvent,c="ontouchstart"in o,{width:h,height:u}=i,d=new jE(h/a,u/a);Wa(this,ds,d,"f"),Wa(this,qt,{globalThis:o,canvas:i,renderer:r,shaderCompilerPath:n,devicePixelRatio:a,supportsPointerEvents:l,supportsTouchEvents:c,hooks:{init:new Kt,initAsync:new HS,beginFrame:new Kt,render:new Kt,endFrame:new Kt,destroy:new Kt,resize:new Kt,pointerDown:new Kt,pointerUp:new Kt,pointerMove:new Kt,pointerOut:new Kt,pointerOver:new Kt,pointerWheel:new Kt,pointerCancel:new Kt,pickSync:new YS},camera:d,root:ke(this,Hr,"f"),api:{elementsFromPoint:this.elementsFromPoint.bind(this),elementFromPoint:this.elementFromPoint.bind(this),client2Viewport:this.client2Viewport.bind(this),viewport2Canvas:this.viewport2Canvas.bind(this),viewport2Client:this.viewport2Client.bind(this),canvas2Viewport:this.canvas2Viewport.bind(this)}},"f"),Wa(this,Uc,new oP,"f"),Wa(this,Pu,new pP,"f");const f=[new uP,ke(this,Pu,"f"),new _P,new hP,ke(this,Uc,"f"),new vP({dragstartTimeThreshold:100,dragstartDistanceThreshold:10})];Wa(this,Su,mP(this,void 0,void 0,function*(){const{hooks:E}=ke(this,qt,"f");return f.forEach(g=>{g.apply(ke(this,qt,"f"))}),E.init.call(),yield E.initAsync.promise(),this}),"f")}get initialized(){return ke(this,Su,"f").then(()=>this)}render(){const{hooks:e}=ke(this,qt,"f");e.beginFrame.call(),ju(ke(this,Hr,"f"),i=>{e.render.call(i)}),e.endFrame.call()}resize(e,i){const{hooks:r}=ke(this,qt,"f");ke(this,ds,"f").projection(e,i),r.resize.call(e,i)}destroy(){const{hooks:e}=ke(this,qt,"f");ju(ke(this,Hr,"f"),i=>{i.destroy()}),e.destroy.call()}getDOM(){return ke(this,qt,"f").canvas}appendChild(e){ke(this,Hr,"f").appendChild(e)}removeChild(e){ke(this,Hr,"f").removeChild(e)}setCheckboardStyle(e){ke(this,Uc,"f").setCheckboardStyle(e)}elementsFromPoint(e,i){const{picked:r}=ke(this,qt,"f").hooks.pickSync.call({topmost:!1,position:{x:e,y:i},picked:[]});return r}elementFromPoint(e,i){const{picked:r}=ke(this,qt,"f").hooks.pickSync.call({topmost:!0,position:{x:e,y:i},picked:[]});return r[0]}client2Viewport({x:e,y:i}){const{left:r,top:n}=ke(this,qt,"f").canvas.getBoundingClientRect();return{x:e-r,y:i-n}}viewport2Client({x:e,y:i}){const{left:r,top:n}=ke(this,qt,"f").canvas.getBoundingClientRect();return{x:e+r,y:i+n}}canvas2Viewport({x:e,y:i}){const{width:r,height:n,viewProjectionMatrix:s}=ke(this,ds,"f"),o=je(Re(),[e,i],s);return{x:(o[0]+1)/2*r,y:(1-(o[1]+1)/2)*n}}viewport2Canvas({x:e,y:i}){const{width:r,height:n,viewProjectionMatrixInv:s}=ke(this,ds,"f"),o=je(Re(),[e/r*2-1,(1-i/n)*2-1],s);return{x:o[0],y:o[1]}}}Su=new WeakMap,qt=new WeakMap,Uc=new WeakMap,Pu=new WeakMap,Hr=new WeakMap,ds=new WeakMap;const TP=Object.freeze(Object.defineProperty({__proto__:null,Camera:jE,Canvas:gP,Circle:iP,Grid:ZE,Group:qE,IDENTITY_TRANSFORM:GE,Rectangle:mr,Shape:kf,isFillOrStrokeAffected:KE},Symbol.toStringTag,{value:"Module"})),yP={createCanvas:async(t,e,i,r="webgl")=>{const n=document.createElement("canvas");return n.style.outline="none",n.style.padding="0px",n.style.margin="0px",n.style.border="1px solid black",n.width=e*window.devicePixelRatio,n.height=i*window.devicePixelRatio,n.style.width=`${e}px`,n.style.height=`${i}px`,n.style.touchAction="none",await new t({canvas:n,renderer:r,shaderCompilerPath:"https://unpkg.com/@antv/g-device-api@1.6.8/dist/pkg/glsl_wgsl_compiler_bg.wasm"}).initialized},resizeCanvas:(t,e,i)=>{const r=t.getDOM();r.width=e*window.devicePixelRatio,r.height=i*window.devicePixelRatio,r.style.width=`${e}px`,r.style.height=`${i}px`,r.style.touchAction="none",t.resize(e,i)}},RP={Theme:kE,library:{Lesson1:$b,Lesson2:Kb,Lesson3:oS,Lesson4:RS,Lesson5:VS,Lesson6:TP,Lesson7:gy,Lesson8:$T,Utils:yP,Stats:LT}},tM={extends:kE,Layout:()=>Ev(Ib,RP),async enhanceApp({app:t}){{const{setBasePath:e}=await Cu(()=>import("./base-path.r-Ppr3Mh.js"),[]);e("https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.0/cdn/"),await Cu(()=>import("./shoelace.DhQcvgn-.js"),__vite__mapDeps([3,4]))}}};export{yf as C,bE as G,tM as R,LT as S,JT as a,Fv as c,_e as u};
